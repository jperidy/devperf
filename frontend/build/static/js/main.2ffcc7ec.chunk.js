(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{283:function(e,t,a){},284:function(e,t,a){},330:function(e,t){},332:function(e,t){},343:function(e,t){},345:function(e,t){},372:function(e,t){},374:function(e,t){},375:function(e,t){},380:function(e,t){},382:function(e,t){},401:function(e,t){},413:function(e,t){},416:function(e,t){},431:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a(36),s=a.n(r),i=a(6),l=a(85),o=a(266),d=a(267),u="PXX_MY_TO_EDIT_REQUEST",j="PXX_MY_TO_EDIT_SUCCESS",b="PXX_MY_TO_EDIT_FAIL",h="PXX_MY_TO_EDIT_RESET",p="PXX_UPDATE_REQUEST",O="PXX_UPDATE_SUCCESS",m="PXX_UPDATE_FAIL",x="PXX_UPDATE_RESET",f="PXX_LIST_REQUEST",g="PXX_LIST_SUCCESS",v="PXX_LIST_FAIL",y="PXX_LIST_RESET",S="PXX_TACE_REQUEST",E="PXX_TACE_SUCCESS",C="PXX_TACE_FAIL",N="PXX_TACE_RESET",T="PXX_AVAILABILITIES_REQUEST",A="PXX_AVAILABILITIES_SUCCESS",L="PXX_AVAILABILITIES_FAIL",_="PXX_AVAILABILITIES_RESET",I="PXX_ALL_REQUEST",D="PXX_ALL_SUCCESS",k="PXX_ALL_FAIL",w="PXX_ALL_RESET",U="PXX_IMPORT_LINE_REQUEST",R="PXX_IMPORT_LINE_SUCCESS",P="PXX_IMPORT_LINE_FAIL",M="PXX_IMPORT_LINE_RESET",F="PXX_UPLOAD_FILE_REQUEST",q="PXX_UPLOAD_FILE_SUCCESS",G="PXX_UPLOAD_FILE_FAIL",z="PXX_UPLOAD_FILE_RESET",B="PXX_UPDATE_PXX_REQUEST",X="PXX_UPDATE_PXX_SUCCESS",H="PXX_UPDATE_PXX_FAIL",Q="PXX_UPDATE_PXX_RESET",K="USER_LOGIN_REQUEST",V="USER_LOGIN_SUCCESS",Y="USER_LOGIN_FAIL",W="USER_LOGOUT",J="USER_REDIRECT_AZ_REQUEST",Z="USER_REDIRECT_AZ_SUCCESS",$="USER_REDIRECT_AZ_FAIL",ee="USER_REDIRECT_AZ_RESET",te="USER_REGISTER_REQUEST",ae="USER_REGISTER_SUCCESS",ne="USER_REGISTER_FAIL",ce="USER_REGISTER_RESET",re="USER_DETAILS_REQUEST",se="USER_DETAILS_SUCCESS",ie="USER_DETAILS_FAIL",le="USER_DETAILS_RESET",oe="USER_UPDATE_PROFILE_REQUEST",de="USER_UPDATE_PROFILE_SUCCESS",ue="USER_UPDATE_PROFILE_FAIL",je="USER_UPDATE_PROFILE_RESET",be="USER_LIST_REQUEST",he="USER_LIST_SUCCESS",pe="USER_LIST_FAIL",Oe="USER_LIST_RESET",me="USER_DELETE_REQUEST",xe="USER_DELETE_SUCCESS",fe="USER_DELETE_FAIL",ge="USER_DELETE_RESET",ve="USER_UPDATE_REQUEST",ye="USER_UPDATE_SUCCESS",Se="USER_UPDATE_FAIL",Ee="USER_UPDATE_RESET",Ce=["Waiting approval","Validated","Refused"],Ne=a(21),Te="CONSULTANTS_MY_DETAILS_REQUEST",Ae="CONSULTANTS_MY_DETAILS_SUCCESS",Le="CONSULTANTS_MY_DETAILS_FAIL",_e="CONSULTANTS_MY_DETAILS_FOCUS",Ie="CONSULTANTS_MY_DETAILS_RESET",De="CONSULTANTS_ALL_ADMIN_DETAILS_REQUEST",ke="CONSULTANTS_ALL_ADMIN_DETAILS_SUCCESS",we="CONSULTANTS_ALL_ADMIN_DETAILS_FAIL",Ue="CONSULTANTS_ALL_ADMIN_DETAILS_RESET",Re="CONSULTANTS_ALL_LEADERS_REQUEST",Pe="CONSULTANTS_ALL_LEADERS_SUCCESS",Me="CONSULTANTS_ALL_LEADERS_FAIL",Fe="CONSULTANTS_ALL_LEADERS_RESET",qe="CONSULTANT_MY_REQUEST",Ge="CONSULTANT_MY_SUCCESS",ze="CONSULTANT_MY_FAIL",Be="CONSULTANT_MY_RESET",Xe="CONSULTANT_DELEGATE_UPDATE_REQUEST",He="CONSULTANT_DELEGATE_UPDATE_SUCCESS",Qe="CONSULTANT_DELEGATE_UPDATE_FAIL",Ke="CONSULTANT_DELEGATE_UPDATE_RESET",Ve="CONSULTANT_MY_UPDATE_REQUEST",Ye="CONSULTANT_MY_UPDATE_SUCCESS",We="CONSULTANT_MY_UPDATE_FAIL",Je="CONSULTANT_MY_UPDATE_RESET",Ze="CONSULTANT_CREATE_REQUEST",$e="CONSULTANT_CREATE_SUCCESS",et="CONSULTANT_CREATE_FAIL",tt="CONSULTANT_CREATE_RESET",at="CONSULTANT_DELETE_REQUEST",nt="CONSULTANT_DELETE_SUCCESS",ct="CONSULTANT_DELETE_FAIL",rt="CONSULTANT_DELETE_RESET",st="CONSULTANT_CDM_LIST_REQUEST",it="CONSULTANT_CDM_LIST_SUCCESS",lt="CONSULTANT_CDM_LIST_FAIL",ot="CONSULTANT_CDM_LIST_RESET",dt="CONSULTANT_PRACTICE_LIST_REQUEST",ut="CONSULTANT_PRACTICE_LIST_SUCCESS",jt="CONSULTANT_PRACTICE_LIST_FAIL",bt="CONSULTANT_PRACTICE_LIST_RESET",ht="CONSULTANT_UPDATE_COMMENT_REQUEST",pt="CONSULTANT_UPDATE_COMMENT_SUCCESS",Ot="CONSULTANT_UPDATE_COMMENT_FAIL",mt="CONSULTANT_UPDATE_COMMENT_RESET",xt="CONSULTANT_CDM_REQUEST",ft="CONSULTANT_CDM_SUCCESS",gt="CONSULTANT_CDM_FAIL",vt="CONSULTANT_CDM_RESET",yt="CONSULTANT_SKILLS_REQUEST",St="CONSULTANT_SKILLS_SUCCESS",Et="CONSULTANT_SKILLS_FAIL",Ct="CONSULTANT_SKILLS_RESET",Nt="CONSULTANT_ALL_SKILLS_REQUEST",Tt="CONSULTANT_ALL_SKILLS_SUCCESS",At="CONSULTANT_ALL_SKILLS_FAIL",Lt="CONSULTANT_ALL_SKILLS_RESET",_t="CONSULTANT_ALL_STAFF_REQUEST",It="CONSULTANT_ALL_STAFF_SUCCESS",Dt="CONSULTANT_ALL_STAFF_FAIL",kt="CONSULTANT_ALL_STAFF_RESET",wt="CONSULTANT_ADD_SKILL_REQUEST",Ut="CONSULTANT_ADD_SKILL_SUCCESS",Rt="CONSULTANT_ADD_SKILL_FAIL",Pt="CONSULTANT_ADD_SKILL_RESET",Mt="CONSULTANT_DELETE_SKILL_REQUEST",Ft="CONSULTANT_DELETE_SKILL_SUCCESS",qt="CONSULTANT_DELETE_SKILL_FAIL",Gt="CONSULTANT_DELETE_SKILL_RESET",zt="CONSULTANT_UPDATE_SKILL_REQUEST",Bt="CONSULTANT_UPDATE_SKILL_SUCCESS",Xt="CONSULTANT_UPDATE_SKILL_FAIL",Ht="CONSULTANT_UPDATE_SKILL_RESET",Qt="CONSULTANT_MASS_IMPORT_REQUEST",Kt="CONSULTANT_MASS_IMPORT_SUCCESS",Vt="CONSULTANT_MASS_IMPORT_FAIL",Yt="CONSULTANT_MASS_IMPORT_RESET",Wt="CONSULTANT_UPLOAD_WK_REQUEST",Jt="CONSULTANT_UPLOAD_WK_SUCCESS",Zt="CONSULTANT_UPLOAD_WK_FAIL",$t="CONSULTANT_UPLOAD_WK_RESET",ea="CONSULTANT_UPDATE_WK_REQUEST",ta="CONSULTANT_UPDATE_WK_SUCCESS",aa="CONSULTANT_UPDATE_WK_FAIL",na="CONSULTANT_UPDATE_WK_RESET",ca=["Intern","Analyst","Consultant","Senior consultant","Manager","Senior manager","Director","Partner","Unknown","Commercial","Research"],ra="SKILL_LIST_REQUEST",sa="SKILL_LIST_SUCCESS",ia="SKILL_LIST_FAIL",la="SKILL_LIST_RESET",oa="SKILL_DELETE_REQUEST",da="SKILL_DELETE_SUCCESS",ua="SKILL_DELETE_FAIL",ja="SKILL_DELETE_RESET",ba="SKILL_CREATE_REQUEST",ha="SKILL_CREATE_SUCCESS",pa="SKILL_CREATE_FAIL",Oa="SKILL_CREATE_RESET",ma="DEAL_CREATE_REQUEST",xa="DEAL_CREATE_SUCCESS",fa="DEAL_CREATE_FAIL",ga="DEAL_CREATE_RESET",va="DEAL_UPDATE_REQUEST",ya="DEAL_UPDATE_SUCCESS",Sa="DEAL_UPDATE_FAIL",Ea="DEAL_UPDATE_RESET",Ca="DEAL_ALL_LIST_REQUEST",Na="DEAL_ALL_LIST_SUCCESS",Ta="DEAL_ALL_LIST_FAIL",Aa="DEAL_ALL_LIST_RESET",La="DEAL_DELETE_REQUEST",_a="DEAL_DELETE_SUCCESS",Ia="DEAL_DELETE_FAIL",Da="DEAL_DELETE_RESET",ka="DEAL_EDIT_REQUEST",wa="DEAL_EDIT_SUCCESS",Ua="DEAL_EDIT_FAIL",Ra="DEAL_EDIT_RESET",Pa="DEAL_OLD_REQUEST",Ma="DEAL_OLD_SUCCESS",Fa="DEAL_OLD_FAIL",qa="DEAL_OLD_RESET",Ga="DEAL_MASS_IMPORT_REQUEST",za="DEAL_MASS_IMPORT_SUCCESS",Ba="DEAL_MASS_IMPORT_FAIL",Xa="DEAL_MASS_IMPORT_RESET",Ha=[{name:"Identify Leader",staff:!0,priority:10},{name:"Identify Staff",staff:!0,priority:7},{name:"Staff to validate by leader",staff:!1,priority:5},{name:"Staff validated by leader",staff:!1,priority:0},{name:"Staff validated by client",staff:!1,priority:0},{name:"You can staff elsewhere",staff:!1,priority:0},{name:"Close",staff:!1,priority:0}],Qa=[{name:"New business",priority:10},{name:"New position",priority:5},{name:"Replacement",priority:1}],Ka=[{name:"Lead",priority:0,display:"onTrack"},{name:"Proposal to send",priority:5,display:"onTrack"},{name:"Proposal sent",priority:5,display:"onTrack"},{name:"Won",priority:10,display:"win"},{name:"Abandoned",priority:0,display:"lost"},{name:"Lost",priority:0,display:"lots"}],Va=[{name:10,priority:1},{name:30,priority:3},{name:50,priority:5},{name:70,priority:7},{name:100,priority:10}],Ya="ACCESS_LIST_REQUEST",Wa="ACCESS_LIST_SUCCESS",Ja="ACCESS_LIST_FAIL",Za="ACCESS_LIST_RESET",$a="ACCESS_UPDATE_FRONTACCESS_REQUEST",en="ACCESS_UPDATE_FRONTACCESS_SUCCESS",tn="ACCESS_UPDATE_FRONTACCESS_FAIL",an="ACCESS_UPDATE_FRONTACCESS_RESET",nn=["no","yes","read","write"],cn=["my","team","department","domain","all"],rn="CLIENT_ALL_REQUEST",sn="CLIENT_ALL_SUCCESS",ln="CLIENT_ALL_FAIL",on="CLIENT_ALL_RESET",dn="CLIENT_CREATE_REQUEST",un="CLIENT_CREATE_SUCCESS",jn="CLIENT_CREATE_FAIL",bn="CLIENT_CREATE_RESET",hn="CLIENT_UPDATE_REQUEST",pn="CLIENT_UPDATE_SUCCESS",On="CLIENT_UPDATE_FAIL",mn="CLIENT_UPDATE_RESET",xn="CLIENT_DELETE_REQUEST",fn="CLIENT_DELETE_SUCCESS",gn="CLIENT_DELETE_FAIL",vn="CLIENT_DELETE_RESET",yn="TACE_CREATE_REQUEST",Sn="TACE_CREATE_SUCCESS",En="TACE_CREATE_FAIL",Cn="TACE_CREATE_RESET",Nn="EMAIL_CONTACTS_LIST_REQUEST",Tn="EMAIL_CONTACTS_LIST_SUCCESS",An="EMAIL_CONTACTS_LIST_FAIL",Ln="EMAIL_CONTACTS_LIST_RESET",_n="EMAIL_SEND_DECISION_REQUEST",In="EMAIL_SEND_DECISION_SUCCESS",Dn="EMAIL_SEND_DECISION_FAIL",kn="EMAIL_SEND_DECISION_RESET",wn=Object(l.combineReducers)({userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return{loading:!0};case ae:return{loading:!1,userInfo:t.payload};case ne:return{loading:!1,error:t.payload};case ce:return{};default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return{loading:!0};case V:return{loading:!1,userInfo:t.payload};case Y:return{loading:!1,error:t.payload};case W:return{};default:return e}},userRedirectAz:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return{loading:!0};case Z:return{loading:!1,redirectURL:t.payload.redirectURL};case $:return{loading:!1,error:t.payload};case ee:return{};default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return{loading:!0};case he:return{loading:!1,users:t.payload.users,pages:t.payload.pages,page:t.payload.page,count:t.payload.count};case pe:return{loading:!1,error:t.payload};case Oe:return{};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return{loading:!0};case se:return{loading:!1,user:t.payload};case ie:return{loading:!1,error:t.payload};case le:return{};default:return e}},userUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return{loading:!0};case ye:return{loading:!1,success:!0};case Se:return{loading:!1,error:t.payload};case Ee:return{};default:return e}},userDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return{loading:!0};case xe:return{loading:!1,success:!0};case fe:return{loading:!1,error:t.payload};case ge:return{};default:return e}},userUpdateProfil:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return{loading:!0};case de:return{loading:!1,success:!0,userInfo:t.payload};case ue:return{loading:!1,error:t.payload};case je:return{};default:return e}},consultantUpdateComment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return{loading:!0};case pt:return{loading:!1,success:!0};case Ot:return{loading:!1,error:t.payload};case mt:return{};default:return e}},consultantsMyAdminList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return{loading:!0};case ke:return{loading:!1,consultantsMyAdmin:t.payload.consultants,pages:t.payload.pages,page:t.payload.page,count:t.payload.count};case we:return{loading:!1,error:t.payload};case Ue:return{};default:return e}},consultantsMyList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{focus:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return Object(Ne.a)(Object(Ne.a)({},e),{},{loading:!0});case Ae:return Object(Ne.a)(Object(Ne.a)({},e),{},{loading:!1,consultantsMy:t.payload});case Le:return Object(Ne.a)(Object(Ne.a)({},e),{},{loading:!1,error:t.payload});case _e:return Object(Ne.a)(Object(Ne.a)({},e),{},{focus:t.payload});case Ie:return{focus:0};default:return e}},consultantMy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe:return{loading:!0};case Ge:return{loading:!1,consultant:t.payload};case ze:return{loading:!1,error:t.payload};case Be:return{};default:return e}},consultantMyUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ve:return{loading:!0};case Ye:return{loading:!1,success:!0};case We:return{loading:!1,error:t.payload};case Je:return{};default:return e}},consultantCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze:return{loading:!0};case $e:return{loading:!1,success:!0,consultantCreated:t.payload};case et:return{loading:!1,error:t.payload};case tt:return{};default:return e}},consultantDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case at:return{loading:!0};case nt:return{loading:!1,success:!0};case ct:return{loading:!1,error:t.payload};case rt:return{};default:return e}},consultantCDMList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case st:return{loading:!0};case it:return{loading:!1,cdmList:t.payload};case lt:return{loading:!1,error:t.payload};case ot:return{};default:return e}},consultantDelegateUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe:return{loading:!0};case He:return{loading:!1,success:!0};case Qe:return{loading:!1,error:t.payload};case Ke:return{};default:return e}},consultantPracticeList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dt:return{loading:!0};case ut:return{loading:!1,practiceList:t.payload};case jt:return{loading:!1,error:t.payload};case bt:return{};default:return e}},consultantSkills:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yt:return{loading:!0};case St:return{loading:!1,skills:t.payload};case Et:return{loading:!1,error:t.payload};case Ct:return{};default:return e}},consultantAllSkills:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nt:return{loading:!0};case Tt:return{loading:!1,skills:t.payload};case At:return{loading:!1,error:t.payload};case Lt:return{};default:return e}},consultantAllStaffs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t:return{loading:!0};case It:return{loading:!1,staffings:t.payload};case Dt:return{loading:!1,error:t.payload};case kt:return{};default:return e}},consultantAddSkill:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wt:return{loading:!0};case Ut:return{loading:!1,success:!0};case Rt:return{loading:!1,success:!1,error:t.payload};case Pt:return{};default:return e}},consultantDeleteSkill:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mt:return{loading:!0};case Ft:return{loading:!1,success:!0};case qt:return{loading:!1,success:!1,error:t.payload};case Gt:return{};default:return e}},consultantUpdateSkill:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zt:return{loading:!0};case Bt:return{loading:!1,success:!0};case Xt:return{loading:!1,success:!1,error:t.payload};case Ht:return{};default:return e}},consultantGetCdm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xt:return{loading:!0};case ft:return{loading:!1,success:!0,cdm:t.payload};case gt:return{loading:!1,error:t.payload};case vt:return{};default:return e}},consultantsAllLeaders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return{loading:!0};case Pe:return{loading:!1,leaderslist:t.payload};case Me:return{loading:!1,error:t.payload};case Fe:return{};default:return e}},consultantsMassImport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qt:return{loading:!0};case Kt:return{loading:!1,success:!0};case Vt:return{loading:!1,success:!1,error:t.payload};case Yt:return{};default:return e}},consultantUploadWk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Wt:return{loading:!0};case Jt:return{loading:!1,success:!0,path:t.payload};case Zt:return{loading:!1,success:!1,error:t.payload};case $t:return{};default:return e}},consultantUpdateWk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ea:return{loading:!0};case ta:return{loading:!1,success:!0,message:t.payload};case aa:return{loading:!1,success:!1,error:t.payload};case na:return{};default:return e}},pxxList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pxxs:{pxxMonthInformation:[],pxxUserList:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{loading:!0,pxxs:{}};case g:return{loading:!1,pxxs:t.payload};case v:return{loading:!1,error:t.payload};case y:return{pxxs:{pxxMonthInformation:[],pxxUserList:[]}};default:return e}},pxxAllList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return{loading:!0,success:!1};case D:return{loading:!1,success:!0,pxxs:t.payload.pxxs,pages:t.payload.pages,page:t.payload.page,count:t.payload.count};case k:return{loading:!1,error:t.payload};case w:return{};default:return e}},pxxMyToEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pxx:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return{loading:!0};case j:return{loading:!1,pxx:t.payload};case b:return{loading:!1,error:t.payload};case h:return{pxx:[]};default:return e}},pxxUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return{loading:!0};case O:return{loading:!1,success:!0};case m:return{loading:!1,error:t.payload};case x:return{};default:return e}},pxxTACE:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return{loading:!0,success:!1};case E:return{loading:!1,success:!0,tace:t.payload};case C:return{loading:!1,error:t.payload};case N:return{};default:return e}},pxxAvailabilities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return{loading:!0,success:!1};case A:return{loading:!1,success:!0,availabilities:t.payload};case L:return{loading:!1,error:t.payload};case _:return{};default:return e}},updatePxx:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return{loading:!0};case X:return{loading:!1,success:!0,message:t.payload};case H:return{loading:!1,error:t.payload};case Q:return{};default:return e}},pxxImportLine:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pxx:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return{loading:!0};case R:return{loading:!1,success:!0,updatedLine:t.payload};case P:return{loading:!1,error:t.payload};case M:return{pxx:[]};default:return e}},pxxUploadFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return{loading:!0};case q:return{loading:!1,success:!0,path:t.payload};case G:return{loading:!1,error:t.payload};case z:return{};default:return e}},skillList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ra:return{loading:!0,success:!1};case sa:return{loading:!1,success:!0,skills:t.payload.skills,pages:t.payload.pages,page:t.payload.page,count:t.payload.count};case ia:return{loading:!1,error:t.payload};case la:return{};default:return e}},skillDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oa:return{loading:!0,success:!1};case da:return{loading:!1,success:!0};case ua:return{loading:!1,error:t.payload};case ja:return{};default:return e}},skillCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ba:return{loading:!0,success:!1};case ha:return{loading:!1,success:!0};case pa:return{loading:!1,error:t.payload};case Oa:return{};default:return e}},dealCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ma:return{loading:!0};case xa:return{loading:!1,success:!0,createId:t.payload};case fa:return{loading:!1,error:t.payload};case ga:return{};default:return e}},dealAllList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ca:return{loading:!0};case Na:return{loading:!1,success:!0,deals:t.payload.deals,pages:t.payload.pages,page:t.payload.page,count:t.payload.count};case Ta:return{loading:!1,error:t.payload};case Aa:return{};default:return e}},dealDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case La:return{loading:!0};case _a:return{loading:!1,success:!0};case Ia:return{loading:!1,error:t.payload};case Da:return{};default:return e}},dealEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ka:return{loading:!0};case wa:return{loading:!1,success:!0,deal:t.payload};case Ua:return{loading:!1,error:t.payload};case Ra:return{};default:return e}},dealUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case va:return{loading:!0};case ya:return{loading:!1,success:!0};case Sa:return{loading:!1,error:t.payload};case Ea:return{};default:return e}},dealOld:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pa:return{loading:!0};case Ma:return{loading:!1,success:!0,oldDeals:t.payload};case Fa:return{loading:!1,error:t.payload};case qa:return{};default:return e}},dealsImportMass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ga:return{loading:!0};case za:return{loading:!1,success:!0,datas:t.payload.datas};case Ba:return{loading:!1,error:t.payload};case Xa:return{};default:return e}},accessList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ya:return{loading:!0};case Wa:return{loading:!1,access:t.payload};case Ja:return{loading:!1,error:t.payload};case Za:return{};default:return e}},accessFrontUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $a:return{loading:!0};case en:return{loading:!1,success:!0};case tn:return{loading:!1,error:t.payload};case an:return{};default:return e}},clientAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rn:return{loading:!0};case sn:return{loading:!1,success:!0,clients:t.payload.clients,page:t.payload.page,pages:t.payload.pages,count:t.payload.count};case ln:return{loading:!1,error:t.payload};case on:return{};default:return e}},clientCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dn:return{loading:!0};case un:return{loading:!1,success:!0};case jn:return{loading:!1,error:t.payload};case bn:return{};default:return e}},clientUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case hn:return{loading:!0};case pn:return{loading:!1,success:!0};case On:return{loading:!1,error:t.payload};case mn:return{};default:return e}},clientDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xn:return{loading:!0};case fn:return{loading:!1,success:!0};case gn:return{loading:!1,error:t.payload};case vn:return{};default:return e}},createTace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yn:return{loading:!0,success:!1};case Sn:return{loading:!1,taceData:t.payload};case En:return{loading:!1,error:t.payload};case Cn:return{};default:return e}},contactsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nn:return{loading:!0};case Tn:return{loading:!1,contacts:t.payload};case An:return{loading:!1,error:t.payload};case Ln:return{};default:return e}},sendOneEmail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _n:return{loading:!0};case In:return{success:!0,loading:!1,email:t.payload.email};case Dn:return{loading:!1,error:t.payload};case kn:return{};default:return e}}}),Un={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Rn=[o.a],Pn=Object(l.createStore)(wn,Un,Object(d.composeWithDevTools)(l.applyMiddleware.apply(void 0,Rn))),Mn=(a(283),a(284),a(60)),Fn=a(33),qn=a(78),Gn=a(42),zn=a(122),Bn=a(71),Xn=a(38),Hn=a(9),Qn=a.n(Hn),Kn=a(15),Vn=a(16),Yn=a.n(Vn),Wn=function(e,t){return function(){var a=Object(Kn.a)(Qn.a.mark((function a(n){var c,r,s;return Qn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n({type:K}),c={headers:{"Content-type":"Application/json"}},r="","LOCAL"!==e){a.next=8;break}return a.next=7,Yn.a.post("/api/users/login",{email:t.email,password:t.password},c);case 7:r=a.sent;case 8:if("AZ"!==e){a.next=12;break}return a.next=11,Yn.a.get("/api/users/loginAz?code=".concat(t.code),c);case 11:r=a.sent;case 12:s=Object(Ne.a)(Object(Ne.a)({},r.data),{},{accountType:e}),n({type:V,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),n({type:Y,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 20:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(e){return a.apply(this,arguments)}}()},Jn=function(){return function(e){localStorage.clear(),e({type:W}),e({type:ce}),e({type:Ie}),e({type:Be}),e({type:y}),e({type:h}),e({type:x})}},Zn=function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:re}),c=n(),r=c.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.get("/api/users/".concat(e),s);case 6:i=t.sent,l=i.data,a({type:se,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:ie,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},$n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"15";return function(){var c=Object(Kn.a)(Qn.a.mark((function c(r,s){var i,l,o,d,u;return Qn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,r({type:be}),i=s(),l=i.userLogin.userInfo,o={headers:{Authorization:"Bearer ".concat(l.token)}},c.next=6,Yn.a.get("/api/users?practice=".concat(e,"&keyword=").concat(t,"&pageNumber=").concat(a,"&pageSize=").concat(n),o);case 6:d=c.sent,u=d.data,r({type:he,payload:u}),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),r({type:pe,payload:c.t0.response&&c.t0.response.data.message?c.t0.response.data.message:c.t0.message});case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e,t){return c.apply(this,arguments)}}()},ec=function(e){var t=e.access,a=e.children,c=Object(i.c)((function(e){return e.userLogin})).userInfo,r=!1;if(c){var s=c.profil.frontAccess.filter((function(e){return e.id===t}));s.length>0&&(r="no"!==s[0].mode)}return Object(n.jsx)("span",{children:r&&a})},tc=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.userLogin})).userInfo;return Object(n.jsx)("header",{children:Object(n.jsx)(zn.a,{bg:"primary",variant:"dark",expand:"lg",collapseOnSelect:!0,fixed:"top",children:Object(n.jsxs)(qn.a,{children:[Object(n.jsx)(Gn.LinkContainer,{to:"/",children:Object(n.jsx)(zn.a.Brand,{children:"Performance App"})}),Object(n.jsx)(zn.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsx)(zn.a.Collapse,{id:"basic-navbar-nav",children:Object(n.jsxs)(Bn.a,{className:"ml-auto",children:[Object(n.jsx)(ec,{access:"staffingRequest",children:Object(n.jsx)(Gn.LinkContainer,{to:"/staffing",children:Object(n.jsx)(Bn.a.Link,{children:"Staffing Request"})})}),Object(n.jsx)(ec,{access:"editMyPxx",children:Object(n.jsx)(Gn.LinkContainer,{to:"/pxx",children:Object(n.jsx)(Bn.a.Link,{children:"Edit My Pxx"})})}),t?Object(n.jsxs)(Xn.a,{title:"".concat(t.name," (").concat(t.profil.profil&&t.profil.profil,")")||!1,id:"username",children:[Object(n.jsx)(ec,{access:"editMyProfil",children:Object(n.jsx)(Gn.LinkContainer,{to:"/profile",children:Object(n.jsx)(Xn.a.Item,{children:"Edit My Profil"})})}),Object(n.jsxs)(ec,{access:"manageConsultants",children:[Object(n.jsx)(Xn.a.Divider,{}),Object(n.jsx)(Gn.LinkContainer,{to:"/admin/consultants",children:Object(n.jsx)(Xn.a.Item,{children:"Manage Consultant"})})]}),Object(n.jsxs)(ec,{access:"manageDeals",children:[Object(n.jsx)(Xn.a.Divider,{}),Object(n.jsx)(Gn.LinkContainer,{to:"/admin/deals",children:Object(n.jsx)(Xn.a.Item,{children:"Manage Deals"})})]}),Object(n.jsx)(Xn.a.Divider,{}),Object(n.jsx)(Gn.LinkContainer,{to:"/login",children:Object(n.jsx)(Xn.a.Item,{onClick:function(){e(Jn())},children:"Logout"})})]}):Object(n.jsx)(Gn.LinkContainer,{to:"/login",children:Object(n.jsxs)(Bn.a.Link,{children:[Object(n.jsx)("i",{className:"fas fa-user"}),"Sign In"]})}),Object(n.jsx)(ec,{access:"adminMenu",children:Object(n.jsxs)(Xn.a,{title:"admin",children:[Object(n.jsx)(ec,{access:"manageUsers",children:Object(n.jsx)(Gn.LinkContainer,{to:"/admin/users",children:Object(n.jsx)(Xn.a.Item,{children:"Manage Users"})})}),Object(n.jsxs)(ec,{access:"manageSkills",children:[Object(n.jsx)(Xn.a.Divider,{}),Object(n.jsx)(Gn.LinkContainer,{to:"/admin/skills",children:Object(n.jsx)(Xn.a.Item,{children:"Manage Skills"})})]}),Object(n.jsxs)(ec,{access:"manageProfils",children:[Object(n.jsx)(Xn.a.Divider,{}),Object(n.jsx)(Gn.LinkContainer,{to:"/admin/profils",children:Object(n.jsx)(Xn.a.Item,{children:"Manage Profils"})})]}),Object(n.jsxs)(ec,{access:"manageCompanies",children:[Object(n.jsx)(Xn.a.Divider,{}),Object(n.jsx)(Gn.LinkContainer,{to:"/admin/companies",children:Object(n.jsx)(Xn.a.Item,{children:"Manage companies"})})]})]})})]})})]})})})},ac=a(10),nc=a(5),cc=function(){return Object(n.jsx)("footer",{children:Object(n.jsx)(qn.a,{children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{className:"text-center py-3",children:"Copyright \xa9 byJPR"})})})})},rc=a(4),sc=a(3),ic=a(12),lc=a(436),oc=function(e){var t=e.variant,a=e.children;return Object(n.jsx)(lc.a,{variant:t,className:"my-1",children:a})};oc.defaultProps={variant:"info"};var dc=oc,uc=a(437),jc=function(){return Object(n.jsx)(uc.a,{animation:"border",role:"status",stype:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})},bc=function(e){var t=e.children;return Object(n.jsx)(qn.a,{children:Object(n.jsx)(ac.a,{className:"justify-content-md-center",children:Object(n.jsx)(nc.a,{xs:12,md:6,children:t})})})},hc=function(e){var t=e.location,a=e.history,r=Object(c.useState)(""),s=Object(rc.a)(r,2),l=s[0],o=s[1],d=Object(c.useState)(""),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(null),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(i.b)(),f=Object(i.c)((function(e){return e.userLogin})),g=f.loading,v=f.error,y=f.userInfo,S=Object(i.c)((function(e){return e.userRedirectAz})).redirectURL,E=t.search?t.search.split("=")[1]:"/";Object(c.useEffect)((function(){y&&"Validated"===y.status&&a.push(E)})),Object(c.useEffect)((function(){S&&(window.location.href=S)}),[S]),Object(c.useEffect)((function(){t.search&&t.search.split("code=").length>0&&(x(Wn("AZ",{code:t.search.split("code=")[1]})),a.push("/"))}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(bc,{children:[Object(n.jsx)("h1",{children:"Sign In"}),O&&Object(n.jsx)(dc,{variant:"danger",children:O}),v&&Object(n.jsx)(dc,{variant:"danger",children:v}),g&&Object(n.jsx)(jc,{}),Object(n.jsxs)(sc.a,{onSubmit:function(e){!1===e.currentTarget.checkValidity()?m("Please check your information"):(e.preventDefault(),x(Wn("LOCAL",{email:l,password:j})))},children:[Object(n.jsxs)(sc.a.Group,{controlId:"email",children:[Object(n.jsx)(sc.a.Label,{children:"Email Address"}),Object(n.jsx)(sc.a.Control,{type:"email",placeholder:"Enter Email",value:l,onChange:function(e){return o(e.target.value.toLocaleLowerCase())}})]}),Object(n.jsxs)(sc.a.Group,{controlId:"password",children:[Object(n.jsx)(sc.a.Label,{children:"Password"}),Object(n.jsx)(sc.a.Control,{type:"password",placeholder:"Enter password",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(ic.a,{type:"submit",variant:"primary",block:!0,children:"Sign In"})})}),Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{className:"mt-3",children:Object(n.jsx)(ic.a,{variant:"success",onClick:function(){x(function(){var e=Object(Kn.a)(Qn.a.mark((function e(t){var a,n,c;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:J}),a={headers:{"Content-type":"Application/json"}},e.next=5,Yn.a.get("/api/users/redirectAz",a);case 5:n=e.sent,c=n.data,t({type:Z,payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:$,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())},block:!0,disabled:!0,children:"-- AZ Connect --"})})}),Object(n.jsx)(ac.a,{className:"py-3",children:Object(n.jsxs)(nc.a,{children:["New User ? ",Object(n.jsx)(Mn.Link,{to:E?"/register?reditect=".concat(E):"/register",children:"Register"})]})})]})]}),!1,Object(n.jsx)(qn.a,{children:Object(n.jsx)(ac.a,{className:"justify-content-md-center",children:Object(n.jsxs)(nc.a,{xs:12,md:6,className:"mt-5",children:[Object(n.jsx)("h3",{children:"Disclaimer"}),Object(n.jsxs)("p",{children:["Welcome on this poc! Please note that this is not an official Wavestone product.",Object(n.jsx)("br",{}),"On this online resource management application, you'll be able to:"]}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:"Edit your activity forecast"}),Object(n.jsx)("li",{children:"Share your personal and annual objectives"})]}),Object(n.jsx)("p",{children:"Others functionalities will come soon!"}),Object(n.jsx)("br",{})]})})})]})},pc=a(17),Oc=a(23),mc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6?arguments[6]:void 0;return function(){var i=Object(Kn.a)(Qn.a.mark((function i(l,o){var d,u,j,b,h,p;return Qn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,l({type:T}),d=o(),u=d.userLogin.userInfo,j={headers:{Authorization:"Bearer ".concat(u.token)}},b=c.toString(),r&&(b=b+"-"+r.toString()),i.next=8,Yn.a.get("/api/pxx/chart/availability?practice=".concat(e,"&start=").concat(t,"&end=").concat(a,"&skills=").concat(n,"&experience=").concat(b,"&filterMode=").concat(s),j);case 8:h=i.sent,p=h.data,l({type:A,payload:p}),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(0),l({type:L,payload:i.t0.response&&i.t0.response.data.message?i.t0.response.data.message:i.t0.message});case 16:case"end":return i.stop()}}),i,null,[[0,13]])})));return function(e,t){return i.apply(this,arguments)}}()},xc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"10",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"1";return function(){var r=Object(Kn.a)(Qn.a.mark((function r(s,i){var l,o,d,u,j;return Qn.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s({type:I}),l=i(),o=l.userLogin.userInfo,d={headers:{Authorization:"Bearer ".concat(o.token)}},r.next=6,Yn.a.get("/api/pxx?practice=".concat(e,"&month=").concat(t,"&keyword=").concat(a,"&pageSize=").concat(n,"&pageNumber=").concat(c),d);case 6:u=r.sent,j=u.data,s({type:D,payload:j}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),s({type:k,payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e,t){return r.apply(this,arguments)}}()},fc=function(e){var t=e.data,a=Object(i.b)(),r=Object(c.useState)(Number(t.prodDay)?Number(t.prodDay):0),s=Object(rc.a)(r,2),l=s[0],o=s[1],d=Object(c.useState)(Number(t.notProdDay)?Number(t.notProdDay):0),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(Number(t.leavingDay)?Number(t.leavingDay):0),x=Object(rc.a)(h,2),f=x[0],g=x[1],v=Object(c.useState)(Number(t.availableDay)?Number(t.availableDay):0),y=Object(rc.a)(v,2),S=y[0],E=y[1],C=Object(c.useState)(Number(t.prodDay)+Number(t.notProdDay)+Number(t.leavingDay)+Number(t.availableDay)),N=Object(rc.a)(C,1)[0],T=Object(c.useState)(!1),A=Object(rc.a)(T,2),L=A[0],_=A[1],I=new Date(Date.now());I.setDate(1),I=I.toISOString().substring(0,10);var D=!!t.month&&t.month.firstDay>=I;Object(c.useEffect)((function(){var e;L&&N>=l+j+f&&(E(N-(l+j+f)),a((e={_id:t._id,name:t.name,month:t.month._id,prodDay:l,notProdDay:j,leavingDay:f,availableDay:N-(l+j+f)},function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:p}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.put("/api/pxx",e,s);case 6:a({type:O}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:m,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}())),_(!1))}),[N,l,j,f,t]);var k=function(e){return e.match(/[0-9]{0,}[.,]$/i)?Number(e+"0"):Number(e)};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(ac.a,{className:"py-1",children:[Object(n.jsxs)(nc.a,{xs:4,className:"text-center align-middle",children:[Object(n.jsx)("b",{children:t.month?t.month.name:"Not created Yeat"})," ",Object(n.jsx)("i",{children:N?"(".concat(N,"d)"):null})]}),Object(n.jsx)(nc.a,{xs:2,className:"text-center align-middle px-1",children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(sc.a.Control,{type:"number",min:0,max:N-j-f?N-j-f:"-",step:.5,placeholder:"-",disabled:!D||!N,className:"align-middle text-center p-0",value:l&&l.toString(),onChange:function(e){e.target.value.match(/^[0-9]{0,}[.,][05]{0,1}$|^[0-9]{0,}$/i)&&(o(k(e.target.value)),_(!0))}})})}),Object(n.jsx)(nc.a,{xs:2,className:"text-center align-middle px-1",children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(sc.a.Control,{type:"number",min:0,max:N-l-f?N-l-f:"-",step:.5,placeholder:"-",disabled:!D||!N,className:"align-middle text-center p-0",value:j&&j.toString(),onChange:function(e){e.target.value.toString().match(/[0-9]*[,.]$/g)||(b(k(e.target.value)),_(!0))}})})}),Object(n.jsx)(nc.a,{xs:2,className:"text-center align-middle px-1",children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(sc.a.Control,{type:"number",min:0,max:N-l-j?N-l-j:"-",step:.5,placeholder:"-",disabled:!D||!N,className:"align-middle text-center p-0",value:f&&f.toString(),onChange:function(e){g(k(e.target.value)),_(!0)}})})}),Object(n.jsx)(nc.a,{xs:2,className:"text-center align-middle px-1",children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"-",className:"align-middle text-center p-0",value:S&&S.toString(),disabled:!0})})})]})})},gc=function(e){var t=e.consultantsMy,a=e.consultantFocus,r=e.searchDate,s=e.navigationMonthHandler,l=Object(i.b)(),o=Object(c.useState)(5),d=Object(rc.a)(o,1)[0],h=Object(i.c)((function(e){return e.pxxMyToEdit})),p=h.loading,O=h.error,m=h.pxx,x=Object(i.c)((function(e){return e.pxxUpdate})),f=x.loading,g=x.error,v=t[a]._id;return Object(c.useEffect)((function(){l(function(e,t,a){return function(){var n=Object(Kn.a)(Qn.a.mark((function n(c,r){var s,i,l,o,d,h;return Qn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:u}),s=r(),i=s.userLogin.userInfo,l={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(i.token)}},t.setUTCDate(1),o=t.toISOString().substring(0,10),n.next=8,Yn.a.get("/api/pxx/edit?consultantId=".concat(e,"&month=").concat(o,"&numberOfMonth=").concat(a),l);case 8:d=n.sent,h=d.data,c({type:j,payload:h}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),c({type:b,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e,t){return n.apply(this,arguments)}}()}(v,r,d))}),[l,r,d,v]),Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{xs:4,className:"text-center align-middle",children:Object(n.jsxs)(ic.a,{className:"btn btn-primary mt-3",variant:"primary",size:"sm",onClick:function(){return s(-1)},style:{width:"8em"},children:[Object(n.jsx)("i",{className:"fas fa-caret-up"}),"  Previous"]})})}),Object(n.jsxs)(ac.a,{children:[Object(n.jsxs)(nc.a,{xs:4,className:"text-center align-middle px-1 pb-2",style:{height:"2em"},children:[" ",f&&Object(n.jsx)(jc,{})]}),Object(n.jsx)(nc.a,{xs:2,className:"text-center align-middle px-1 pb-2",children:Object(n.jsx)("strong",{children:"Prd"})}),Object(n.jsx)(nc.a,{xs:2,className:"text-center align-middle px-1 pb-2",children:Object(n.jsx)("strong",{children:"NPrd"})}),Object(n.jsx)(nc.a,{xs:2,className:"text-center align-middle px-1 pb-2",children:Object(n.jsx)("strong",{children:"Hld"})}),Object(n.jsx)(nc.a,{xs:2,className:"text-center align-middle px-1 pb-2",children:Object(n.jsx)("strong",{children:"Avlb"})})]}),p?Object(n.jsx)(jc,{}):O?Object(n.jsx)(dc,{variant:"danger",children:O}):m.map((function(e,t){return Object(n.jsx)(fc,{data:e},t)})),g&&Object(n.jsx)(ac.a,{children:Object(n.jsx)(dc,{variant:"danger",children:g})}),Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{xs:4,className:"text-center align-middle",children:Object(n.jsxs)(ic.a,{className:"btn btn-primary mt-3",variant:"primary",size:"sm",onClick:function(){return s(1)},style:{width:"8em"},children:["Next  ",Object(n.jsx)("i",{className:"fas fa-caret-down"})]})})})]})},vc=function(e){var t=e.children,a=e.title,r=e.close,s=Object(c.useState)(r),i=Object(rc.a)(s,2),l=i[0],o=i[1];return Object(n.jsx)(ac.a,{className:"mt-3",children:Object(n.jsxs)(nc.a,{children:[Object(n.jsxs)(ic.a,{onClick:function(){return o(!l)},variant:"light",className:"text-left",block:!0,children:[" ",Object(n.jsx)("h3",{children:l?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("i",{className:"fas fa-caret-down"})," ",a]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("i",{className:"fas fa-caret-up"})," ",a]})})]}),!l&&t]})})};vc.defaultProps={close:!0};var yc=vc,Sc=a(34),Ec=function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a){return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:_e,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Cc=function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:qe}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.get("/api/consultants/".concat(e),s);case 6:i=t.sent,l=i.data,a({type:Ge,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:ze,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},Nc=function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ve}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.put("/api/consultants/".concat(e._id),e,s);case 6:if(i=t.sent,i.data){t.next=10;break}throw new Error("Error: your modification is not saved");case 10:a({type:Ye}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:We,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()},Tc=function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:st}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.get("/api/consultants/cdm/".concat(e),s);case 6:i=t.sent,l=i.data,a({type:it,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:lt,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},Ac=function(){return function(){var e=Object(Kn.a)(Qn.a.mark((function e(t,a){var n,c,r,s,i;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:dt}),n=a(),c=n.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,Yn.a.get("/api/consultants/practicelist",r);case 6:s=e.sent,i=s.data,t({type:ut,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:jt,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()},Lc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"15";return function(){var n=Object(Kn.a)(Qn.a.mark((function n(c,r){var s,i,l,o,d;return Qn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:De}),s=r(),i=s.userLogin.userInfo,l={headers:{Authorization:"Bearer ".concat(i.token)}},n.next=6,Yn.a.get("/api/consultants/admin/consultants?keyword=".concat(e,"&pageNumber=").concat(t,"&pageSize=").concat(a),l);case 6:o=n.sent,d=o.data,c({type:ke,payload:d}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),c({type:we,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},_c=function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:yt}),c=n(),r=c.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.get("/api/consultants/".concat(e,"/skill"),s);case 6:i=t.sent,l=i.data,a({type:St,payload:l.quality}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Et,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},Ic=function(){return function(){var e=Object(Kn.a)(Qn.a.mark((function e(t,a){var n,c,r,s,i;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Nt}),n=a(),c=n.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,Yn.a.get("/api/consultants/skills",r);case 6:s=e.sent,i=s.data,t({type:Tt,payload:i.skills}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:At,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()},Dc=function(e){var t=e.history,a=e.consultantsMy,c=e.focusActive,r=Object(i.b)();return Object(n.jsxs)(Sc.a,{responsive:!0,hover:!0,striped:!0,className:"mt-3",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-light",children:[Object(n.jsx)("th",{className:"align-middle text-dark",children:"Consultant name"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Matricule"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Valued"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Arrival"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Leaving"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Seniority"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Comment"}),Object(n.jsx)("th",{className:"align-middle text-dark"})]})}),Object(n.jsx)("tbody",{children:a.map((function(e,a){return Object(n.jsxs)("tr",{onClick:function(){return c&&r(Ec(a))},children:[Object(n.jsx)("td",{className:"align-middle",children:e.name}),Object(n.jsx)("td",{className:"align-middle",children:e.matricule}),Object(n.jsx)("td",{className:"align-middle",children:e.practice}),Object(n.jsx)("td",{className:"align-middle",children:e.valued?e.valued.substring(0,10):""}),Object(n.jsx)("td",{className:"align-middle",children:e.arrival?e.arrival.substring(0,10):""}),Object(n.jsx)("td",{className:"align-middle",children:e.leaving?e.leaving.substring(0,10):""}),Object(n.jsxs)("td",{className:"align-middle",children:[e.valued?((new Date(Date.now())-new Date(e.valued.substring(0,10)))/315576e5).toString().substring(0,4):0," years"]}),Object(n.jsx)("td",{className:"align-middle",children:e.comment}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(ic.a,{className:"btn btn-light p-1",onClick:function(){return function(e,a){c&&r(Ec(e)),t.push("/editconsultant/".concat(a))}(a,e._id)},children:Object(n.jsx)("i",{className:"fas fa-user-edit"})})})]},e._id)}))})]})},kc=a(268),wc=function(e){var t=e.title;return Object(n.jsx)(kc.a,{children:Object(n.jsx)("title",{children:t})})};wc.defaultProps={title:"Performance App"};var Uc=wc,Rc=a(30),Pc=function(e){var t=e.history,a=e.consultantId,r=e.displayedDeal,s=void 0===r?"":r,l=e.onNavigate,o=void 0===l?function(){return""}:l,d=Object(i.b)(),u=Object(i.c)((function(e){return e.consultantAllStaffs})),j=u.loading,b=u.staffings;return Object(c.useEffect)((function(){a&&d(function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:_t}),c=n(),r=c.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.get("/api/consultants/staffings?consultantId=".concat(e),s);case 6:i=t.sent,l=i.data,a({type:It,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Dt,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))}),[d,a]),Object(n.jsx)(ac.a,{children:Object(n.jsxs)(nc.a,{children:[j&&Object(n.jsx)(jc,{}),Object(n.jsxs)(Sc.a,{responsive:!0,hover:!0,striped:!0,className:"mt-3",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-light",children:[Object(n.jsx)("th",{className:"align-middle text-dark",children:"Company"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Title"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Probability"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Start"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Deal status"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Request status"}),Object(n.jsx)("th",{})]})}),Object(n.jsx)("tbody",{children:b&&b.map((function(e){return e._id.toString()!==s.toString()&&Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:e.company}),Object(n.jsx)("td",{className:"align-middle",children:e.title}),Object(n.jsx)("td",{className:"align-middle",children:e.mainPractice}),Object(n.jsxs)("td",{className:"align-middle",children:[e.probability," %"]}),Object(n.jsx)("td",{className:"align-middle",children:e.startDate.substring(0,10)}),Object(n.jsx)("td",{className:"align-middle",children:e.status}),Object(n.jsx)("td",{className:"align-middle",children:e.requestStatus}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(ic.a,{onClick:function(){t.push("/staffing/".concat(e._id)),o()},variant:"light",children:Object(n.jsx)("i",{className:"fas fa-edit"})})})]},e._id)}))})]})]})})},Mc=function(e,t){return function(){var a=Object(Kn.a)(Qn.a.mark((function a(n,c){var r,s,i;return Qn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:va}),r=c(),s=r.userLogin.userInfo,i={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},a.next=6,Yn.a.put("/api/deals/".concat(e),t,i);case 6:n({type:ya}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:Sa,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()},Fc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(){var c=Object(Kn.a)(Qn.a.mark((function c(r,s){var i,l,o,d,u;return Qn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,r({type:Ca}),i=s(),l=i.userLogin.userInfo,o={headers:{Authorization:"Bearer ".concat(l.token)}},c.next=6,Yn.a.get("/api/deals?title=".concat(e.title,"&company=").concat(e.company,"&contact=").concat(e.contact,"&status=").concat(e.status,"&request=").concat(e.request,"&pageNumber=").concat(t,"&pageSize=").concat(a,"&state=").concat(n,"&filterMy=").concat(e.filterMy,"&staff=").concat(e.staff),o);case 6:d=c.sent,u=d.data,r({type:Na,payload:u}),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),r({type:Ta,payload:c.t0.response&&c.t0.response.data.message?c.t0.response.data.message:c.t0.message});case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e,t){return c.apply(this,arguments)}}()},qc=function(e){var t=e.history,a=e.consultantId,r=(e.displayedDeal,e.onNavigate),s=void 0===r?function(){return""}:r,l=Object(i.b)(),o=Object(i.c)((function(e){return e.dealOld})),d=o.loading,u=o.oldDeals;return Object(c.useEffect)((function(){a&&l(function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Pa}),c=n(),r=c.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.get("/api/deals/old?consultantId=".concat(e),s);case 6:i=t.sent,l=i.data,a({type:Ma,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Fa,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))}),[l,a]),Object(n.jsx)(ac.a,{children:Object(n.jsxs)(nc.a,{children:[d&&Object(n.jsx)(jc,{}),Object(n.jsxs)(Sc.a,{responsive:!0,hover:!0,striped:!0,className:"mt-3",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-light",children:[Object(n.jsx)("th",{className:"align-middle text-dark",children:"Company"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Title"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Probability"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Start"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Deal status"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Request status"}),Object(n.jsx)("th",{})]})}),Object(n.jsx)("tbody",{children:u&&u.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:e.company}),Object(n.jsx)("td",{className:"align-middle",children:e.title}),Object(n.jsx)("td",{className:"align-middle",children:e.mainPractice}),Object(n.jsxs)("td",{className:"align-middle",children:[e.probability," %"]}),Object(n.jsx)("td",{className:"align-middle",children:e.startDate.substring(0,10)}),Object(n.jsx)("td",{className:"align-middle",children:e.status}),Object(n.jsx)("td",{className:"align-middle",children:e.staffingRequest.requestStatus}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(ic.a,{onClick:function(){t.push("/staffing/".concat(e._id)),s()},variant:"light",children:Object(n.jsx)("i",{className:"fas fa-edit"})})})]},e._id)}))})]})]})})},Gc=a(28),zc=a(63),Bc=a(79),Xc=function(e){var t=e.value,a=e.setValue,c=e.text,r=e.color,s=e.editable,i=Object(Gc.a)(new Array(Math.floor(t)).fill(1));for(t%1>=.5&&i.push(t%1);i.length<5;)i.push(0);return Object(n.jsx)(sc.a.Group,{className:"mb-0",children:Object(n.jsxs)(Oc.a,{children:[i&&i.map((function(e,t){return Object(n.jsx)("span",{children:Object(n.jsx)(ic.a,{className:"mx-0 px-0",variant:"ligth",onClick:function(){s&&a(e>=1?t:e>=.5?t+1:t+.5)},children:Object(n.jsx)("i",{style:{color:r},className:e>=1?"fas fa-star":e>=.5?"fas fa-star-half-alt":"far fa-star"})})},t)})),Object(n.jsx)("span",{children:c&&c})]})})};Xc.defaultProps={color:"#f8e825",text:"",editable:!0};var Hc=Xc,Qc=function(e){var t=e.consultantId,a=e.skill,r=e.val,s=e.setUpdate,l=e.editable,o=void 0===l||l,d=Object(i.b)(),u=Object(i.c)((function(e){return e.consultantUpdateSkill})).success,j=Object(i.c)((function(e){return e.consultantDeleteSkill})).success,b=Object(c.useState)(a.level),h=Object(rc.a)(b,2),p=h[0],O=h[1],m=Object(c.useState)(a.level),x=Object(rc.a)(m,2),f=x[0],g=x[1];Object(c.useEffect)((function(){j&&s(!0)}),[j,s]),Object(c.useEffect)((function(){u&&(O(f),d({type:Ht}))}),[d,u,f]);var v=function(e,t){d(function(e,t){return function(){var a=Object(Kn.a)(Qn.a.mark((function a(n,c){var r,s,i;return Qn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:Mt}),r=c(),s=r.userLogin.userInfo,i={headers:{Authorization:"Bearer ".concat(s.token)}},a.next=6,Yn.a.delete("/api/consultants/".concat(e,"/skill/").concat(t),i);case 6:n({type:Ft}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:qt,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()}(e,t))};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(sc.a.Row,{children:[Object(n.jsx)(nc.a,{xs:3,children:Object(n.jsx)(sc.a.Group,{controlId:"skillName",className:"mb-0",children:Object(n.jsx)(sc.a.Control,{plaintext:!0,readOnly:!0,value:a.skill&&a.skill.name})})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(Hc,{value:Number(p),setValue:function(e){d(function(e,t,a){return function(){var n=Object(Kn.a)(Qn.a.mark((function n(c,r){var s,i,l;return Qn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:zt}),s=r(),i=s.userLogin.userInfo,l={headers:{Authorization:"Bearer ".concat(i.token)}},n.next=6,Yn.a.put("/api/consultants/".concat(e,"/skill/").concat(t),{level:a},l);case 6:c({type:Bt}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),c({type:Xt,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()}(t,a.skill._id,e)),g(e)},editable:o})}),Object(n.jsx)(nc.a,{children:o&&Object(n.jsx)(sc.a.Group,{className:"mb-0",children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(ic.a,{variant:"secondary",size:"sm",onClick:function(){return v(t,a.skill._id)},children:Object(n.jsx)("i",{className:"fas fa-times-circle"})})})})})]},r)})},Kc=function(e){var t=e.consultantId,a=e.close,r=void 0===a||a,s=e.editable,l=void 0===s||s,o=Object(i.b)(),d=Object(c.useState)("default"),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)("default"),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)(1),f=Object(rc.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)([]),S=Object(rc.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)([]),T=Object(rc.a)(N,2),A=T[0],L=T[1],_=Object(c.useState)(!1),I=Object(rc.a)(_,2),D=I[0],k=I[1],w=Object(i.c)((function(e){return e.consultantAllSkills})).skills,U=Object(i.c)((function(e){return e.consultantSkills})),R=U.loading,P=U.skills,M=Object(i.c)((function(e){return e.consultantAddSkill})),F=M.loading,q=M.success,G=M.error;Object(c.useEffect)((function(){w||o(Ic())}),[o,w]),Object(c.useEffect)((function(){o(_c(t))}),[o,t]),Object(c.useEffect)((function(){if(P){var e=z(P);L(e)}}),[o,P,t]),Object(c.useEffect)((function(){D&&!R&&(o(_c(t)),k(!1))}),[o,D,t,R]),Object(c.useEffect)((function(){if(w){var e=w.map((function(e){return e.category}));e=Object(Gc.a)(new Set(e)),C(e)}}),[w]),Object(c.useEffect)((function(){q&&k(!0)}),[q]);var z=function(e){for(var t=Object(Gc.a)(new Set(e.map((function(e){return e.skill.category})))),a=[],n=function(n){a.push({category:t[n],data:e.filter((function(e){return e.skill.category===t[n]}))})},c=0;c<t.length;c++)n(c);return a},B=function(e,t,a){o(function(e,t,a){return function(){var n=Object(Kn.a)(Qn.a.mark((function n(c,r){var s,i,l,o;return Qn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s={skill:t,level:a},c({type:wt}),i=r(),l=i.userLogin.userInfo,o={headers:{Authorization:"Bearer ".concat(l.token)}},n.next=7,Yn.a.put("/api/consultants/".concat(e,"/skill"),s,o);case 7:c({type:Ut}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),c({type:Rt,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()}(e,t,a))};return Object(n.jsxs)(yc,{title:"Skills",close:r,children:[l&&Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsx)("h4",{children:"Add skills"}),Object(n.jsxs)(sc.a.Row,{className:"mt-3 align-items-end",children:[Object(n.jsx)(nc.a,{xs:12,md:3,children:Object(n.jsxs)(sc.a.Group,{controlId:"skillCategory",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("strong",{children:"Category"})}),Object(n.jsxs)(sc.a.Control,{as:"select",value:j||"default",onChange:function(e){return b(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"default",children:"Please Select"}),E&&E.map((function(e,t){return Object(n.jsx)("option",{value:e,children:e},t)}))]})]})}),Object(n.jsx)(nc.a,{xs:12,md:3,children:Object(n.jsxs)(sc.a.Group,{controlId:"skillName",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("strong",{children:"Skill"})}),Object(n.jsx)(zc.a,{placement:"top",overlay:Object(n.jsx)(Bc.a,{id:"button-tooltip-2",children:O&&w?w.map((function(e){return e._id===O&&e.description})):"no description"}),children:Object(n.jsxs)(sc.a.Control,{as:"select",value:O||"default",onChange:function(e){return m(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"default",children:"Please Select"}),w&&j&&w.map((function(e,t){return e.category===j&&Object(n.jsx)("option",{value:e._id,children:e.name},t)}))]})})]})}),Object(n.jsx)(nc.a,{xs:12,md:3,children:Object(n.jsxs)(sc.a.Group,{controlId:"skillLevel",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("strong",{children:"Level"})}),Object(n.jsx)(sc.a.Control,{type:"number",min:0,max:5,step:.5,value:g||1,onChange:function(e){return v(e.target.value)},required:!0})]})}),Object(n.jsx)(nc.a,{xs:12,md:3,className:"align-items-bottom",children:Object(n.jsx)(sc.a.Group,{children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(ic.a,{block:!0,onClick:function(){return B(t,O,g)},children:F?Object(n.jsx)(jc,{}):"Add"})})})})]}),G&&Object(n.jsx)(dc,{variant:"danger",children:G})]}),Object(n.jsx)(pc.a.Item,{children:A&&A.length?Object(n.jsx)(pc.a,{variant:"flush",children:A.map((function(e,a){return Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsx)("h4",{children:e.category}),e.data.map((function(e,a){return Object(n.jsx)(Qc,{consultantId:t,skill:e,val:a,setUpdate:k,editable:l},a)}))]},a)}))}):Object(n.jsx)("p",{children:"Please add quality"})})]})},Vc=function(e){var t=e.history,a=Object(i.b)(),r=Object(c.useState)(""),s=Object(rc.a)(r,2),l=s[0],o=s[1],d=Object(c.useState)(""),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(""),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)(""),f=Object(rc.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)(!1),S=Object(rc.a)(y,2),E=S[0],C=S[1],N=Object(i.c)((function(e){return e.userLogin})).userInfo,T=Object(i.c)((function(e){return e.consultantsMyList})),A=T.loading,L=T.error,_=T.consultantsMy,I=T.focus,D=Object(c.useState)(new Date(Date.now())),k=Object(rc.a)(D,2),w=k[0],U=k[1];Object(c.useEffect)((function(){N||t.push("/login")}),[t,N]),Object(c.useEffect)((function(){a(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Te}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.get("/api/consultants?option=".concat(e),s);case 6:i=t.sent,l=i.data,a({type:Ae,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Le,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(E?"delegate":""))}),[a,I,E]),Object(c.useEffect)((function(){_&&(o(_[I].comment),b(_[I].talentReviewObjectives),v(_[I].notProdComment),m(_[I].availabilityComment))}),[_,I]);var R=function(e){I+e>=0&&I+e<_.length&&a(Ec(I+e))},P=function(e,t){a(function(e,t){return function(){var a=Object(Kn.a)(Qn.a.mark((function a(n,c){var r,s,i;return Qn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:ht}),r=c(),s=r.userLogin.userInfo,i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},a.next=6,Yn.a.put("/api/consultants/comment/".concat(e),{commentText:t},i);case 6:n({type:pt}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:Ot,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()}(e,t))};return Object(n.jsxs)(qn.a,{children:[Object(n.jsx)(Uc,{}),A?Object(n.jsx)(jc,{}):L?Object(n.jsx)(dc,{variant:"danger",children:L}):_&&0!==_.length?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"border-bottom p-3",children:[Object(n.jsxs)(ac.a,{children:[Object(n.jsx)(nc.a,{className:"text-center",xs:2,children:Object(n.jsx)(ic.a,{variant:"primary",size:"sm",onClick:function(){return R(-1)},disabled:0===I,children:Object(n.jsx)("i",{className:"fas fa-caret-left"})})}),Object(n.jsx)(nc.a,{className:"text-center",xs:8,children:Object(n.jsx)(Gn.LinkContainer,{to:"/editconsultant/".concat(_[I]._id),children:Object(n.jsx)(Bn.a.Link,{children:Object(n.jsxs)("h4",{children:[_[I].name," ",Object(n.jsxs)("i",{children:["(",_[I].matricule,")"]})]})})})}),Object(n.jsx)(nc.a,{className:"text-center",xs:2,children:Object(n.jsx)(ic.a,{variant:"primary",size:"sm",onClick:function(){return R(1)},disabled:I===_.length-1,children:Object(n.jsx)("i",{className:"fas fa-caret-right"})})})]}),Object(n.jsxs)(ac.a,{className:"mt-3",children:[Object(n.jsx)(nc.a,{xs:12,md:4,children:Object(n.jsx)(pc.a,{children:Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsxs)(ac.a,{className:"my-3",children:[Object(n.jsxs)(nc.a,{className:"text-left",children:[Object(n.jsx)("b",{children:"Arrival:"})," ",_[I].arrival&&_[I].arrival.substring(0,10)]}),Object(n.jsxs)(nc.a,{className:"text-left",children:[Object(n.jsx)("b",{children:"Valued:"})," ",_[I].valued&&_[I].valued.substring(0,10)]}),Object(n.jsxs)(nc.a,{className:"text-left",children:[Object(n.jsx)("b",{children:"Leaving:"})," ",_[I].leaving&&_[I].leaving.substring(0,10)]})]}),Object(n.jsx)(ac.a,{className:"my-3",children:Object(n.jsxs)(nc.a,{children:[Object(n.jsx)("b",{children:"Seniority:"})," ",((new Date(Date.now())-new Date(_[I].arrival.substring(0,10)))/315576e5).toString().substring(0,4)," years"]})}),Object(n.jsx)(ac.a,{className:"my-3",children:Object(n.jsx)(nc.a,{children:!(_[I]._id===N.consultantProfil._id)&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("label",{htmlFor:"comment",children:Object(n.jsx)("strong",{children:"Staffing comment"})}),Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{as:"textarea",size:"sm",rows:7,id:"comment",value:l,placeholder:"Please enter a comment",onChange:function(e){o(e.target.value),P(_[I]._id,e.target.value)}})})]})})})]})})}),Object(n.jsx)(nc.a,{xs:12,md:8,children:Object(n.jsx)(gc,{consultantsMy:_,consultantFocus:I,searchDate:w,navigationMonthHandler:function(e){var t=new Date(w);t.setMonth(t.getMonth()+e),U(t)}})})]})]}),Object(n.jsx)("div",{className:"border-bottom p-3",children:Object(n.jsxs)(ac.a,{children:[Object(n.jsxs)(nc.a,{xs:12,md:4,children:[Object(n.jsx)("label",{htmlFor:"annual-objectives",children:Object(n.jsx)("strong",{children:"Annual objectives"})}),Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{as:"textarea",size:"sm",rows:3,id:"annual-objectives",value:j,placeholder:"Please complete with your CDM",onChange:function(e){b(e.target.value),a(Nc(Object(Ne.a)(Object(Ne.a)({},_[I]),{},{talentReviewObjectives:e.target.value,notProdComment:g,availabilityComment:O})))}})})]}),Object(n.jsxs)(nc.a,{xs:12,md:4,children:[Object(n.jsx)("label",{htmlFor:"not-prod-comment",children:Object(n.jsx)("strong",{children:"Not production justification"})}),Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{as:"textarea",size:"sm",rows:3,id:"not-prod-comment",value:g,placeholder:"Please justify not production time. For example:\n- 3d-june: inter-contrat\n- 1d/Week: business\n- etc.",onChange:function(e){v(e.target.value),a(Nc(Object(Ne.a)(Object(Ne.a)({},_[I]),{},{talentReviewObjectives:j,notProdComment:e.target.value,availabilityComment:O})))}})})]}),Object(n.jsxs)(nc.a,{xs:12,md:4,children:[Object(n.jsx)("label",{htmlFor:"availability-comment",children:Object(n.jsx)("strong",{children:"Availability comment"})}),Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{as:"textarea",size:"sm",rows:3,id:"availability-comment",value:O,placeholder:"Please share any information on your availability. For example: end of mission the 23th of October > 2d/5 available",onChange:function(e){m(e.target.value),a(Nc(Object(Ne.a)(Object(Ne.a)({},_[I]),{},{talentReviewObjectives:j,notProdComment:g,availabilityComment:e.target.value})))}})})]})]})}),Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(ec,{access:"viewStaffings",children:Object(n.jsx)(yc,{title:"Staffings on track",close:!1,children:Object(n.jsx)(Pc,{history:t,consultantId:_[I]._id})})})})}),Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(yc,{title:"Old staffings",close:!0,children:Object(n.jsx)(qc,{history:t,consultantId:_[I]._id})})})}),Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(ec,{access:"viewSkills",children:Object(n.jsx)(Kc,{consultantId:_[I]._id})})})}),Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(ec,{access:"viewOthersConsultants",children:Object(n.jsxs)(yc,{title:"Others consultants",close:!1,children:[Object(n.jsx)(sc.a.Group,{controlId:"switch-only-available",className:"mt-3",children:Object(n.jsx)(sc.a.Check,{type:"switch",id:"switch-delegation",label:"View delegation",checked:E,onChange:function(e){!0===e.target.checked?C(!0):C(!1)}})}),Object(n.jsx)(Dc,{consultantsMy:_,history:t,focusActive:!0})]})})})})]}):Object(n.jsx)(dc,{variant:"info",children:"You don't have consultant to edit yet"})]})},Yc=function(e){var t=e.history,a=e.match,r=Object(i.b)(),s=Object(c.useState)(""),l=Object(rc.a)(s,2),o=l[0],d=l[1],u=Object(c.useState)(""),j=Object(rc.a)(u,2),b=j[0],h=j[1],p=Object(c.useState)(""),O=Object(rc.a)(p,2),m=O[0],x=O[1],f=Object(c.useState)(""),g=Object(rc.a)(f,2),v=g[0],y=g[1],S=Object(c.useState)("Analyst"),E=Object(rc.a)(S,2),C=E[0],N=E[1],T=Object(c.useState)(null),A=Object(rc.a)(T,2),L=A[0],_=A[1],I=Object(c.useState)(""),D=Object(rc.a)(I,2),k=D[0],w=D[1],U=Object(c.useState)(""),R=Object(rc.a)(U,2),P=R[0],M=R[1],F=Object(c.useState)(""),q=Object(rc.a)(F,2),G=q[0],z=q[1],B=Object(c.useState)(""),X=Object(rc.a)(B,2),H=X[0],Q=X[1],K=Object(c.useState)(!1),V=Object(rc.a)(K,2),Y=V[0],W=V[1],J=Object(c.useState)(!1),Z=Object(rc.a)(J,2),$=Z[0],ee=Z[1],te=Object(c.useState)(""),ae=Object(rc.a)(te,2),ne=ae[0],ce=ae[1],re=Object(c.useState)(""),se=Object(rc.a)(re,2),ie=se[0],le=se[1],oe=Object(c.useState)(1),de=Object(rc.a)(oe,2),ue=de[0],je=de[1],be=Object(c.useState)(1),he=Object(rc.a)(be,2),pe=he[0],Oe=he[1],me=Object(c.useState)(1),xe=Object(rc.a)(me,2),fe=xe[0],ge=xe[1],ve=Object(c.useState)(1),ye=Object(rc.a)(ve,2),Se=ye[0],Ee=ye[1],Ce=Object(c.useState)(1),Te=Object(rc.a)(Ce,2),Ae=Te[0],Le=Te[1],_e=Object(c.useState)(""),Ie=Object(rc.a)(_e,2),De=Ie[0],ke=Ie[1],we=Object(c.useState)(""),Ue=Object(rc.a)(we,2),Re=Ue[0],Pe=Ue[1],Me=Object(c.useState)(!1),Fe=Object(rc.a)(Me,2),qe=Fe[0],Ge=Fe[1],ze=a.params.id?"edit":"create",Be=Object(i.c)((function(e){return e.userLogin})).userInfo,Xe=Object(i.c)((function(e){return e.consultantMy})),He=Xe.loading,Qe=Xe.error,Ke=Xe.consultant,Ve=Object(i.c)((function(e){return e.consultantMyUpdate})),Ye=Ve.loading,We=Ve.error,at=Ve.success,nt=Object(i.c)((function(e){return e.consultantCreate})),ct=nt.loading,rt=nt.error,st=nt.success,it=nt.consultantCreated,lt=Object(i.c)((function(e){return e.consultantCDMList})),ot=lt.error,dt=lt.cdmList,ut=Object(i.c)((function(e){return e.consultantPracticeList})),jt=ut.error,bt=ut.practiceList;Object(c.useEffect)((function(){Be||t.push("/login")}),[t,Be]),Object(c.useEffect)((function(){a.params.id&&(Ke||r(Cc(a.params.id)))}),[r,a,Ke]),Object(c.useEffect)((function(){a.params.id&&Ke&&Ke._id!==a.params.id&&r(Cc(a.params.id))}),[r,a,Ke]),Object(c.useEffect)((function(){qe&&(r(Cc(a.params.id)),Ge(!1))}),[r,qe,a]),Object(c.useEffect)((function(){a.params.id&&at&&Ge(!0)}),[a,at]),Object(c.useEffect)((function(){bt||r(Ac())}),[r,Be,bt]),Object(c.useEffect)((function(){v&&r(Tc(v))}),[r,v]),Object(c.useEffect)((function(){a.params.id&&Ke&&(d(Ke.name),h(Ke.email),x(Ke.matricule),y(Ke.practice),N(Ke.grade),_(Ke.cdmId?Ke.cdmId:""),w(Ke.arrival.substring(0,10)),M(Ke.valued?Ke.valued.substring(0,10):""),z(Ke.leaving?Ke.leaving.substring(0,10):""),Q(((new Date(Date.now())-new Date(Ke.arrival.substring(0,10)))/315576e5).toString().substring(0,4)),W(Ke.isCDM||!1),ee(Ke.isPartialTime.value),ce(!!Ke.isPartialTime.start.substring(0,10)&&Ke.isPartialTime.start.substring(0,10)),le(!!Ke.isPartialTime.end.substring(0,10)&&Ke.isPartialTime.end.substring(0,10)),je(Ke.isPartialTime.week.filter((function(e){return 1===e.num}))[0].worked),Oe(Ke.isPartialTime.week.filter((function(e){return 2===e.num}))[0].worked),ge(Ke.isPartialTime.week.filter((function(e){return 3===e.num}))[0].worked),Ee(Ke.isPartialTime.week.filter((function(e){return 4===e.num}))[0].worked),Le(Ke.isPartialTime.week.filter((function(e){return 5===e.num}))[0].worked))}),[a,Ke,ze]),Object(c.useEffect)((function(){!v&&Be&&bt&&y(bt[0])}),[Be,v,bt,L,dt]),Object(c.useEffect)((function(){We&&(ke({message:We,type:"danger"}),r({type:Je})),at&&(Pe({message:"Consultant updated",type:"success"}),r({type:Je})),rt&&(ke({message:rt,type:"danger"}),r({type:tt})),st&&(Pe({message:"Consultant created",type:"success"}),t.push("/editconsultant/".concat(it._id)),r({type:tt}))}),[r,t,We,at,st,rt,it]);return Object(n.jsxs)(n.Fragment,{children:[Qe&&Object(n.jsx)(dc,{variant:"danger",children:Qe}),De&&Object(n.jsx)(dc,{variant:"danger",children:De.message}),ot&&Object(n.jsx)(dc,{variant:"danger",children:ot}),jt&&Object(n.jsx)(dc,{variant:"danger",children:jt}),He&&Object(n.jsx)(jc,{}),Object(n.jsx)(ic.a,{className:"mb-3",onClick:function(){return t.go(-1),ke(""),void Pe("")},children:"Go Back"}),Object(n.jsx)(ec,{access:"editConsultantProfil",children:Object(n.jsx)(qn.a,{children:Object(n.jsx)(ac.a,{className:"justify-content-md-center",children:Object(n.jsx)(nc.a,{xs:12,md:8,children:Object(n.jsxs)(sc.a,{onSubmit:function(e){if(e.preventDefault(),"edit"===ze){var t=Object(Ne.a)(Object(Ne.a)({},Ke),{},{name:o,matricule:m,arrival:new Date(k),valued:new Date(P),leaving:G?new Date(G):null,isCDM:Y,grade:C,cdmId:L,isPartialTime:{value:$,start:$?ne:"",end:$?ie:"",week:[{num:1,worked:$?ue:1},{num:2,worked:$?pe:1},{num:3,worked:$?fe:1},{num:4,worked:$?Se:1},{num:5,worked:$?Ae:1}]}});r(Nc(t))}"create"===ze&&r(function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ze}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.post("/api/consultants",e,s);case 6:i=t.sent,l=i.data,a({type:$e,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:et,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}({name:o,email:b,matricule:m,arrival:k,valued:P,leaving:G,practice:v,isCDM:Y,grade:C,cdmId:L,isPartialTime:{value:$,start:ne,end:ie,week:[{num:1,worked:ue},{num:2,worked:pe},{num:3,worked:fe},{num:4,worked:Se},{num:5,worked:Ae}]}}))},children:[Object(n.jsx)("h2",{children:o&&o}),Object(n.jsx)(yc,{title:"Personal",close:"create"!==ze,children:Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsx)(sc.a.Row,{children:Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"name",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Name"})}),Object(n.jsx)(sc.a.Control,{type:"name",placeholder:"Enter Name",value:o&&o,onChange:function(e){return d(e.target.value)},required:!0})]})})}),Object(n.jsxs)(sc.a.Row,{children:[Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"matricule",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Matricule"})}),Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"Enter Matricule",value:m&&m,onChange:function(e){return x(e.target.value)},required:!0})]})}),Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"seniority",children:[Object(n.jsxs)(sc.a.Label,{children:[Object(n.jsx)("b",{children:"Seniority"})," ",Object(n.jsx)("i",{children:"(years)"})]}),Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"-",value:H&&H,readOnly:!0})]})})]}),Object(n.jsx)(sc.a.Row,{children:Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"email",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Email Address"})}),Object(n.jsx)(sc.a.Control,{type:"email",placeholder:"Enter email",value:b&&b,onChange:function(e){return h(e.target.value)},required:!0})]})})})]})}),Ke&&"create"!==ze&&Object(n.jsx)(Kc,{consultantId:Ke._id}),Object(n.jsx)(yc,{title:"Profil",close:!1,children:Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsx)(sc.a.Row,{children:Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"practice",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Practice"})}),Object(n.jsx)(Oc.a,{children:Object(n.jsx)(sc.a.Control,{as:"select",value:v||(Be?Be.consultantProfil.practice:""),onChange:function(e){y(e.target.value)},required:!0,children:bt?jt?Object(n.jsx)(dc,{variant:"Danger",children:"No Practice found"}):bt.map((function(e){return Object(n.jsx)("option",{value:e,disabled:"-"===e,children:e},e)})):Object(n.jsx)("option",{value:v&&v,children:v})})})]})})}),Object(n.jsx)(sc.a.Row,{children:Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"grade",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Grade"})}),Object(n.jsx)(sc.a.Control,{as:"select",placeholder:"Enter grade",value:C&&C,onChange:function(e){return N(e.target.value)},required:!0,children:ca.map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}))})]})})}),Object(n.jsx)(sc.a.Row,{children:Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"cdm",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"CDM"})}),Object(n.jsxs)(sc.a.Control,{as:"select",value:L||"default",onChange:function(e){return _(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"default",children:"Please Select"}),dt?ot?Object(n.jsx)(dc,{variant:"danger",children:"No CDM found, please verify Practice"}):dt.length&&dt.map((function(e){return Object(n.jsx)("option",{value:e._id,children:e.name},e._id)})):"No cdm"]})]})})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsxs)(sc.a.Row,{children:[Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"valued",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Valued date"})}),Object(n.jsx)(sc.a.Control,{type:"date",value:P&&P,onChange:function(e){return function(e){M(e.substring(0,10)),Q(((new Date(Date.now())-new Date(e.substring(0,10)))/315576e5).toString().substring(0,4))}(e.target.value)},required:!0})]})}),Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"arrival",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Arrival date"})}),Object(n.jsx)(sc.a.Control,{type:"date",value:k&&k,min:P,onChange:function(e){w(e.target.value)},required:!0})]})}),Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"leaving",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Leaving date"})}),Object(n.jsx)(sc.a.Control,{type:"date",value:G&&G,min:k,onChange:function(e){return z(e.target.value)}})]})})]})}),Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsxs)(sc.a.Row,{children:[Object(n.jsx)(nc.a,{children:Object(n.jsx)(sc.a.Group,{controlId:"partialtime",children:Object(n.jsx)(sc.a.Check,{type:"checkbox",label:"Partial time",checked:!!$,onChange:function(e){ee(e.target.checked)}})})}),$&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"startpartialtime",children:[Object(n.jsx)(sc.a.Label,{children:"Start"}),Object(n.jsx)(sc.a.Control,{type:"Date",min:k&&k,value:ne&&ne,onChange:function(e){ce(e.target.value.substring(0,10)),!ie&&le(e.target.value.substring(0,10)),ie<e.target.value.substring(0,10)&&le(e.target.value.substring(0,10))},required:!0})]})}),Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"endpartialtime",children:[Object(n.jsx)(sc.a.Label,{children:"End"}),Object(n.jsx)(sc.a.Control,{type:"Date",value:ie&&ie,min:ne||"",onChange:function(e){le(e.target.value.substring(0,10))},required:!0})]})})]})]}),$&&Object(n.jsxs)(sc.a.Row,{children:[Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"monday",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Monday"})}),Object(n.jsx)(sc.a.Control,{type:"Number",min:0,max:1,step:.5,value:Number(ue),onChange:function(e){return je(e.target.value)}})]})}),Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"tuesday",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Tuesday"})}),Object(n.jsx)(sc.a.Control,{type:"Number",min:0,max:1,step:.5,value:Number(pe),onChange:function(e){return Oe(e.target.value)}})]})}),Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"wendnesday",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Wendnesday"})}),Object(n.jsx)(sc.a.Control,{type:"Number",min:0,max:1,step:.5,value:Number(fe),onChange:function(e){return ge(e.target.value)}})]})}),Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"thursday",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Thursday"})}),Object(n.jsx)(sc.a.Control,{type:"Number",min:0,max:1,step:.5,value:Number(Se),onChange:function(e){return Ee(e.target.value)}})]})}),Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a.Group,{controlId:"friday",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Friday"})}),Object(n.jsx)(sc.a.Control,{type:"Number",min:0,max:1,step:.5,value:Number(Ae),onChange:function(e){return Le(e.target.value)}})]})})]})]}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(sc.a.Row,{children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(sc.a.Group,{controlId:"iscdm",children:Object(n.jsx)(sc.a.Check,{type:"checkbox",label:"Is CDM",checked:!!Y,onChange:function(e){W(e.target.checked)}})})})})})]})}),Object(n.jsx)(sc.a.Row,{className:"pt-3",children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(ic.a,{type:"submit",variant:"primary",block:!0,disabled:!o||!b||!m||!v||!P||!k,children:Ye||ct?Object(n.jsx)(jc,{}):"create"===ze?"Create":"Update"})})}),Object(n.jsx)(sc.a.Row,{children:Object(n.jsx)(nc.a,{children:Re&&Object(n.jsx)(dc,{variant:"success",children:Object(n.jsx)("i",{className:"fas fa-check-circle",children:"  Your information is correctly registered"})})})})]})})})})})]})},Wc=a(74),Jc=function(e){var t=e.setImportData,a=e.sheets,r=void 0===a?"all":a,s=Object(c.useState)(""),i=Object(rc.a)(s,2),l=i[0],o=i[1],d=function(){var e=Object(Kn.a)(Qn.a.mark((function e(a){var n,c;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.target.files[0],(c=new FileReader).onload=function(e){for(var a=e.target.result,c=Wc.read(a,{type:"binary"}),s=[],i=0;i<c.SheetNames.length;i++){var l=c.SheetNames[i],d=c.Sheets[l];s.push(Wc.utils.sheet_to_json(d))}"1"===r&&t(s[0].map((function(e){return Object(Ne.a)(Object(Ne.a)({},e),{},{status:"not imported"})}))),"all"===r&&t(s),o(n.name)},c.readAsBinaryString(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(sc.a,{children:Object(n.jsxs)(sc.a.File,{id:"importData",custom:!0,children:[Object(n.jsx)(sc.a.File.Label,{"data-browse":"Upload",children:l||"  ...  "}),Object(n.jsx)(sc.a.File.Input,{onChange:function(e){return d(e)}})]})})},Zc=a(39),$c=a.n(Zc),er=a(26),tr=a(24),ar=a(271),nr=function(e){var t=Object(i.b)(),a=Object(c.useState)(0),r=Object(rc.a)(a,2),s=r[0],l=r[1],o=Object(i.c)((function(e){return e.consultantUploadWk})),d=o.loading,u=o.error,j=o.path,b=Object(i.c)((function(e){return e.consultantUpdateWk})),h=b.loading,p=b.error,O=b.message;return Object(n.jsxs)(tr.a,Object(Ne.a)(Object(Ne.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(n.jsx)(tr.a.Header,{closeButton:!0,children:Object(n.jsx)(ac.a,{className:"align-items-center",children:Object(n.jsx)(nc.a,{className:"text-center",children:Object(n.jsx)(tr.a.Title,{id:"contained-modal-title-vcenter",children:"Import consultants data from Wavekeeper"})})})}),Object(n.jsxs)(tr.a.Body,{children:[Object(n.jsxs)(ac.a,{className:"mb-3",children:[Object(n.jsx)(nc.a,{children:Object(n.jsx)(ic.a,{className:s>=0?"text-primary":"text-secondary",onClick:function(){return l(0)},variant:"ligth",disabled:s<0,children:Object(n.jsx)("strong",{children:"1-Guidelines"})})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(ic.a,{className:s>=1?"text-primary":"text-secondary",onClick:function(){return l(1)},variant:"ligth",disabled:s<1,children:Object(n.jsx)("strong",{children:"2-Upload in App"})})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(ic.a,{className:s>=2?"text-primary":"text-secondary",onClick:function(){return l(2)},variant:"ligth",disabled:s<2,children:Object(n.jsx)("strong",{children:"3-Start update"})})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(ic.a,{className:s>=3?"text-primary":"text-secondary",onClick:function(){return l(3)},variant:"ligth",disabled:s<3,children:Object(n.jsx)("strong",{children:"4-Result"})})})]}),Object(n.jsx)(ac.a,{className:"align-items-center",children:Object(n.jsxs)(nc.a,{children:[0===s&&Object(n.jsx)(ac.a,{children:Object(n.jsxs)(nc.a,{children:[Object(n.jsxs)("h4",{children:["Process to export from Wavekeeper ",Object(n.jsx)("a",{href:"https://wavekeeper.wavestone-app.com/web#action=534&model=hr.presence&view_type=list&cids=1&menu_id=92",target:"_blank",rel:"noopener noreferrer",children:"(link)"})]}),Object(n.jsx)("p",{children:"Please connect to Wavekeeper"}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:"Step 1: Go to collaborators"}),Object(n.jsx)("li",{children:"Step 2: Apply filter to keep only current consultants"}),Object(n.jsx)("li",{children:"Step 3: Select all lines and go to actions / export"}),Object(n.jsx)("li",{children:"Step 4: Select filter 'JPR_export_2'"}),Object(n.jsx)("li",{children:"Step 5: Save the Excel file on you desktop"})]}),Object(n.jsx)(ar.a,{src:"/images/WK_export_consultants_application_filtres.jpg",rounded:!0,fluid:!0})]})}),1===s&&Object(n.jsx)(ac.a,{className:"align-items-center",children:Object(n.jsxs)(nc.a,{className:"text-center",children:[Object(n.jsx)("h4",{children:"Upload your file here"}),d?Object(n.jsx)(jc,{}):Object(n.jsx)("input",{className:"my-3",type:"file",name:"hr.presence",onChange:function(e){var a,n=new FormData;n.append("file",e.target.files[0]),t((a=n,function(){var e=Object(Kn.a)(Qn.a.mark((function e(t,n){var c,r,s,i,l;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Wt}),c=n(),r=c.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(r.token)}},e.next=6,Yn.a.post("/api/upload/consultant",a,s);case 6:i=e.sent,l=i.data,t({type:Jt,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:Zt,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))}}),u&&Object(n.jsx)(dc,{variant:"danger",children:u})]})}),2===s&&(j?Object(n.jsx)(ac.a,{children:Object(n.jsxs)(nc.a,{className:"text-center",children:[Object(n.jsx)("h4",{children:"Do you want to update your consultants ?"}),h?Object(n.jsx)(jc,{}):Object(n.jsx)(ic.a,{variant:"primary",className:"m-3",onClick:function(){j&&t(function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:ea}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",responseType:"stream",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.put("/api/consultants/admin/wk",e,s);case 6:i=t.sent,l=i.data,a({type:ta,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:aa,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(j))},children:"Update"}),Object(n.jsx)("p",{children:"Process could take a few minute"}),p&&Object(n.jsx)(dc,{variant:"danger",children:p})]})}):Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:"Something wrong retry step 2"})})),3===s&&Object(n.jsx)(sc.a.Control,{as:"textarea",rows:10,value:O&&O,readOnly:!0})]})})]}),Object(n.jsxs)(tr.a.Footer,{children:[3===s&&Object(n.jsx)(ic.a,{onClick:e.onHide,children:"Close"}),s<3&&Object(n.jsx)(ic.a,{variant:"success",onClick:function(){return s+1<=3&&l(s+1)},disabled:3===s||1===s&&!j||2===s&&!O,children:"Next"})]})]}))},cr=$c.a.ExcelFile,rr=$c.a.ExcelFile.ExcelSheet,sr=$c.a.ExcelFile.ExcelColumn,ir=function(e){var t=e.history,a=(e.match,Object(i.b)()),r=Object(c.useState)(1e4),s=Object(rc.a)(r,2),l=s[0],o=s[1],d=Object(c.useState)(1),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(""),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)(""),f=Object(rc.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)([]),S=Object(rc.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(!1),T=Object(rc.a)(N,2),A=T[0],L=T[1],_=Object(i.c)((function(e){return e.userLogin})).userInfo,I=Object(i.c)((function(e){return e.consultantsMyAdminList})),D=I.loading,k=I.error,w=I.consultantsMyAdmin,U=I.pages,R=I.page,P=I.count,M=Object(i.c)((function(e){return e.consultantDelete})).success,F=Object(i.c)((function(e){return e.consultantsMassImport})),q=F.loading,G=F.error,z=F.success;Object(c.useEffect)((function(){_?a(Lc(O,j,l)):t.push("/login")}),[a,t,_,j,l,O,z]),Object(c.useEffect)((function(){if(w){var e=w.map((function(e){return{NAME:e.name,EMAIL:e.email,PRACTICE:e.practice,MATRICULE:e.matricule,VALUED:e.valued?e.valued.substring(0,10):"",ARRIVAL:e.arrival?e.arrival.substring(0,10):"",LEAVING:e.leaving?e.leaving.substring(0,10):"",PARTIAL_TIME:e.isPartialTime.value,GRADE:e.grade,IS_CDM:e.isCDM,CDM_MATRICULE:e.cdmId&&e.cdmId.matricule,CDM_NAME:e.cdmId&&e.cdmId.name,COMMENT:e.comment}}));v(e)}}),[w]),Object(c.useEffect)((function(){M&&(a(Lc(O,j,l)),a({type:rt}))}),[a,M]),Object(c.useEffect)((function(){var e;E.length>0&&a((e=E,function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Qt}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.put("/api/consultants/admin/mass-import",e,s);case 6:a({type:Kt}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:Vt,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[a,E]);var B=function(e){var t;window.confirm("Are you sure to delete user: ".concat(e.name," ?"))&&a((t=e._id,function(){var e=Object(Kn.a)(Qn.a.mark((function e(a,n){var c,r,s;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:at}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},e.next=6,Yn.a.delete("/api/consultants/".concat(t),s);case 6:a({type:nt}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:ct,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Uc,{}),G&&Object(n.jsx)(dc,{variant:"danger",children:G}),Object(n.jsx)(nr,{show:A,onHide:function(){return L(!1)}}),Object(n.jsx)(ec,{access:"updateConsultantsFromWK",children:Object(n.jsx)(ic.a,{variant:"primary",onClick:function(){return L(!0)},children:"Import WK"})}),Object(n.jsx)(yc,{title:"Manage consultants",close:!1,children:Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsxs)(ac.a,{children:[Object(n.jsx)(nc.a,{xs:6,md:2,children:Object(n.jsxs)(ic.a,{className:"mb-3",onClick:function(){t.push("/admin/consultant/add")},children:[Object(n.jsx)("i",{className:"fas fa-user-edit mr-2"}),"Add"]})}),Object(n.jsx)(nc.a,{xs:6,md:2,children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{type:"text",className:"mb-3",placeholder:"Search name",value:O&&O,onChange:function(e){return m(e.target.value)}})})}),Object(n.jsx)(nc.a,{xs:6,md:2,children:Object(n.jsx)(sc.a.Control,{plaintext:!0,readOnly:!0,value:P?"".concat(P," consultants found"):"0 consultant found"})}),Object(n.jsx)(nc.a,{xs:6,md:2,children:q?Object(n.jsx)(jc,{}):Object(n.jsx)(Jc,{setImportData:C})}),Object(n.jsx)(nc.a,{xs:6,md:2,children:g&&Object(n.jsx)(cr,{element:Object(n.jsxs)(ic.a,{variant:"primary",children:[Object(n.jsx)("i",{className:"fas fa-download"}),"  Download"]}),children:Object(n.jsxs)(rr,{data:g,name:"consultantsSheet",children:[Object(n.jsx)(sr,{label:"NAME",value:"NAME"}),Object(n.jsx)(sr,{label:"EMAIL",value:"EMAIL"}),Object(n.jsx)(sr,{label:"PRACTICE",value:"PRACTICE"}),Object(n.jsx)(sr,{label:"MATRICULE",value:"MATRICULE"}),Object(n.jsx)(sr,{label:"VALUED",value:"VALUED"}),Object(n.jsx)(sr,{label:"ARRIVAL",value:"ARRIVAL"}),Object(n.jsx)(sr,{label:"LEAVING",value:"LEAVING"}),Object(n.jsx)(sr,{label:"PARTIAL_TIME",value:"PARTIAL_TIME"}),Object(n.jsx)(sr,{label:"GRADE",value:"GRADE"}),Object(n.jsx)(sr,{label:"IS_CDM",value:"IS_CDM"}),Object(n.jsx)(sr,{label:"CDM_MATRICULE",value:"CDM_MATRICULE"}),Object(n.jsx)(sr,{label:"CDM_NAME",value:"CDM_NAME"}),Object(n.jsx)(sr,{label:"COMMENT",value:"COMMENT"})]})})}),Object(n.jsx)(nc.a,{xs:6,md:2,children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{as:"select",id:"number-c",className:"mb-3",value:l&&l,onChange:function(e){return o(e.target.value)},children:[5,10,15,20,50,1e4].map((function(e){return Object(n.jsx)("option",{value:e,children:1e4===e?"All (export)":"".concat(e," / page")},e)}))})})})]}),w&&0===w.length?Object(n.jsx)(dc,{variant:"information",children:"You have not access to these information"}):D?Object(n.jsx)(jc,{}):k?Object(n.jsx)(dc,{variant:"danger",children:k}):Object(n.jsxs)(Sc.a,{responsive:!0,hover:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"Consultant name"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Matricule"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Valued"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Arrival"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Leaving"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Seniority"}),Object(n.jsx)("th",{className:"align-middle text-light"}),Object(n.jsx)("th",{className:"align-middle text-light"})]})}),Object(n.jsx)("tbody",{children:w&&w.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:e.name}),Object(n.jsx)("td",{className:"align-middle",children:e.matricule}),Object(n.jsx)("td",{className:"align-middle",children:e.practice}),Object(n.jsx)("td",{className:"align-middle",children:e.valued?e.valued.substring(0,10):""}),Object(n.jsx)("td",{className:"align-middle",children:e.arrival?e.arrival.substring(0,10):""}),Object(n.jsx)("td",{className:"align-middle",children:e.leaving?e.leaving.substring(0,10):""}),Object(n.jsxs)("td",{className:"align-middle",children:[e.valued?((new Date(Date.now())-new Date(e.valued.substring(0,10)))/315576e5).toString().substring(0,4):0," years"]}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(ic.a,{className:"btn btn-primary p-1",onClick:function(){return a=e._id,void t.push("/editconsultant/".concat(a));var a},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-user-edit"})})}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(ic.a,{className:"btn btn-danger p-1",onClick:function(){return B(e)},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-user-times"})})})]},e._id)}))})]}),Object(n.jsxs)(er.a,{children:[Object(n.jsx)(er.a.Prev,{onClick:function(){return b(R-1)},disabled:1===R}),Object(Gc.a)(Array(U).keys()).map((function(e){return[0,1,U-2,U-1].includes(e)?Object(n.jsx)(er.a.Item,{active:e+1===R,onClick:function(){a(Lc(O,e+1,l)),b(e+1)},children:e+1},e+1):U>4&&2===e&&Object(n.jsx)(er.a.Ellipsis,{},e+1)})),Object(n.jsx)(er.a.Next,{onClick:function(){return b(R+1)},disabled:R===U})]})]})})]})},lr=function(e){var t=e.history,a=Object(i.b)(),r=Object(c.useState)(10),s=Object(rc.a)(r,2),l=s[0],o=s[1],d=Object(c.useState)(1),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(""),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(i.c)((function(e){return e.userLogin})).userInfo,f=Object(i.c)((function(e){return e.userList})),g=f.users,v=f.pages,y=f.page,S=f.count,E=Object(i.c)((function(e){return e.userDelete})),C=E.error,N=E.success;Object(c.useEffect)((function(){x?a($n(x.consultantProfil.practice,O,j,l)):t.push("/login")}),[a,t,x,N,O,j,l]);var T=function(e){var t;window.confirm("Are you sure to delete user: ".concat(e.name," ?"))&&a((t=e._id,function(){var e=Object(Kn.a)(Qn.a.mark((function e(a,n){var c,r,s;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:me}),c=n(),r=c.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(r.token)}},e.next=6,Yn.a.delete("/api/users/".concat(t),s);case 6:a({type:xe}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:fe,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(n.jsxs)(n.Fragment,{children:[C&&Object(n.jsx)(dc,{variant:"danger",children:C}),Object(n.jsx)(yc,{title:"Manage users",close:!1,children:Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsxs)(ac.a,{children:[Object(n.jsx)(nc.a,{xs:6,md:3,children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{type:"text",className:"mb-3",placeholder:"Search name",value:O&&O,onChange:function(e){return m(e.target.value)}})})}),Object(n.jsx)(nc.a,{xs:6,md:6,children:Object(n.jsx)(sc.a.Control,{plaintext:!0,readOnly:!0,value:S?"".concat(S," consultants found"):"0 consultant found"})}),Object(n.jsx)(nc.a,{xs:6,md:3,children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{as:"select",id:"number-c",className:"mb-3",value:l&&l,onChange:function(e){return o(e.target.value)},children:[5,10,15,20,50].map((function(e){return Object(n.jsxs)("option",{value:e,children:[e," / page"]},e)}))})})})]}),Object(n.jsxs)(Sc.a,{responsive:!0,hover:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"User name"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Matricule"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Created at"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Last connection"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Status"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"User Profil"}),Object(n.jsx)("th",{className:"align-middle text-light"}),Object(n.jsx)("th",{className:"align-middle text-light"})]})}),Object(n.jsx)("tbody",{children:g&&g.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)("b",{children:e.name&&e.name})}),Object(n.jsx)("td",{className:"align-middle",children:e.consultantProfil&&e.consultantProfil.matricule}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.consultantProfil&&e.consultantProfil.practice}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.createdAt&&e.createdAt.toString().substring(0,10)}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.lastConnexion&&e.lastConnexion.toString().substring(0,10)}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.status&&"Waiting approval"===e.status?Object(n.jsx)("i",{className:"far fa-clock",style:{color:"orange"}}):"Validated"===e.status?Object(n.jsx)("i",{className:"fas fa-check-circle",style:{color:"green"}}):"Refused"===e.status?Object(n.jsx)("i",{className:"fas fa-times",style:{color:"red"}}):"unknown"}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.profil&&e.profil.profil&&e.profil.profil}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(ic.a,{className:"btn btn-primary p-1",onClick:function(){return a=e._id,void t.push("/admin/edituser/".concat(a));var a},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-user-edit"})})}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(ic.a,{className:"btn btn-danger p-1",onClick:function(){return T(e)},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-user-times"})})})]},e._id)}))})]}),Object(n.jsxs)(er.a,{children:[Object(n.jsx)(er.a.Prev,{onClick:function(){return b(y-1)},disabled:1===y}),Object(Gc.a)(Array(v).keys()).map((function(e){return[0,1,v-2,v-1].includes(e)?Object(n.jsx)(er.a.Item,{active:e+1===y,onClick:function(){a($n(x.consultantProfil.practice,O,e+1,l)),b(e+1)},children:e+1},e+1):v>4&&2===e&&Object(n.jsx)(er.a.Ellipsis,{},e+1)})),Object(n.jsx)(er.a.Next,{onClick:function(){return b(y+1)},disabled:y===v})]})]})})]})},or=function(){return function(){var e=Object(Kn.a)(Qn.a.mark((function e(t,a){var n,c,r,s,i;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Ya}),n=a(),c=n.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,Yn.a.get("/api/access",r);case 6:s=e.sent,i=s.data,t({type:Wa,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:Ja,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()},dr=function(e){var t=e.match,a=e.history,r=t.params.id,s=Object(i.b)(),l=Object(c.useState)(""),o=Object(rc.a)(l,2),d=o[0],u=o[1],j=Object(c.useState)(""),b=Object(rc.a)(j,2),h=b[0],p=b[1],O=Object(c.useState)(""),m=Object(rc.a)(O,2),x=m[0],f=m[1],g=Object(c.useState)(""),v=Object(rc.a)(g,2),y=v[0],S=v[1],E=Object(c.useState)(""),C=Object(rc.a)(E,2),N=C[0],T=C[1],A=Object(i.c)((function(e){return e.userLogin})).userInfo,L=Object(i.c)((function(e){return e.userDetails})),_=L.error,I=L.loading,D=L.user,k=Object(i.c)((function(e){return e.userUpdate})),w=k.error,U=k.success,R=Object(i.c)((function(e){return e.consultantsMyAdminList})),P=R.error,M=R.consultantsMyAdmin,F=Object(i.c)((function(e){return e.accessList})).access;Object(c.useEffect)((function(){A||a.push("/login")}),[a,A]),Object(c.useEffect)((function(){I||_||D&&D._id===r||s(Zn(r))}),[s,D,_,r,I]),Object(c.useEffect)((function(){D&&(u(D.name),p(D.email),S(D.profil),T(D.status),D.consultantProfil?f(D.consultantProfil._id):f(""))}),[D]),Object(c.useEffect)((function(){D&&D._id===r&&s(Lc("","",1e4))}),[s,D,r]),Object(c.useEffect)((function(){F||s(or())}),[s,F]);return Object(n.jsxs)(n.Fragment,{children:[_&&Object(n.jsx)(dc,{variant:"danger",children:_}),P&&Object(n.jsx)(dc,{variant:"danger",children:P}),w&&Object(n.jsx)(dc,{variant:"danger",children:w}),U&&Object(n.jsx)(dc,{variant:"success",children:"User updated with success"}),Object(n.jsx)(ic.a,{className:"mb-3",onClick:function(){return a.go(-1),void s({type:Ee})},children:"Go Back"}),Object(n.jsx)(bc,{children:Object(n.jsxs)(sc.a,{onSubmit:function(e){e.preventDefault();var t=Object(Ne.a)(Object(Ne.a)({},D),{},{name:d,email:h,consultantProfil:x,profil:y._id,status:N});s(function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:ve}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.put("/api/users/".concat(e._id),e,s);case 6:a({type:ye}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:Se,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))},children:[Object(n.jsxs)(sc.a.Group,{controlId:"name",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Name"})}),Object(n.jsx)(sc.a.Control,{type:"name",placeholder:"Enter Name",value:d&&d,onChange:function(e){return u(e.target.value)},required:!0})]}),Object(n.jsxs)(sc.a.Group,{controlId:"email",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Email address"})}),Object(n.jsx)(sc.a.Control,{type:"email",placeholder:"Enter email",value:h&&h,onChange:function(e){return p(e.target.value)},required:!0})]}),Object(n.jsxs)(sc.a.Group,{controlId:"consultantProfil",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Linked Consultant Profil"})}),Object(n.jsxs)(Oc.a,{children:[Object(n.jsx)(sc.a.Control,{as:"select",placeholder:"Enter consultant to link",value:x&&x,onChange:function(e){return f(e.target.value)},required:!0,children:M&&M.map((function(e){return Object(n.jsx)("option",{value:e._id,children:e.name},e._id)}))}),Object(n.jsx)(Oc.a.Append,{children:Object(n.jsx)(ic.a,{onClick:function(){return a.push("/editconsultant/".concat(x))},children:"Edit user"})})]})]}),Object(n.jsxs)(sc.a.Group,{controlId:"user-profil",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"User profil"})}),Object(n.jsxs)(sc.a.Control,{as:"select",value:y&&y.profil?y.profil:"",onChange:function(e){return function(e){var t=F.filter((function(t){return t.profil===e}))[0];S(t)}(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),F&&F.map((function(e){return Object(n.jsx)("option",{value:e.profil,children:e.profil},e._id)}))]})]}),Object(n.jsxs)(sc.a.Group,{controlId:"status",children:[Object(n.jsx)(sc.a.Label,{children:Object(n.jsx)("b",{children:"Account Status"})}),Object(n.jsx)(sc.a.Control,{as:"select",placeholder:"Select status for account",value:N&&N,onChange:function(e){return T(e.target.value)},required:!0,children:Ce.map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}))})]}),Object(n.jsx)(ic.a,{type:"submit",variant:"primary",children:"Update"})]})})]})},ur=function(e){var t=e.location,a=e.history,r=Object(c.useState)(""),s=Object(rc.a)(r,2),l=s[0],o=s[1],d=Object(c.useState)(""),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(""),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)(""),f=Object(rc.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)(null),S=Object(rc.a)(y,2),E=S[0],C=S[1],N=Object(i.b)(),T=Object(i.c)((function(e){return e.userRegister})),A=T.loading,L=T.error,_=T.userInfo,I=t.search?t.search.split("=")[1]:"/";Object(c.useEffect)((function(){_&&a.push(I)}),[a,_,I]);return Object(n.jsxs)(bc,{children:[Object(n.jsx)("h1",{children:"Sign Up"}),E&&Object(n.jsx)(dc,{variant:"danger",children:E}),L&&Object(n.jsx)(dc,{variant:"danger",children:L}),A&&Object(n.jsx)(jc,{}),Object(n.jsxs)(sc.a,{onSubmit:function(e){!1===e.currentTarget.checkValidity()?C("Please check your information"):(e.preventDefault(),C(null),O!==g?C("Passwords do not match"):N(function(e,t,a){return function(){var n=Object(Kn.a)(Qn.a.mark((function n(c){var r,s,i;return Qn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:te}),r={headers:{"Content-type":"Application/json"}},n.next=5,Yn.a.post("/api/users",{name:e,email:t,password:a},r);case 5:s=n.sent,i=s.data,c({type:ae,payload:i}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),c({type:ne,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(l,j,O)))},children:[Object(n.jsxs)(sc.a.Group,{controlId:"name",children:[Object(n.jsx)(sc.a.Label,{children:"Name"}),Object(n.jsx)(sc.a.Control,{type:"name",placeholder:"Enter Name",value:l,onChange:function(e){return o(e.target.value)}})]}),Object(n.jsxs)(sc.a.Group,{controlId:"email",children:[Object(n.jsx)(sc.a.Label,{children:"Email Adress"}),Object(n.jsx)(sc.a.Control,{type:"email",placeholder:"Enter Email",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(n.jsxs)(sc.a.Group,{controlId:"password",children:[Object(n.jsx)(sc.a.Label,{children:"Password"}),Object(n.jsx)(sc.a.Control,{type:"password",placeholder:"Enter password",value:O,onChange:function(e){return m(e.target.value)}})]}),Object(n.jsxs)(sc.a.Group,{controlId:"confirm-password",children:[Object(n.jsx)(sc.a.Label,{children:"Confirm Password"}),Object(n.jsx)(sc.a.Control,{type:"password",placeholder:"Confirm password",value:g,onChange:function(e){return v(e.target.value)}})]}),Object(n.jsx)(ic.a,{type:"submit",variat:"primary",children:"Register"}),Object(n.jsx)(ac.a,{className:"py-3",children:Object(n.jsxs)(nc.a,{children:["Have an account ?",Object(n.jsx)(Mn.Link,{to:I?"/login?reditect=".concat(I):"/login",children:"Login"})]})})]})]})},jr=a(66),br=a(102),hr=a(64),pr=function(e){var t=e.history,a=e.onHide,r=e.show,s=e.consultant,l=e.loadingData,o=void 0===l?{}:l,d=e.mode,u=e.addStaffHandler,j=Object(i.b)(),b=Object(c.useState)(o.responsability?o.responsability:""),h=Object(rc.a)(b,2),p=h[0],O=h[1],m=Object(c.useState)(o.priority?o.priority:""),x=Object(rc.a)(m,2),f=x[0],g=x[1],v=Object(c.useState)(o.information?o.information:""),y=Object(rc.a)(v,2),S=y[0],E=y[1],C=Object(i.c)((function(e){return e.consultantGetCdm})).cdm;return Object(c.useEffect)((function(){var e;r&&j((e=s._id,function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:xt}),c=n(),r=c.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.get("/api/consultants/".concat(e,"/cdm"),s);case 6:i=t.sent,l=i.data,a({type:ft,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:gt,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[j,s,r]),Object(n.jsxs)(tr.a,{show:r,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:a,children:[Object(n.jsx)(tr.a.Header,{closeButton:!0,children:Object(n.jsx)(tr.a.Title,{id:"contained-modal-title-vcenter",children:s.name?s.name+" - "+s.grade+(C?" ("+C.name+")":""):""})}),Object(n.jsxs)(tr.a.Body,{children:["staffing"===d&&Object(n.jsxs)(ec,{access:"editStaff",children:[Object(n.jsxs)(ac.a,{children:[Object(n.jsxs)(nc.a,{className:"mt-3",children:[Object(n.jsx)("label",{htmlFor:"sd-responsability",children:Object(n.jsx)("strong",{children:"Responsability *"})}),Object(n.jsx)(Oc.a,{id:"sd-responsability",children:Object(n.jsxs)(Rc.a,{as:"select",value:p,onChange:function(e){return O(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Object(n.jsx)("option",{value:"Project director",children:"Project director"}),Object(n.jsx)("option",{value:"Project manager",children:"Project manager"}),Object(n.jsx)("option",{value:"Project leader",children:"Project leader"}),Object(n.jsx)("option",{value:"X",children:"X"}),Object(n.jsx)("option",{value:"Intern",children:"Intern"})]})})]}),Object(n.jsxs)(nc.a,{className:"mt-3",children:[Object(n.jsx)("label",{htmlFor:"sd-priority",children:Object(n.jsx)("strong",{children:"Priority *"})}),Object(n.jsx)(Oc.a,{id:"sd-priority",children:Object(n.jsxs)(Rc.a,{as:"select",value:f,onChange:function(e){return g(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Object(n.jsx)("option",{value:"P1",children:"P1"}),Object(n.jsx)("option",{value:"P2",children:"P2"}),Object(n.jsx)("option",{value:"P3",children:"P3"})]})})]})]}),Object(n.jsx)(ac.a,{children:Object(n.jsxs)(nc.a,{className:"mt-3",children:[Object(n.jsx)("label",{children:Object(n.jsx)("strong",{children:"Comment"})}),Object(n.jsx)(Oc.a,{id:"sd-information",children:Object(n.jsx)(Rc.a,{as:"textarea",rows:3,value:S,onChange:function(e){return E(e.target.value)}})})]})})]}),Object(n.jsx)(ec,{access:"viewSkills",children:Object(n.jsx)(Kc,{consultantId:s._id,editable:!1,close:"consultation"!==d})}),Object(n.jsx)(ec,{access:"viewStaffings",children:Object(n.jsx)(yc,{title:"Others staffings",close:!1,children:Object(n.jsx)(Pc,{history:t,consultantId:s._id,onNavigate:a})})}),Object(n.jsx)(yc,{title:"Old staffings",close:!0,children:Object(n.jsx)(qc,{history:t,consultantId:s._id,onNavigate:a})})]}),Object(n.jsxs)(tr.a.Footer,{children:[Object(n.jsx)(ic.a,{onClick:a,variant:"secondary",children:"Cancel"}),Object(n.jsx)(ec,{access:"editStaff",children:"staffing"===d&&Object(n.jsx)(ic.a,{onClick:function(){u(s,p,f,S),a()},variant:"primary",disabled:!(""!==p&&""!==f),children:"Staff"})})]})]})},Or=function(e){var t=e.editRequest,a=e.label,c=e.id,r=e.value,s=e.onChange,i=e.required,l=e.options;return Object(n.jsxs)(sc.a.Group,{controlId:c,className:"mb-0",children:[a&&Object(n.jsxs)(sc.a.Label,{as:"h5",children:[a," ",t&&i&&"*"]}),t?Object(n.jsx)(sc.a.Control,{as:"select",className:"custom-select border border-light border-top-0 border-right-0 border-left-0",value:r||"",onChange:function(e){return s(e.target.value)},required:i,children:l}):Object(n.jsx)(sc.a.Control,{type:"text",className:"pl-3 border border-light border-top-0 border-right-0 border-left-0 bg-light text-secondary",plaintext:!0,value:r||"",readOnly:!0})]})},mr=a(273),xr=function(e){var t=e.options,a=e.value,c=e.setValue,r=e.disabled,s=e.multi;return Object(n.jsx)("div",{children:Object(n.jsx)(mr.a,{closeMenuOnSelect:!0,placeholder:"Select...",value:a||null,isMulti:s,options:t||[],onChange:function(e){var t=[];t=s?e.map((function(e){return{id:e.value,value:e.label}})):[{id:e.value,value:e.label}],c(t)},isDisabled:r})})},fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"15";return function(){var c=Object(Kn.a)(Qn.a.mark((function c(r,s){var i,l,o,d,u;return Qn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,r({type:ra}),i=s(),l=i.userLogin.userInfo,o={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(l.token)}},c.next=6,Yn.a.get("/api/skills?category=".concat(e,"&name=").concat(t,"&pageNumber=").concat(a,"&pageSize=").concat(n),o);case 6:d=c.sent,u=d.data,r({type:sa,payload:u}),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),r({type:ia,payload:c.t0.response&&c.t0.response.data.message?c.t0.response.data.message:c.t0.message});case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e,t){return c.apply(this,arguments)}}()},gr=function(e){var t=e.monthData,a=e.grades,c=e.mode,r=e.addStaff,s=e.focus,l=e.setFocus,o=Object(i.c)((function(e){return e.userLogin})).userInfo,d=function(e){var t=e.split(" ");return 1===t.length?t[0]:t.map((function(e,t){return 0===t?e[0].toUpperCase()+".":e.toUpperCase()})).join(" ")};return Object(n.jsxs)(jr.a,{className:"my-1 rounded",children:[Object(n.jsx)(jr.a.Header,{as:"h5",children:t.month.firstDay.toString().substring(0,7)}),Object(n.jsx)(jr.a.Body,{children:t.availabilities.map((function(e,t){return a.includes(e.grade)&&Object(n.jsxs)(ac.a,{className:"align-items-middle",children:[("staffing"===c||"consultation"===c)&&Object(n.jsx)(nc.a,{sm:1,children:Object(n.jsx)(ic.a,{size:"sm",variant:"ligth",className:"mx-0 px-0",onClick:function(){return r(e)},children:Object(n.jsx)("i",{className:"fas fa-search"})})}),Object(n.jsx)(nc.a,{sm:10,children:Object(n.jsx)(zc.a,{overlay:Object(n.jsx)(Bc.a,{id:"tooltip-disabled",html:"true",children:Object(n.jsx)(ec,{access:"viewComment",children:o&&o.consultantProfil._id!==e._id?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{className:"m-0 p-0 text-left",children:Object(n.jsx)("strong",{children:"Information"})}),e.comment&&e.comment.split("\n").map((function(e,t){return Object(n.jsx)("p",{className:"m-0 p-0 text-left",children:e},t)}))]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{className:"m-0 mt-3 p-0 text-left",children:Object(n.jsx)("strong",{children:"Availability comment"})}),e.availabilityComment&&e.availabilityComment.split("\n").map((function(e,t){return Object(n.jsx)("p",{className:"m-0 p-0 text-left",children:e},t)}))]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{className:"m-0 mt-3 p-0 text-left",children:Object(n.jsx)("strong",{children:"Not Prod comment"})}),e.notProdComment&&e.notProdComment.split("\n").map((function(e,t){return Object(n.jsx)("p",{className:"m-0 p-0 text-left",children:e},t)}))]})]}):"No access to this data"})}),children:Object(n.jsx)(sc.a.Control,{plaintext:!0,readOnly:!0,id:e.email,value:e.availableDay.toString()+" days : "+d(e.name)+" ("+(i=e.valued,(i?((Date.now()-new Date(i))/315576e5).toString().substring(0,4):"-")+" years)"),style:e.email===s?{background:"#464277",color:"white"}:{color:"black"},onFocus:function(e){l(e.target.id)}})})})]},t);var i}))})]})},vr=function(e){var t=e.start,a=e.end,r=e.mode,s=e.addStaffHandler,l=e.history,o=Object(i.b)(),d=Object(c.useState)(""),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(""),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)(""),f=Object(rc.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)(""),S=Object(rc.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)([]),T=Object(rc.a)(N,2),A=T[0],L=T[1],_=Object(c.useState)("filterAvailable"),I=Object(rc.a)(_,2),D=I[0],k=I[1],w=Object(c.useState)(!1),U=Object(rc.a)(w,2),R=U[0],P=U[1],M=Object(c.useState)(""),F=Object(rc.a)(M,2),q=F[0],G=F[1],z=Object(i.c)((function(e){return e.userLogin})).userInfo,B=Object(i.c)((function(e){return e.pxxAvailabilities})),X=B.loading,H=B.error,Q=B.availabilities,K=Object(i.c)((function(e){return e.skillList})).skills;Object(c.useEffect)((function(){z&&C(z.consultantProfil.practice)}),[z]),Object(c.useEffect)((function(){E&&o(mc(E,t,a,A.map((function(e){return e.value})).join(";"),O,g,D))}),[o,E,t,a,D,A,O,g]),Object(c.useEffect)((function(){o(fr("","",1,1e4))}),[o]);var V=function(e){P(!0),G(e)};return Object(n.jsxs)(n.Fragment,{children:[R&&Object(n.jsx)(pr,{show:R,onHide:function(){return P(!1)},consultant:q,mode:r,addStaffHandler:s,history:l}),Object(n.jsx)(ac.a,{className:"mt-5",children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(sc.a.Group,{controlId:"switch-practices",className:"my-0",children:Object(n.jsx)(sc.a.Check,{type:"switch",id:"switch-all-practices",label:"All practices",checked:"all"===E,onChange:function(e){!0===e.target.checked?C("all"):C(z.consultantProfil.practice)}})})})}),Object(n.jsx)(ac.a,{className:"mt-3",children:Object(n.jsx)(nc.a,{md:12,children:Object(n.jsx)(sc.a,{onSubmit:function(e){e.preventDefault(),o(mc(E,t,a,A.map((function(e){return e.value})).join(";"),O,g,D))},children:Object(n.jsxs)(sc.a.Row,{className:"align-items-center mb-3",children:[Object(n.jsx)(nc.a,{md:1,children:O||g?Object(n.jsx)(ic.a,{variant:"secondary",onClick:function(){L([]),m(""),v("")},block:!0,children:Object(n.jsx)("i",{className:"fas fa-minus-circle"})}):Object(n.jsx)(ic.a,{variant:"primary",disabled:!0,block:!0,children:Object(n.jsx)("i",{className:"fas fa-keyboard"})})}),Object(n.jsx)(nc.a,{md:4,children:Object(n.jsx)(sc.a.Group,{controlId:"skill-search",className:"my-0",children:Object(n.jsx)(xr,{options:K?K.map((function(e){return{value:e._id,label:e.name}})):[],value:A.length?A.map((function(e){return{value:e._id,label:e.value}})):[],setValue:L,multi:!0,disabled:!1})})}),Object(n.jsx)(nc.a,{md:2,children:Object(n.jsx)(sc.a.Group,{controlId:"experience-search-start",className:"my-0",children:Object(n.jsx)(sc.a.Control,{type:"number",min:0,step:.5,placeholder:"From (year)",value:O&&O,onChange:function(e){return m(e.target.value)}})})}),Object(n.jsx)(nc.a,{md:2,children:Object(n.jsx)(sc.a.Group,{controlId:"experience-search-end",className:"my-0",children:Object(n.jsx)(sc.a.Control,{type:"number",step:.5,min:O||0,placeholder:"To (year)",value:g&&g,onChange:function(e){return v(e.target.value)}})})}),Object(n.jsx)(nc.a,{md:2,children:Object(n.jsx)(sc.a.Group,{controlId:"switch-only-available",className:"my-0",children:Object(n.jsx)(Or,{editRequest:!0,label:"",id:"select-filter",value:D,onChange:k,required:!0,options:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("option",{value:"filterAvailable",children:"Is available"}),Object(n.jsx)("option",{value:"notAvailable",children:"Is not available"}),Object(n.jsx)("option",{value:"notProd",children:"Has not prod"})]})})})}),Object(n.jsx)(nc.a,{md:1,children:Object(n.jsx)(ic.a,{type:"submit",variant:"primary",block:!0,children:"Search"})})]})})})}),Object(n.jsxs)(br.a,{defaultActiveKey:"Analysts",id:"uncontrolled-tab-example",children:[Object(n.jsx)(hr.a,{eventKey:"Intern",title:"Intern",children:Object(n.jsx)(ac.a,{className:"mt-3",children:X?Object(n.jsx)(jc,{}):H?Object(n.jsx)(dc,{variant:"danger",children:H}):Q&&Q.map((function(e,t){return Object(n.jsx)(nc.a,{sm:12,md:4,children:Object(n.jsx)(gr,{monthData:e,grades:["Intern"],mode:r,addStaff:V,focus:j,setFocus:b})},t)}))})}),Object(n.jsx)(hr.a,{eventKey:"Analysts",title:"Analysts",children:Object(n.jsx)(ac.a,{className:"mt-3",children:X?Object(n.jsx)(jc,{}):H?Object(n.jsx)(dc,{variant:"danger",children:H}):Q&&Q.map((function(e,t){return Object(n.jsx)(nc.a,{sm:12,md:4,children:Object(n.jsx)(gr,{monthData:e,grades:["Analyst"],mode:r,addStaff:V,focus:j,setFocus:b})},t)}))})}),Object(n.jsx)(hr.a,{eventKey:"Consultants",title:"Consultants",children:Object(n.jsx)(ac.a,{className:"mt-3",children:X?Object(n.jsx)(jc,{}):H?Object(n.jsx)(dc,{variant:"danger",children:H}):Q&&Q.map((function(e,t){return Object(n.jsx)(nc.a,{sm:12,md:4,children:Object(n.jsx)(gr,{monthData:e,grades:["Consultant"],mode:r,addStaff:V,focus:j,setFocus:b})},t)}))})}),Object(n.jsx)(hr.a,{eventKey:"Senior consultants",title:"Senior consultants",children:Object(n.jsx)(ac.a,{className:"mt-3",children:X?Object(n.jsx)(jc,{}):H?Object(n.jsx)(dc,{variant:"danger",children:H}):Q&&Q.map((function(e,t){return Object(n.jsx)(nc.a,{sm:12,md:4,children:Object(n.jsx)(gr,{monthData:e,grades:["Senior consultant"],mode:r,addStaff:V,focus:j,setFocus:b})},t)}))})}),Object(n.jsx)(hr.a,{eventKey:"Managers",title:"Managers and +",children:Object(n.jsx)(ac.a,{className:"mt-3",children:X?Object(n.jsx)(jc,{}):H?Object(n.jsx)(dc,{variant:"danger",children:H}):Q&&Q.map((function(e,t){return Object(n.jsx)(nc.a,{sm:12,md:4,children:Object(n.jsx)(gr,{monthData:e,grades:["Manager","Senior manager","Director","Partner"],mode:r,addStaff:V,focus:j,setFocus:b})},t)}))})})]})]})},yr=function(e){var t=e.tace,a=e.practice,r=Object(i.b)(),s=Object(c.useState)(t.target),l=Object(rc.a)(s,2),o=l[0],d=l[1],u=Object(c.useState)(t.bid),j=Object(rc.a)(u,2),b=j[0],h=j[1],p=Object(c.useState)(!1),O=Object(rc.a)(p,2),m=O[0],x=O[1],f=Object(c.useState)(!1),g=Object(rc.a)(f,2),v=g[0],y=g[1],S=Object(c.useState)(""),E=Object(rc.a)(S,2),C=E[0],N=E[1],T=Object(c.useState)(""),A=Object(rc.a)(T,2),L=A[0],_=A[1],I=Object(i.c)((function(e){return e.createTace}));return Object(c.useEffect)((function(){var e;v&&(r((e={month:t.month._id,practice:a,target:o,bid:b},function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:yn}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.post("/api/tace",e,s);case 6:i=t.sent,l=i.data,a({type:Sn,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:En,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}())),y(!1))}),[r,I,v,a,t,o,b]),Object(c.useEffect)((function(){var e=Number(t.totalProdDay),a=Number(b)/100*(Number(t.totalProdDay)+Number(t.totalNotProdDay)+Number(t.totalAvailableDay)),n=Number(o)/100*(Number(t.totalProdDay)+Number(t.totalNotProdDay)+Number(t.totalAvailableDay)),c=new Date(Math.max(new Date(Date.now()),new Date(t.month.firstDay))),r=new Date(Math.max(new Date(Date.now()),new Date(t.month.firstDay)));r.setUTCMonth(r.getUTCMonth()+1),r.setUTCDate(1);var s=(r-c)/864e5;b&&N((e-a)/s);o&&_((e-n)/s)}),[t,b,o]),Object(n.jsx)(nc.a,{sm:12,md:4,children:Object(n.jsxs)(jr.a,{className:"my-3 p-3 rounded",children:[Object(n.jsx)(jr.a.Header,{as:"h5",children:t.month.firstDay.toString().substring(0,7)}),Object(n.jsxs)(jr.a.Body,{className:"p-1 mt-3",children:[Object(n.jsxs)(jr.a.Text,{as:"h4",children:["Tace ",Object(n.jsx)(ec,{access:"editTace",children:Object(n.jsx)(ic.a,{size:"sm",variant:"ligth",onClick:function(){m&&y(!0),x(!m)},children:Object(n.jsx)("i",{className:"fas fa-edit"})})})]}),Object(n.jsxs)(pc.a,{children:[Object(n.jsx)(pc.a.Item,{className:"py-1 bg-primary text-white",children:Object(n.jsxs)(ac.a,{children:[Object(n.jsx)(nc.a,{className:"text-center",xs:4,children:Object(n.jsx)("strong",{children:"Current"})}),Object(n.jsx)(nc.a,{className:"text-center",xs:4,children:Object(n.jsx)("strong",{children:"Target"})}),Object(n.jsx)(nc.a,{className:"text-center",xs:4,children:Object(n.jsx)("strong",{children:"Bid"})})]})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsxs)(ac.a,{className:"align-items-center",children:[Object(n.jsxs)(nc.a,{className:"text-center",xs:4,children:[(100*Number(t.totalTACE)).toFixed(1)," %"]}),Object(n.jsx)(nc.a,{className:"text-center",xs:4,children:Object(n.jsx)(sc.a.Group,{controlId:"tace-target",className:"mb-0",children:m?Object(n.jsx)(sc.a.Control,{type:"Number",className:"text-center",min:0,max:100,step:.1,value:o,onChange:function(e){return d(e.target.value)}}):Object(n.jsxs)(ac.a,{className:"align-items-center",children:[Object(n.jsx)(nc.a,{className:"m-0 p-0",children:Object(n.jsx)(sc.a.Control,{type:"text",className:"text-right",plaintext:!0,value:o,readOnly:!0})}),Object(n.jsx)(nc.a,{className:"m-0 p-0 text-left",children:"\xa0%"})]})})}),Object(n.jsx)(nc.a,{className:"text-center",xs:4,children:Object(n.jsx)(sc.a.Group,{controlId:"title",className:"mb-0",children:m?Object(n.jsx)(sc.a.Control,{type:"Number",className:"text-center",min:0,max:100,step:.1,value:b,onChange:function(e){return h(e.target.value)}}):Object(n.jsxs)(ac.a,{className:"align-items-center",children:[Object(n.jsx)(nc.a,{className:"m-0 p-0",children:Object(n.jsx)(sc.a.Control,{type:"text",className:"text-right",plaintext:!0,value:b,readOnly:!0})}),Object(n.jsx)(nc.a,{className:"m-0 p-0 text-left",children:"\xa0%"})]})})})]})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsxs)(ac.a,{children:[Object(n.jsx)(nc.a,{xs:4,children:"\u0394 FTE"}),Object(n.jsx)(nc.a,{xs:4,className:"text-center",children:L&&L.toFixed(2)}),Object(n.jsx)(nc.a,{xs:4,className:"text-center",children:C&&C.toFixed(2)})]})})]}),Object(n.jsxs)(pc.a,{className:"mt-3",children:[Object(n.jsx)(pc.a.Item,{className:"py-1 bg-primary text-white",children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:Object(n.jsx)("strong",{children:"Leaving"})})})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(ac.a,{children:Object(n.jsxs)(nc.a,{className:"text-right",children:[(100*Number(t.totalLeaving)).toFixed(2)," %"]})})})]}),Object(n.jsxs)(pc.a,{className:"mt-3",children:[Object(n.jsx)(pc.a.Item,{className:"py-1 bg-primary text-white",children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:Object(n.jsx)("strong",{children:"FTE"})})})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{className:"text-right",children:t.totalETP&&t.totalETP.toFixed(2)})})})]})]}),Object(n.jsx)(jr.a.Footer,{className:"mt-3",children:Object(n.jsx)(ec,{access:"tace",children:Object(n.jsx)(Mn.Link,{to:"/pxxdetails/".concat(t.month._id),children:"View details"})})})]})})},Sr=function(e){var t=e.history,a=Object(i.b)(),r=new Date(Date.now());r.setUTCDate(1),r.setUTCMonth(r.getUTCMonth()),r=r.toISOString().substring(0,10);var s=new Date(Date.now());s.setUTCDate(1),s.setUTCMonth(s.getUTCMonth()+3-1),s=s.toISOString().substring(0,10);var l=Object(c.useState)(r),o=Object(rc.a)(l,2),d=o[0],u=o[1],j=Object(c.useState)(s),b=Object(rc.a)(j,2),h=b[0],p=b[1],O=Object(i.c)((function(e){return e.userLogin})).userInfo,m=Object(i.c)((function(e){return e.pxxTACE})),x=m.loading,f=m.error,g=m.tace;Object(c.useEffect)((function(){O||t.push("/login")}),[t,O]),Object(c.useEffect)((function(){O&&!x&&a(function(e,t,a){return function(){var n=Object(Kn.a)(Qn.a.mark((function n(c,r){var s,i,l,o,d;return Qn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:S}),s=r(),i=s.userLogin.userInfo,l={headers:{Authorization:"Bearer ".concat(i.token)}},n.next=6,Yn.a.get("/api/pxx/chart/tace?practice=".concat(e,"&start=").concat(t,"&end=").concat(a),l);case 6:o=n.sent,d=o.data,c({type:E,payload:d}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),c({type:C,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()}(O.consultantProfil.practice,d,h))}),[a,d,h]);var v=function(e){var t=new Date(d),a=new Date(h);t.setUTCMonth(t.getUTCMonth()+e),a.setUTCMonth(a.getUTCMonth()+e),u(t.toISOString().substring(0,10)),p(a.toISOString().substring(0,10))};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Uc,{}),Object(n.jsxs)(ac.a,{children:[Object(n.jsx)(nc.a,{className:"text-center",xs:2,children:Object(n.jsx)(ic.a,{variant:"primary",size:"sm",onClick:function(){return v(-1)},children:Object(n.jsx)("i",{className:"fas fa-caret-left"})})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{type:"text",id:"start-date",className:"form-control-lg mb-3 text-right",plaintext:!0,value:d&&"From: ".concat(d.substring(0,7).replace("-","/")),readOnly:!0})})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{type:"text",id:"date-end",className:"form-control-lg mb-3 text-left",plaintext:!0,value:h&&"To: ".concat(h.substring(0,7).replace("-","/")),readOnly:!0})})}),Object(n.jsx)(nc.a,{className:"text-center",xs:2,children:Object(n.jsx)(ic.a,{variant:"primary",size:"sm",onClick:function(){return v(1)},children:Object(n.jsx)("i",{className:"fas fa-caret-right"})})})]}),Object(n.jsx)(ec,{access:"tace",children:Object(n.jsxs)(yc,{title:"TACE",close:!1,children:[Object(n.jsx)(ac.a,{className:"mt-3",children:Object(n.jsx)(nc.a,{children:Object(n.jsxs)("h4",{children:["TACE (",O&&O.consultantProfil.practice,")"]})})}),Object(n.jsx)(ac.a,{className:"mt-1",children:x?Object(n.jsx)(jc,{}):f?Object(n.jsx)(dc,{variant:"danger",children:f}):g&&g.map((function(e,t){return Object(n.jsx)(yr,{tace:e,practice:O&&O.consultantProfil.practice},t)}))})]})}),Object(n.jsx)(ec,{access:"consoDispo",children:Object(n.jsx)(yc,{title:"Availabilities",close:!0,children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(vr,{start:d,end:h,mode:"consultation",history:t})})})})})]})},Er=a(185),Cr=a(150),Nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var n=Object(Kn.a)(Qn.a.mark((function n(c,r){var s,i,l,o,d;return Qn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:rn}),s=r(),i=s.userLogin.userInfo,l={headers:{Authorization:"Bearer ".concat(i.token)}},n.next=6,Yn.a.get("/api/clients?clientName=".concat(e,"&pageNumber=").concat(t,"&pageSize=").concat(a),l);case 6:o=n.sent,d=o.data,c({type:sn,payload:d}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),c({type:ln,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},Tr=function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:dn}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.post("/api/clients",e,s);case 6:i=t.sent,l=i.data,a({type:un,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:jn,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},Ar=function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:hn}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.put("/api/clients",e,s);case 6:i=t.sent,l=i.data,a({type:pn,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:On,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},Lr=a(272),_r=function(e){var t=e.company,a=e.setCompany,r=e.editRequest,s=Object(i.b)(),l=Object(i.c)((function(e){return e.clientAll})).clients,o=Object(i.c)((function(e){return e.clientCreate})).success;Object(c.useEffect)((function(){s(Nr(""))}),[s,o]);return Object(n.jsx)(ac.a,{className:"align-items-end",children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(Lr.a,{placeholder:"Select a company",isClearable:!0,onChange:function(e){e?(l.map((function(e){return e._id})).includes(e.value)||s(Tr([{name:e.label,commercialTeam:[]}])),a(e.label)):a("")},value:t&&""!==t.label?t:null,options:l&&l.map((function(e){return{value:e._id,label:e.name}})),isDisabled:!r})})})},Ir=function(e){var t=e.label,a=e.id,c=e.placeholder,r=e.value,s=e.onChange,i=e.required,l=e.editMode;return Object(n.jsxs)(sc.a.Group,{controlId:a,className:"mb-0",children:[Object(n.jsxs)(sc.a.Label,{children:[t," ",l&&i&&"*"]}),l?Object(n.jsx)(sc.a.Control,{className:"border border-light border-top-0 border-right-0 border-left-0",type:"date",placeholder:c,value:r||"",onChange:function(e){return s(e.target.value)},required:i}):Object(n.jsx)(sc.a.Control,{className:"border border-light border-top-0 border-right-0 border-left-0 bg-light text-secondary",type:"date",value:r||"",plaintext:!0,readOnly:!0})]})},Dr=function(e){var t=e.label,a=e.placeholder,c=e.id,r=e.min,s=(e.max,e.step),i=e.value,l=e.onChange,o=e.required,d=e.editRequest;return Object(n.jsxs)(sc.a.Group,{controlId:c,className:"mb-0",children:[Object(n.jsxs)(sc.a.Label,{children:[t," ",d&&o&&"*"]}),d?Object(n.jsx)(sc.a.Control,{className:"border border-light border-top-0 border-right-0 border-left-0",type:"number",placeholder:a,min:Number(r),step:Number(s),value:i?Number(i):0,onChange:function(e){return l(e.target.value)},required:o}):Object(n.jsx)(sc.a.Control,{type:"number",className:"border border-light border-top-0 border-right-0 border-left-0 bg-light text-secondary",value:i||0,plaintext:!0,readOnly:!0})]})},kr=function(e){var t=e.label,a=e.id,c=e.placeholder,r=e.value,s=e.onChange,i=e.required,l=e.editRequest,o=e.formInline;return Object(n.jsxs)(sc.a.Group,{controlId:a,className:o?"mb-0 form-inline":"mb-0 ",children:[Object(n.jsxs)(sc.a.Label,{as:"h5",children:[t," ",l&&i&&"*"]}),l?Object(n.jsx)(sc.a.Control,{type:"text",className:"border border-light border-top-0 border-right-0 border-left-0",placeholder:c,value:r||"",onChange:function(e){return s(e.target.value)},required:i}):Object(n.jsx)(sc.a.Control,{type:"text",className:"pl-3 border border-light border-top-0 border-right-0 border-left-0 bg-light text-secondary",plaintext:!0,value:r||"",readOnly:!0})]})},wr=function(e){var t=e.label,a=e.id,c=e.editRequest,r=e.required,s=e.value,i=e.onChange,l=e.options,o=function(){for(var e=[],t=document.getElementById(a),n=0;n<t.options.length;n++)t.options[n].selected&&e.push(t.options[n].value);i(e)};return Object(n.jsxs)(sc.a.Group,{controlId:a,className:"mb-0",children:[Object(n.jsxs)(sc.a.Label,{as:"h5",children:[t," ",c&&r&&"*"]}),c?Object(n.jsx)(sc.a.Control,{as:"select",className:"custom-select border border-light border-top-0 border-right-0 border-left-0",multiple:!0,value:s||[],onChange:function(e){return o()},children:l}):Object(n.jsx)(sc.a.Control,{type:"text",className:"pl-3 border border-light border-top-0 border-right-0 border-left-0 bg-light text-secondary",value:s?s.join(", "):"",plaintext:!0,readOnly:!0})]})},Ur=function(e){var t=e.label,a=e.id,c=e.editRequest,r=e.required,s=e.placeholder,i=e.value,l=e.onChange,o=e.rows;return Object(n.jsxs)(sc.a.Group,{controlId:a,className:"mb-0",children:[Object(n.jsxs)(sc.a.Label,{as:"h5",children:[t," ",c&&r&&"*"]}),c?Object(n.jsx)(sc.a.Control,{as:"textarea",rows:o,className:"custom-select border border-light border-top-0 border-right-0 border-left-0",placeholder:s,value:i||"",onChange:function(e){return l(e.target.value)},required:r}):Object(n.jsx)(sc.a.Control,{as:"textarea",className:"pl-3 border border-light border-top-0 border-right-0 border-left-0 bg-light text-secondary",rows:o,value:i||"",plaintext:!0,readOnly:!0})]})},Rr=function(e){var t=e.match,a=e.history,r=Object(i.b)(),s=Object(i.c)((function(e){return e.userLogin})).userInfo,l=Object(i.c)((function(e){return e.dealCreate})),o=l.loading,d=l.error,u=l.success,j=l.createId,b=Object(i.c)((function(e){return e.dealUpdate})),h=b.loading,p=b.error,O=Object(i.c)((function(e){return e.dealEdit})),m=O.success,x=O.deal,f=Object(i.c)((function(e){return e.consultantPracticeList})).practiceList,g=Object(i.c)((function(e){return e.consultantsAllLeaders})).leaderslist,v=Object(c.useState)(""),y=Object(rc.a)(v,2),S=y[0],E=y[1],C=Object(c.useState)(""),N=Object(rc.a)(C,2),T=N[0],A=N[1],L=Object(c.useState)(""),_=Object(rc.a)(L,2),I=_[0],D=_[1],k=Object(c.useState)(""),w=Object(rc.a)(k,2),U=w[0],R=w[1],P=Object(c.useState)(""),M=Object(rc.a)(P,2),F=M[0],q=M[1],G=Object(c.useState)(""),z=Object(rc.a)(G,2),B=z[0],X=z[1],H=Object(c.useState)(""),Q=Object(rc.a)(H,2),K=Q[0],V=Q[1],Y=Object(c.useState)(""),W=Object(rc.a)(Y,2),J=W[0],Z=W[1],$=Object(c.useState)(""),ee=Object(rc.a)($,2),te=ee[0],ae=ee[1],ne=Object(c.useState)(""),ce=Object(rc.a)(ne,2),re=ce[0],se=ce[1],ie=Object(c.useState)(""),le=Object(rc.a)(ie,2),oe=le[0],de=le[1],ue=Object(c.useState)([]),je=Object(rc.a)(ue,2),be=je[0],he=je[1],pe=Object(c.useState)(""),Oe=Object(rc.a)(pe,2),me=Oe[0],xe=Oe[1],fe=Object(c.useState)(""),ge=Object(rc.a)(fe,2),ve=ge[0],ye=ge[1],Se=Object(c.useState)(""),Ee=Object(rc.a)(Se,2),Ce=Ee[0],Ne=Ee[1],Te=Object(c.useState)([]),Ae=Object(rc.a)(Te,2),Le=Ae[0],_e=Ae[1],Ie=Object(c.useState)([]),De=Object(rc.a)(Ie,2),ke=De[0],we=De[1],Ue=Object(c.useState)(""),Fe=Object(rc.a)(Ue,2),qe=Fe[0],Ge=Fe[1],ze=Object(c.useState)(""),Be=Object(rc.a)(ze,2),Xe=Be[0],He=Be[1],Qe=Object(c.useState)(""),Ke=Object(rc.a)(Qe,2),Ve=Ke[0],Ye=Ke[1],We=Object(c.useState)(""),Je=Object(rc.a)(We,1)[0],Ze=Object(c.useState)(""),$e=Object(rc.a)(Ze,2),et=$e[0],tt=$e[1],at=Object(c.useState)([]),nt=Object(rc.a)(at,2),ct=nt[0],rt=nt[1],st=Object(c.useState)(""),it=Object(rc.a)(st,2),lt=it[0],ot=it[1],dt=Object(c.useState)(!1),ut=Object(rc.a)(dt,2),jt=ut[0],bt=ut[1],ht=Object(c.useState)(""),pt=Object(rc.a)(ht,2),Ot=pt[0],mt=pt[1],xt=Object(c.useState)({}),ft=Object(rc.a)(xt,2),gt=ft[0],vt=ft[1],yt=Object(c.useState)(!t.params.id),St=Object(rc.a)(yt,2),Et=St[0],Ct=St[1],Nt=Object(c.useState)(!1),Tt=Object(rc.a)(Nt,2),At=Tt[0],Lt=Tt[1],_t=Object(c.useState)([]),It=Object(rc.a)(_t,2),Dt=It[0],kt=It[1],wt=Object(c.useState)([]),Ut=Object(rc.a)(wt,2),Rt=Ut[0],Pt=Ut[1],Mt=Object(c.useState)(null),Ft=Object(rc.a)(Mt,2),qt=Ft[0],Gt=Ft[1],zt=new Date(Date.now());zt.setUTCDate(1),zt.setUTCMonth(zt.getUTCMonth()),zt=zt.toISOString().substring(0,10);var Bt=new Date(Date.now());Bt.setUTCDate(1),Bt.setUTCMonth(Bt.getUTCMonth()+3-1),Bt=Bt.toISOString().substring(0,10);var Xt=Object(c.useState)(zt),Ht=Object(rc.a)(Xt,1)[0],Qt=Object(c.useState)(Bt),Kt=Object(rc.a)(Qt,1)[0];Object(c.useEffect)((function(){s||a.push("/login")}),[a,s]),Object(c.useEffect)((function(){f||r(Ac())}),[r,f]),Object(c.useEffect)((function(){var e;t.params.id&&r((e=t.params.id,function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:ka}),c=n(),r=c.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.get("/api/deals/".concat(e),s);case 6:i=t.sent,l=i.data,a({type:wa,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Ua,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[r,t]),Object(c.useEffect)((function(){r(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Re}),c=n(),r=c.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.get("/api/consultants/leaderslist?searchLeader=".concat(e),s);case 6:i=t.sent,l=i.data,a({type:Pe,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Me,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}())}),[r]),Object(c.useEffect)((function(){t.params.id&&m&&(E(x.title),A(x.company),D(x.client),q(x.status),R(x.type),X(x.probability),V(x.description),Z(x.proposalDate?x.proposalDate.substring(0,10):""),ae(x.presentationDate?x.presentationDate.substring(0,10):""),se(x.startDate?x.startDate.substring(0,10):""),de(x.mainPractice),he(x.othersPractices?x.othersPractices:[]),xe(x.location),ye(x.staffingRequest.instructions),Ne(x.staffingRequest.requestStatus),_e(x.staffingRequest.ressources?x.staffingRequest.ressources:[]),tt(x.staffingDecision.staffingStatus?x.staffingDecision.staffingStatus:""),tt(x.staffingDecision.instructions?x.staffingDecision.instructions:""),rt(x.staffingDecision.staff?x.staffingDecision.staff:[]),kt(x.contacts.primary?[{id:x.contacts.primary._id,value:x.contacts.primary.name}]:[""]),Pt(x.contacts.secondary?x.contacts.secondary.map((function(e){return{id:e._id,value:e.name}})):[]),we(x.comments?x.comments:[]),Ge(x.duration?x.duration:""),He(x.othersContacts?x.othersContacts:""))}),[m,x,s,t]),Object(c.useEffect)((function(){u&&(a.push("/staffing/".concat(j)),r({type:ga}))}),[r,a,u,j]),Object(c.useEffect)((function(){if(t.params.id&&At){if(!T)return Gt("Please select a company"),void Ct(!0);Gt("");var e={company:T,client:I,title:S,type:U,status:F,contacts:{primary:Dt.length?Dt[0].id:null,secondary:Rt.length?Rt.map((function(e){return e.id})):[]},probability:B,description:K,proposalDate:J,presentationDate:te,wonDate:lt,startDate:re,duration:qe,mainPractice:oe,othersPractices:be,location:me,staffingRequest:{instructions:ve,requestStatus:Ce,ressources:Le},staffingDecision:{instructions:Je,staffingStatus:et,staff:ct.map((function(e){return{responsability:e.responsability,idConsultant:e.idConsultant._id,priority:e.priority,information:e.information}}))},comments:ke,othersContacts:Xe};r(Mc(t.params.id,e)),Lt(!1),Ye("")}}),[t,r,s,At,T,U,I,S,F,B,K,J,te,lt,re,qe,oe,be,me,ve,Ce,Le,Je,et,ct,Dt,Rt,ke,Xe]);var Vt=function(e,t,a,n){var c=Object(Er.a)(Array,Object(Gc.a)(ct));ct.map((function(e){return e.idConsultant._id})).includes(e._id)&&(c=c.filter((function(t){return t.idConsultant._id!==e._id}))),c.push({idConsultant:{_id:e._id,name:e.name},responsability:t,priority:a,information:n}),rt(c),Lt(!0)},Yt=function(){var e=ke.slice();e.push({message:Ve,sender:{_id:s._id,name:s.name},date:new Date(Date.now()).toISOString()}),e.sort((function(e,t){return Date.parse(t.date)-Date.parse(e.date)})),we(e),Lt(!0)},Wt=function(e){var t=e.split(" ");return 1===t.length?t[0]:t.map((function(e,t){return 0===t?e[0].toUpperCase()+".":e.toUpperCase()})).join(" ")};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Uc,{}),jt&&Object(n.jsx)(pr,{show:jt,onHide:function(){return bt(!1)},consultant:Ot,loadingData:gt,mode:"staffing",addStaffHandler:Vt,history:a}),Object(n.jsx)("h1",{children:"Staffing request"}),Object(n.jsxs)(sc.a,{onSubmit:function(e){if(e.preventDefault(),T){Gt(null);var a={company:T,client:I,title:S,contacts:{primary:Dt.length?Dt[0].id:null,secondary:Rt.length?Rt.map((function(e){return e.id})):[]},type:U,status:F,probability:B,description:K,proposalDate:J,presentationDate:te,wonDate:lt,startDate:re,duration:qe,mainPractice:oe,othersPractices:be,location:me,staffingRequest:{instructions:ve,requestStatus:Ce,ressources:Le},staffingDecision:{instructions:Je,staffingStatus:et,staff:ct.map((function(e){return{responsability:e.responsability,idConsultant:e.idConsultant._id,priority:e.priority,information:e.information}}))},comments:ke,othersContacts:Xe};t.params.id?r(Mc(t.params.id,a)):r(function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:ma}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.post("/api/deals",e,s);case 6:i=t.sent,l=i.data,a({type:xa,payload:l._id}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:fa,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))}else Gt("Please select a company")},children:[Object(n.jsxs)(ac.a,{className:"mt-3",children:[Object(n.jsx)(nc.a,{xs:6,md:2,children:t.params.id&&Object(n.jsx)(ic.a,{type:"button",variant:"primary",onClick:function(){a.go(-1),r({type:Ea})},block:!0,children:"Go Back"})}),Object(n.jsx)(nc.a,{xs:0,md:8}),Object(n.jsxs)(nc.a,{xs:6,md:2,children:[t.params.id&&h&&Object(n.jsx)(jc,{}),t.params.id&&!h&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ic.a,{onClick:function(){Ct(!Et),Et&&Lt(!0)},variant:Et?"warning":"light",block:!0,children:Et?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{children:"Save  "}),Object(n.jsx)("i",{className:"far fa-check-circle"})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{children:"Edit  "}),Object(n.jsx)("i",{className:"far fa-edit"})]})}),p&&Object(n.jsx)(dc,{variant:"danger",children:p})]})]})]}),d&&Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(dc,{variant:"danger",children:d})})}),Object(n.jsxs)(ac.a,{className:"mt-2",children:[Object(n.jsxs)(nc.a,{xs:12,md:4,children:[Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(kr,{label:"Title",id:"title",placeholder:"Staffing request object",value:S,onChange:E,required:!0,editRequest:Et,formInline:!1})}),Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsxs)(sc.a.Group,{controlId:"select-company",className:"mb-0",children:[Object(n.jsx)(sc.a.Label,{as:"h5",children:"Company *"}),Object(n.jsx)(_r,{company:{value:T,label:T},setCompany:A,editRequest:Et})]}),qt&&Object(n.jsx)(dc,{variant:"danger",children:qt})]}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(kr,{label:"Client contact",id:"contact-client",placeholder:"Client contact",value:I,onChange:D,required:!1,editRequest:Et,formInline:!1})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(Or,{editRequest:Et,id:"business-type",label:"Type of business",value:U,onChange:R,required:!0,options:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Qa.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name},e.name)}))]})})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(Or,{editRequest:Et,id:"deal-status",label:"Status",value:F,onChange:function(e){ot("Won"===e?new Date(Date.now()):""),q(e)},required:!0,options:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Ka.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name},e.name)}))]})})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(Or,{editRequest:Et,id:"probability",label:"Probability (%)",value:B,onChange:X,required:!0,options:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Va.map((function(e){return Object(n.jsxs)("option",{value:e.name,children:[e.name," %"]},e.name)}))]})})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(kr,{label:"Location",id:"location",placeholder:"Location",value:me,onChange:xe,required:!1,editRequest:Et,formInline:!1})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(Or,{editRequest:Et,id:"main-practice",label:"Main practice",value:oe,onChange:de,required:!0,options:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),f&&f.map((function(e,t){return Object(n.jsx)("option",{value:e,children:e},t)}))]})})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(wr,{label:"Others Practices",id:"'others-practices'",editRequest:Et,required:!1,value:be,onChange:he,options:f&&f.map((function(e,t){return e!==oe&&Object(n.jsx)("option",{value:e,children:e},t)}))})})]}),Object(n.jsxs)(nc.a,{xs:12,md:8,children:[Object(n.jsx)(pc.a.Item,{children:Object(n.jsxs)(ac.a,{className:"align-items-start",children:[Object(n.jsx)(nc.a,{xs:12,md:4,children:Object(n.jsxs)(sc.a.Group,{controlId:"select-leader",className:"mb-0",children:[Object(n.jsx)(sc.a.Label,{as:"h5",children:"Leader"}),Object(n.jsx)(xr,{options:g?g.map((function(e){return{value:e._id,label:e.name}})):[],value:Dt.length?{value:Dt[0].id,label:Dt[0].value}:{},setValue:kt,multi:!1,disabled:!Et})]})}),Object(n.jsx)(nc.a,{xs:12,md:4,children:Object(n.jsxs)(sc.a.Group,{controlId:"others",className:"mb-0",children:[Object(n.jsx)(sc.a.Label,{as:"h5",children:"Co-Leader(s)"}),Object(n.jsx)(xr,{options:g?g.map((function(e){return{value:e._id,label:e.name}})):[],value:Rt?Rt.map((function(e){return{value:e.id,label:e.value}})):[],setValue:Pt,multi:!0,disabled:!Et})]})}),Object(n.jsx)(nc.a,{xs:12,md:4,children:Object(n.jsx)(kr,{label:"Others contacts",id:"others-contacts",placeholder:"email1@mail.com;email2@mail.com",value:Xe,onChange:He,required:!1,editRequest:Et,formInline:!1})})]})}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(Ur,{label:"Description",id:"staffing-description",editRequest:Et,required:!0,placeholder:"Please describe the mission context",value:K,onChange:V,rows:3})}),Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsx)("h5",{children:"Sheduling"}),Object(n.jsxs)(ac.a,{className:"align-items-end",children:[Object(n.jsx)(nc.a,{children:Object(n.jsx)(Ir,{label:"Proposal",id:"proposal-date",placeholder:"proposal date",value:J,onChange:Z,required:!0,editMode:Et})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(Ir,{label:"Presentation",id:"presentation-date",placeholder:"presentation date",value:te,onChange:ae,required:!0,editMode:Et})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(Ir,{label:"Start",id:"start-date",placeholder:"start date",value:re,onChange:se,required:!0,editMode:Et})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(Dr,{label:"duration (month)",placeholder:"duration",min:0,step:.5,value:qe,onChange:Ge,required:!0,editRequest:Et})})]})]}),Object(n.jsx)(pc.a.Item,{children:Object(n.jsxs)(ac.a,{children:[Object(n.jsx)(nc.a,{xs:12,md:8,children:Object(n.jsx)(Ur,{label:"Staffing instructions",id:"staffing-instructions",editRequest:Et,required:!0,placeholder:"Please describe your staffing request",value:ve,onChange:ye,rows:3})}),Object(n.jsx)(nc.a,{xs:12,md:4,children:Object(n.jsx)(Or,{editRequest:!0,label:"Status",id:"sr-status",value:Ce,onChange:function(e){Ne(e),Lt(!0)},required:!0,options:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Ha.map((function(e){var t=e.name;return Object(n.jsx)("option",{value:t,children:t},t)}))]})})})]})}),t.params.id&&Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsx)("h5",{children:"Staffing decision"}),ct&&Object(Gc.a)(new Set(ct.map((function(e){return e.priority})))).sort().map((function(e){return Object(n.jsx)(pc.a.Item,{children:Object(n.jsxs)(ac.a,{children:[Object(n.jsx)(nc.a,{sm:1,children:Object(n.jsx)(ac.a,{className:"my-1",children:Object(n.jsx)(nc.a,{children:e})})}),Object(n.jsx)(nc.a,{sm:11,children:ct.filter((function(t){return t.priority===e})).map((function(e){return Object(n.jsxs)(ac.a,{className:"my-1",children:[Object(n.jsx)(nc.a,{sm:10,children:Object(n.jsx)(zc.a,{placement:"top",trigger:"click",overlay:Object(n.jsxs)(Cr.a,{id:"popover-others-staffs",style:{maxWidth:"40%"},children:[Object(n.jsx)(Cr.a.Title,{id:"contained-modal-title-vcenter",children:"Others staffs"}),Object(n.jsx)(Cr.a.Content,{children:Object(n.jsx)(Pc,{history:a,consultantId:e.idConsultant._id,onNavigate:function(){return""},displayedDeal:t.params.id})})]}),children:Object(n.jsxs)("div",{children:[Object(n.jsx)("strong",{children:"".concat(e.responsability,": ")}),"".concat(Wt(e.idConsultant.name)),Object(n.jsx)("i",{children:" (".concat(e.information,")")})]})})}),Object(n.jsxs)(nc.a,{sm:2,className:"px-0",children:[Object(n.jsx)(ec,{access:"editStaff",children:Object(n.jsx)(ic.a,{onClick:function(){mt(e.idConsultant),vt({information:e.information,priority:e.priority,responsability:e.responsability}),bt(!0)},variant:"secondary",className:"text-center mx-1",size:"sm",children:Object(n.jsx)("i",{className:"fas fa-edit"})})}),Object(n.jsx)(ec,{access:"editStaff",children:Object(n.jsx)(ic.a,{onClick:function(){return function(e){var t=Object(Er.a)(Array,Object(Gc.a)(ct));t=t.filter((function(t){return t.idConsultant._id!==e})),rt(t),Lt(!0)}(e.idConsultant._id)},variant:"danger",className:"text-center mx-1",size:"sm",children:Object(n.jsx)("i",{className:"fas fa-times"})})})]})]},e.idConsultant._id)}))})]},e)},e)}))]}),!t.params.id&&Object(n.jsx)(ac.a,{className:"mt-3",children:Object(n.jsx)(nc.a,{className:"text-right",children:Object(n.jsx)(ic.a,{type:"submit",variant:"primary",children:o?Object(n.jsx)(jc,{}):"Submit staffing"})})}),x&&t.params.id&&Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(ac.a,{className:"my-1",children:Object(n.jsxs)(nc.a,{children:[Object(n.jsx)("strong",{children:"Last update at: "}),x.updatedAt.substring(0,19).replace("T"," "),Object(n.jsxs)(ac.a,{className:"align-items-center my-3",children:[Object(n.jsx)(nc.a,{xs:11,children:Object(n.jsx)(sc.a.Group,{controlId:"comment",className:"mb-0",children:Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"Add a comment",value:Ve||"",onChange:function(e){return Ye(e.target.value)},onKeyUp:function(e){return"Enter"===e.key&&Yt()}})})}),Object(n.jsx)(nc.a,{xs:1,children:Object(n.jsx)(ic.a,{variant:"primary",onClick:function(){return Yt()},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-plus"})})})]}),Object(n.jsx)(pc.a,{className:"py-3",children:ke&&ke.map((function(e,t){return Object(n.jsxs)(pc.a.Item,{className:"mb-0 py-2",children:[Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:Object(n.jsx)(sc.a.Control,{type:"text",value:e.message,readOnly:!0})})}),Object(n.jsx)("p",{style:{textAlign:"right",marginBottom:"0"},children:Object(n.jsxs)("i",{children:["By ",e.sender.name," the ",e.date.substring(0,19).replace("T"," at "),"  ",e.sender._id===s._id&&Object(n.jsx)(ic.a,{size:"sm",variant:"ligth",className:"text-danger mx-0",onClick:function(){return function(e){var t=ke.slice();t=t.filter((function(t){return t.date!==e})),we(t),Lt(!0)}(e.date)},children:"--delete--"})]})})]},t)}))}),Object(n.jsx)("strong",{children:"Created at: "}),x.createdAt.substring(0,19).replace("T"," ")," ",Object(n.jsx)("br",{})]})})})]})]})]}),t.params.id&&Object(n.jsx)(yc,{title:"Availabilities",close:!1,children:Object(n.jsx)(vr,{start:Ht,end:Kt,mode:"staffing",addStaffHandler:Vt,history:a})})]})},Pr=function(e){var t=e.history,a=Object(i.b)(),r=Object(c.useState)(10),s=Object(rc.a)(r,2),l=s[0],o=s[1],d=Object(c.useState)(1),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(""),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)([]),f=Object(rc.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)("default"),S=Object(rc.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(""),T=Object(rc.a)(N,2),A=T[0],L=T[1],_=Object(c.useState)(""),I=Object(rc.a)(_,2),D=I[0],k=I[1],w=Object(i.c)((function(e){return e.userLogin})).userInfo,U=Object(i.c)((function(e){return e.skillList})),R=U.loading,P=U.skills,M=U.pages,F=U.page,q=U.count,G=Object(i.c)((function(e){return e.skillDelete})),z=G.error,B=G.success,X=Object(i.c)((function(e){return e.skillCreate})),H=X.loading,Q=X.error,K=X.success,V=Object(i.c)((function(e){return e.consultantAllSkills})),Y=V.loading,W=V.skills;Object(c.useEffect)((function(){w&&["admin","coordinator"].includes(w.profil.profil)?a(fr("",O,j,l)):t.push("/login")}),[a,t,w,"",O,j,l]),Object(c.useEffect)((function(){B&&a(fr("",O,j,l))}),[a,B]),Object(c.useEffect)((function(){K&&a(fr("",O,j,l))}),[a,K]),Object(c.useEffect)((function(){if(W){var e=W.map((function(e){return e.category}));e=Object(Gc.a)(new Set(e)),v(e)}else Y||a(Ic())}),[a,W,Y]);var J=function(e){var t;window.confirm("Are you sure to delete skill: ".concat(e.name," ?"))&&a((t=e._id,function(){var e=Object(Kn.a)(Qn.a.mark((function e(a,n){var c,r,s;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:oa}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},e.next=6,Yn.a.delete("/api/skills/".concat(t),s);case 6:a({type:da}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:ua,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(yc,{title:"Create Skills",close:!0,children:Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(ac.a,{className:"mt-3",children:Object(n.jsx)(nc.a,{children:Object(n.jsxs)(sc.a,{onSubmit:function(e){var t;e.preventDefault(),a((t={category:E,name:A,description:D},function(){var e=Object(Kn.a)(Qn.a.mark((function e(a,n){var c,r,s,i,l;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:ba}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},e.next=6,Yn.a.post("/api/skills",t,s);case 6:i=e.sent,l=i.data,a({type:ha,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:pa,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))},children:[Object(n.jsxs)(sc.a.Row,{children:[Object(n.jsx)(nc.a,{md:3,children:Object(n.jsx)(sc.a.Group,{controlId:"skillCategory",children:Object(n.jsxs)(sc.a.Control,{as:"select",value:E||"default",onChange:function(e){return C(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"default",children:"Please Select"}),g&&g.map((function(e,t){return Object(n.jsx)("option",{value:e,onChange:function(e){C(e.target.value)},children:e},t)}))]})})}),Object(n.jsx)(nc.a,{md:3,children:Object(n.jsx)(sc.a.Group,{controlId:"name-skill",children:Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"Skill",value:A&&A,onChange:function(e){return L(e.target.value)},disabled:"default"===E,required:!0})})}),Object(n.jsx)(nc.a,{md:4,children:Object(n.jsx)(sc.a.Group,{controlId:"description-skill",children:Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"Skill description",value:D&&D,onChange:function(e){return k(e.target.value)},disabled:"default"===E,required:!0})})}),Object(n.jsx)(nc.a,{className:"text-right",children:Object(n.jsx)(ic.a,{type:"submit",variant:"primary",block:!0,children:H?Object(n.jsx)(jc,{}):"Add"})})]}),Q&&Object(n.jsx)(dc,{variant:"danger",children:Q})]})})})})}),Object(n.jsx)(yc,{title:"Search Skills",close:!1,children:Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsxs)(ac.a,{className:"mt-3",children:[Object(n.jsx)(nc.a,{xs:6,md:2,children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{type:"text",className:"mb-3",placeholder:"Search skill",value:O&&O,onChange:function(e){return m(e.target.value)}})})}),Object(n.jsx)(nc.a,{xs:6,md:8,children:Object(n.jsx)(sc.a.Control,{plaintext:!0,readOnly:!0,value:q?"".concat(q," skills found"):"0 skills found"})}),Object(n.jsx)(nc.a,{xs:6,md:2,children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{as:"select",id:"number-c",className:"mb-3",value:l&&l,onChange:function(e){return o(e.target.value)},children:[5,10,15,20,50].map((function(e){return Object(n.jsxs)("option",{value:e,children:[e," / page"]},e)}))})})})]}),P&&0===P.length?Object(n.jsx)(dc,{variant:"information",children:"You have not access to these information"}):R?Object(n.jsx)(jc,{}):z?Object(n.jsx)(dc,{variant:"danger",children:z}):Object(n.jsxs)(Sc.a,{responsive:!0,hover:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"Category"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Skill"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Description"}),Object(n.jsx)("th",{className:"align-middle text-light"})]})}),Object(n.jsx)("tbody",{children:P&&P.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:e.category}),Object(n.jsx)("td",{className:"align-middle",children:e.name}),Object(n.jsx)("td",{className:"align-middle",children:e.description}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(ic.a,{variant:"danger",onClick:function(){return J(e)},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-times"})})})]},e._id)}))})]}),Object(n.jsxs)(er.a,{children:[Object(n.jsx)(er.a.Prev,{onClick:function(){return b(F-1)},disabled:1===F}),Object(Gc.a)(Array(M).keys()).map((function(e){return[0,1,M-2,M-1].includes(e)?Object(n.jsx)(er.a.Item,{active:e+1===F,onClick:function(){a(fr("",O,e+1,l)),b(e+1)},children:e+1},e+1):M>4&&2===e&&Object(n.jsx)(er.a.Ellipsis,{},e+1)})),Object(n.jsx)(er.a.Next,{onClick:function(){return b(F+1)},disabled:F===M})]})]})})]})},Mr=a(82),Fr=function(e){var t=Object(i.b)(),a=Object(c.useState)(0),r=Object(rc.a)(a,2),s=r[0],l=r[1],o=Object(i.c)((function(e){return e.pxxUploadFile})),d=o.loading,u=o.error,j=o.path,b=Object(i.c)((function(e){return e.updatePxx})),h=b.loading,p=b.error,O=b.message;return Object(n.jsxs)(tr.a,Object(Ne.a)(Object(Ne.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(n.jsx)(tr.a.Header,{closeButton:!0,children:Object(n.jsx)(ac.a,{className:"align-items-center",children:Object(n.jsx)(nc.a,{className:"text-center",children:Object(n.jsx)(tr.a.Title,{id:"contained-modal-title-vcenter",children:"Import Pxx from Pxx directory"})})})}),Object(n.jsxs)(tr.a.Body,{children:[Object(n.jsxs)(ac.a,{className:"mb-3",children:[Object(n.jsx)(nc.a,{children:Object(n.jsx)(ic.a,{className:s>=0?"text-primary":"text-secondary",onClick:function(){return l(0)},variant:"ligth",disabled:s<0,children:Object(n.jsx)("strong",{children:"1-Guidelines"})})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(ic.a,{className:s>=1?"text-primary":"text-secondary",onClick:function(){return l(1)},variant:"ligth",disabled:s<1,children:Object(n.jsx)("strong",{children:"2-Upload in App"})})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(ic.a,{className:s>=2?"text-primary":"text-secondary",onClick:function(){return l(2)},variant:"ligth",disabled:s<2,children:Object(n.jsx)("strong",{children:"3-Start update"})})}),Object(n.jsx)(nc.a,{children:Object(n.jsx)(ic.a,{className:s>=3?"text-primary":"text-secondary",onClick:function(){return l(3)},variant:"ligth",disabled:s<3,children:Object(n.jsx)("strong",{children:"4-Result"})})})]}),Object(n.jsx)(ac.a,{className:"align-items-center",children:Object(n.jsxs)(nc.a,{children:[0===s&&Object(n.jsx)(ac.a,{children:Object(n.jsxs)(nc.a,{children:[Object(n.jsx)("h4",{children:"Process to upload pxx and update availabilities"}),Object(n.jsx)("p",{children:"In the next steps you will be invit to"}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:"Select your Pxx storage directory"}),Object(n.jsx)("li",{children:"Wait untill all Pxx files are uploaded"}),Object(n.jsx)("li",{children:"Start the backend calculation to update availabilities"}),Object(n.jsx)("li",{children:"Check the results and if asked proceed to corrections"})]})]})}),1===s&&Object(n.jsx)(ac.a,{className:"align-items-center",children:Object(n.jsxs)(nc.a,{className:"text-center",children:[Object(n.jsx)("h4",{children:"Upload your file here"}),d?Object(n.jsx)(jc,{}):Object(n.jsx)("input",{className:"my-3",type:"file",name:"file",onChange:function(e){for(var a=[],n=0;n<e.target.files.length;n++){var c=e.target.files[n];if(c.name.match(/^p[A-Za-z]+-[0-9]{2}.xlsb|^p[A-Za-z]+-arrivees.xlsb/)){var r=new FormData;r.append("file",c),a.push(r)}}t(function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l,o,d,u;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a({type:F}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-Type":"application/vnd.ms-excel",Authorization:"Bearer ".concat(r.token)}},i="",l=0;case 6:if(!(l<e.length)){t.next=16;break}return o=e[l],t.next=10,Yn.a.post("/api/upload/pxx",o,s);case 10:d=t.sent,u=d.data,i=u;case 13:l++,t.next=6;break;case 16:a({type:q,payload:i}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),a({type:G,payload:{message:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message}});case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))},webkitdirectory:"true",directory:"true",multiple:!0}),u&&Object(n.jsx)(dc,{variant:"danger",children:u})]})}),2===s&&(j?Object(n.jsx)(ac.a,{children:Object(n.jsxs)(nc.a,{className:"text-center",children:[Object(n.jsx)("h4",{children:"Do you want to update availabilities ?"}),h?Object(n.jsx)(jc,{}):Object(n.jsx)(ic.a,{variant:"primary",className:"m-3",onClick:function(){j&&t(function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:B}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.put("/api/pxx/admin/line-import-wk",e,s);case 6:i=t.sent,l=i.data,a({type:X,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:H,payload:{message:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message}});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(j))},children:"Update"}),Object(n.jsx)("p",{children:"Process could take a few minute"}),p&&Object(n.jsx)(dc,{variant:"danger",children:p})]})}):Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:"Something wrong retry step 2"})})),3===s&&Object(n.jsx)(sc.a.Control,{as:"textarea",rows:10,value:O&&O,readOnly:!0})]})})]}),Object(n.jsxs)(tr.a.Footer,{children:[3===s&&Object(n.jsx)(ic.a,{onClick:e.onHide,children:"Close"}),s<3&&Object(n.jsx)(ic.a,{variant:"success",onClick:function(){return s+1<=3&&l(s+1)},disabled:3===s||1===s&&!j||2===s&&!O,children:"Next"})]})]}))},qr=$c.a.ExcelFile,Gr=$c.a.ExcelFile.ExcelSheet,zr=$c.a.ExcelFile.ExcelColumn,Br=function(e){var t=e.history,a=e.match,r=Object(i.b)(),s=a.params.id,l=Object(c.useState)(10),o=Object(rc.a)(l,2),d=o[0],u=o[1],j=Object(c.useState)(1),b=Object(rc.a)(j,2),h=b[0],p=b[1],O=Object(c.useState)(""),m=Object(rc.a)(O,2),x=m[0],f=m[1],g=Object(c.useState)(""),v=Object(rc.a)(g,2),y=v[0],S=v[1],E=Object(c.useState)([]),C=Object(rc.a)(E,2),N=C[0],T=C[1],A=Object(c.useState)(0),L=Object(rc.a)(A,2),_=L[0],I=L[1],D=Object(c.useState)(!1),k=Object(rc.a)(D,2),w=k[0],M=k[1],F=Object(c.useState)([]),q=Object(rc.a)(F,2),G=q[0],z=q[1],B=Object(c.useState)(0),X=Object(rc.a)(B,2),H=X[0],Q=X[1],K=Object(c.useState)(0),V=Object(rc.a)(K,2),Y=V[0],W=V[1],J=Object(c.useState)(0),Z=Object(rc.a)(J,2),$=Z[0],ee=Z[1],te=Object(c.useState)(!1),ae=Object(rc.a)(te,2),ne=ae[0],ce=ae[1],re=Object(i.c)((function(e){return e.userLogin})).userInfo,se=Object(i.c)((function(e){return e.pxxAllList})),ie=se.loading,le=se.pxxs,oe=se.pages,de=se.page,ue=se.count,je=Object(i.c)((function(e){return e.pxxImportLine})),be=je.loading,he=je.error,pe=je.success,Oe=je.updatedLine;Object(c.useEffect)((function(){re?w||r(xc(re.consultantProfil.practice,s,x,d,h)):t.push("/login")}),[r,t,re,s,x,h,d,w]),Object(c.useEffect)((function(){if(le){var e=le.map((function(e){return{CONSULTANT:e.name.name,MATRICULE:e.name.matricule,PRACTICE:e.name.practice,CDM_MATRICULE:e.name.cdmId&&e.name.cdmId.matricule,CDM_NAME:e.name.cdmId&&e.name.cdmId.name,VALUED:e.name.valued?e.name.valued.substring(0,10):"",ARRIVAL:e.name.arrival?e.name.arrival.substring(0,10):"",LEAVING:e.name.leaving?e.name.leaving.substring(0,10):"",MONTH:e.month.name,PROD:e.prodDay,NOT_PROD:e.notProdDay,HOLIDAYS:e.leavingDay,AVAILABLE:e.availableDay}}));S(e)}}),[le,S]);var me=function(e){for(var t,a=N.slice(),n=0;n<a.length;n++)a[n].MATRICULE===e.MATRICULE&&(a[n].status="loading");T(a),r((t=e,function(){var e=Object(Kn.a)(Qn.a.mark((function e(a,n){var c,r,s,i,l;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:U}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},e.next=6,Yn.a.put("/api/pxx/admin/line-import",t,s);case 6:i=e.sent,l=i.data,a({type:R,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:P,payload:{message:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(c.useEffect)((function(){w&&(N.length>0&&"imported"!==N[_].status?me(N[_]):_<N.length-1&&I(_+1))}),[w,_]),Object(c.useEffect)((function(){if(pe){for(var e=N.slice(),t=0;t<e.length;t++)e[t].MATRICULE===Oe.updatedMatricule&&(e[t].status="imported");T(e),w&&(_<N.length-1?I(_+1):M(!1))}}),[pe]),Object(c.useEffect)((function(){if(he){for(var e=N.slice(),t=0;t<e.length;t++)e[t].MATRICULE===he.message.matricule&&(e[t].status="error");T(e);var a=G.slice();a.push({message:he.message.display}),z(a),w&&(_<N.length-1?I(_+1):(M(!1),I(0)))}}),[he]),Object(c.useEffect)((function(){Q(N.filter((function(e){return"imported"===e.status})).length),W(N.filter((function(e){return"error"===e.status})).length),ee(N.length)}),[N,he,pe]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Uc,{}),Object(n.jsx)(Fr,{show:ne,onHide:function(){return ce(!1)}}),Object(n.jsxs)(ac.a,{children:[Object(n.jsx)(nc.a,{className:"text-left",children:Object(n.jsx)(ic.a,{className:"mb-3",onClick:function(){return t.go(-1)},children:"Go Back"})}),Object(n.jsx)(nc.a,{className:"text-right",children:Object(n.jsx)(ec,{access:"updatePxxFromPxx",children:Object(n.jsx)(ic.a,{variant:"primary",onClick:function(){return ce(!0)},children:"Update from Pxx folder"})})})]}),Object(n.jsxs)(ac.a,{className:"align-items-center pt-3",children:[Object(n.jsx)(nc.a,{md:5,children:"".concat(H," Pxx line imported / ").concat($," - ").concat(Y," lines with error")}),Object(n.jsx)(nc.a,{ws:6,md:2,className:"text-right",children:y&&Object(n.jsx)(qr,{element:Object(n.jsxs)(ic.a,{variant:"primary",children:[Object(n.jsx)("i",{className:"fas fa-download"}),"  Download"]}),children:Object(n.jsxs)(Gr,{data:y,name:"pxxsheet",children:[Object(n.jsx)(zr,{label:"MATRICULE",value:"MATRICULE"}),Object(n.jsx)(zr,{label:"(PRACTICE)",value:"PRACTICE"}),Object(n.jsx)(zr,{label:"MONTH",value:"MONTH"}),Object(n.jsx)(zr,{label:"PROD",value:"PROD"}),Object(n.jsx)(zr,{label:"NOT_PROD",value:"NOT_PROD"}),Object(n.jsx)(zr,{label:"HOLIDAYS",value:"HOLIDAYS"}),Object(n.jsx)(zr,{label:"(AVAILABLE)",value:"AVAILABLE"}),Object(n.jsx)(zr,{label:"(CDM_MATRICULE)",value:"CDM_MATRICULE"}),Object(n.jsx)(zr,{label:"(CDM_NAME)",value:"CDM_NAME"})]})})}),Object(n.jsx)(nc.a,{md:3,children:Object(n.jsx)(ec,{access:"uploadPxx",children:be?Object(n.jsx)(jc,{}):Object(n.jsx)(Jc,{setImportData:T,sheets:"1"})})}),Object(n.jsx)(nc.a,{md:2,className:"text-right",children:Object(n.jsxs)(ic.a,{variant:"primary",onClick:function(){return I(0),void M(!0)},disabled:!N.length>0,children:[Object(n.jsx)("i",{className:"fas fa-upload"})," ",w?Object(n.jsx)(jc,{}):"Import All Pxx"]})})]}),Object(n.jsx)(ac.a,{className:"pt-3",children:Object(n.jsx)(nc.a,{children:Object(n.jsxs)(Mr.a,{children:[Object(n.jsx)(Mr.a,{animated:w,now:100*H/$,variant:"primary"}),Object(n.jsx)(Mr.a,{animated:w,now:100*Y/$,variant:"danger"})]})})}),Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:G&&G.map((function(e,t){return Object(n.jsx)(dc,{variant:"warning",children:e.message},t)}))})}),Object(n.jsxs)(ac.a,{className:"mt-3",children:[Object(n.jsx)(nc.a,{xs:6,md:4,children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{type:"text",className:"mb-3",placeholder:"Search name",value:x&&x,onChange:function(e){return f(e.target.value)}})})}),Object(n.jsx)(nc.a,{xs:6,md:4,children:Object(n.jsx)(sc.a.Control,{plaintext:!0,readOnly:!0,value:ue?"".concat(ue," consultants found"):"0 consultant found"})}),Object(n.jsx)(nc.a,{xs:6,md:4,children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{as:"select",id:"number-c",className:"mb-3",value:d&&d,onChange:function(e){return u(e.target.value)},children:["All",5,10,15,20,50].map((function(e){return Object(n.jsx)("option",{value:"All"===e?1e4:e,children:"All"===e?"All (export)":"".concat(e," / page")},e)}))})})})]}),ie&&Object(n.jsx)(jc,{}),Object(n.jsxs)(Sc.a,{responsive:!0,hover:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"User name"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Matricule"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"CDM"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Month"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Arrival"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Leaving"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"PROD"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"NOT PROD"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"HOLIDAYS"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"AVAILABLE"})]})}),Object(n.jsx)("tbody",{children:le&&le.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)("b",{children:e.name.name&&e.name.name})}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)("b",{children:e.name.matricule&&e.name.matricule})}),Object(n.jsx)("td",{className:"align-middle",children:e.name.practice&&e.name.practice}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)("b",{children:e.name.cdmId&&e.name.cdmId.name})}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.month.name&&e.month.name}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.name.arrival&&e.name.arrival.toString().substring(0,10)}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.name.leaving?e.name.leaving.toString().substring(0,10):"-"}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.prodDay&&e.prodDay}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.notProdDay&&e.notProdDay}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.leavingDay&&e.leavingDay}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.availableDay&&e.availableDay})]},e._id)}))})]}),Object(n.jsxs)(er.a,{children:[Object(n.jsx)(er.a.Prev,{onClick:function(){return p(de-1)},disabled:1===de}),Object(Gc.a)(Array(oe).keys()).map((function(e){return[0,1,oe-2,oe-1].includes(e)?Object(n.jsx)(er.a.Item,{active:e+1===de,onClick:function(){r(xc(re.consultantProfil.practice,s,x,d,e+1)),p(e+1)},children:e+1},e+1):oe>4&&2===e&&Object(n.jsx)(er.a.Ellipsis,{},e+1)})),Object(n.jsx)(er.a.Next,{onClick:function(){return p(de+1)},disabled:de===oe})]})]})},Xr=function(e){var t=e.history,a=e.data,c=void 0===a?[]:a,r=e.filter,s=Object(i.b)(),l=function(e){var t;window.confirm("Are you sure to delete deal: ".concat(e.title," ?"))&&s((t=e._id,function(){var e=Object(Kn.a)(Qn.a.mark((function e(a,n){var c,r,s;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:La}),c=n(),r=c.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(r.token)}},e.next=6,Yn.a.delete("/api/deals/".concat(t),s);case 6:a({type:_a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:Ia,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()))},o=function(e){var t=e.split(" ");return 1===t.length?t[0]:t.map((function(e,t){return 0===t?e[0].toUpperCase()+".":e.toUpperCase()})).join(" ")};return Object(n.jsxs)(Sc.a,{responsive:!0,hover:!0,striped:!0,className:"mt-3",children:[Object(n.jsxs)("thead",{children:[Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"Title"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Contacts"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Company"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Status"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Probability"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Request"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Staff"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Start"}),Object(n.jsx)("th",{className:"align-middle text-light"}),Object(n.jsx)("th",{className:"align-middle text-light"})]}),Object(n.jsxs)("tr",{className:"table-ligth",children:[Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(sc.a.Group,{controlId:"filter-title",className:"mb-0",children:Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"Search title",value:r.searchTitle&&r.searchTitle,onChange:function(e){r.setSearchTitle(e.target.value)}})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(sc.a.Group,{controlId:"filter-practice",className:"mb-0",children:Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"Search practice",disabled:!0})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(sc.a.Group,{controlId:"filter-contact",className:"mb-0",children:Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"Search contact",value:r.searchContact&&r.searchContact,onChange:function(e){return r.setSearchContact(e.target.value)}})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(sc.a.Group,{controlId:"filter-company",className:"mb-0",children:Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"Search company",value:r.searchCompany&&r.searchCompany,onChange:function(e){return r.setSearchCompany(e.target.value)}})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(sc.a.Group,{controlId:"filter-status",className:"mb-0",children:Object(n.jsxs)(sc.a.Control,{as:"select",value:r.searchDealStatus&&r.searchDealStatus,onChange:function(e){r.setSearchDealStatus(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Ka.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name},e.name)}))]})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(sc.a.Group,{controlId:"filter-probability",className:"mb-0",children:Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"Search probability",disabled:!0})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(sc.a.Group,{controlId:"filter-request",className:"mb-0",children:Object(n.jsxs)(sc.a.Control,{as:"select",value:r.searchRequestStatus&&r.searchRequestStatus,onChange:function(e){r.setSearchRequestStatus(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Ha.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name},e.name)}))]})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(sc.a.Group,{controlId:"filter-staff",className:"mb-0",children:Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"Search staff",value:r.searchStaff&&r.searchStaff,onChange:function(e){return r.setSearchStaff(e.target.value)}})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(sc.a.Group,{controlId:"filter-start",className:"mb-0",children:Object(n.jsx)(sc.a.Control,{type:"text",placeholder:"Search start",disabled:!0})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",colSpan:2,children:Object(n.jsxs)(ic.a,{variant:"ligth",style:{color:"grey"},onClick:function(){r.setSearchTitle(""),r.setSearchCompany(""),r.setSearchContact(""),r.setSearchDealStatus(""),r.setSearchRequestStatus(""),r.setSearchStaff("")},children:[Object(n.jsx)("i",{className:"fas fa-minus-circle"}),"  Reset"]})})]})]}),Object(n.jsx)("tbody",{children:c&&c.deals.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)(zc.a,{placement:"bottom",overlay:Object(n.jsx)(Bc.a,{id:"button-tooltip-2",children:e.description}),children:Object(n.jsx)("td",{className:"align-middle",children:e.title})}),Object(n.jsxs)("td",{className:"align-middle text-center",children:[e.mainPractice," ",e.othersPractices&&e.othersPractices.length?"(".concat(e.othersPractices.join(", "),")"):""]}),Object(n.jsxs)("td",{className:"align-middle text-center",children:[e.contacts.primary?o(e.contacts.primary.name):"-"," ",e.contacts&&e.contacts.secondary&&e.contacts.secondary.length?"/ ("+e.contacts.secondary.map((function(e){return o(e.name.toString())})).join(", ")+")":""]}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.company}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.status}),Object(n.jsxs)("td",{className:"align-middle text-center",children:[e.probability," %"]}),Object(n.jsx)(zc.a,{placement:"bottom",overlay:Object(n.jsx)(Bc.a,{id:"button-tooltip-2",children:e.staffingRequest.instructions}),children:Object(n.jsx)("td",{className:"align-middle text-center",children:e.staffingRequest.requestStatus})}),Object(n.jsx)(zc.a,{placement:"bottom",overlay:Object(n.jsx)(Bc.a,{id:"button-tooltip-2",children:e.staffingDecision.staff.length>0?e.staffingDecision.staff.map((function(e){return{name:o(e.idConsultant.name),responsability:e.responsability,priority:e.priority}})).map((function(e,t){return Object(n.jsx)("div",{className:"text-left",children:"".concat(e.responsability,": ").concat(e.name," (").concat(e.priority,")")},t)})):"-"}),children:Object(n.jsx)("td",{className:"align-middle",children:e.staffingDecision.staff.length>0?"See":"-"})}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.startDate.substring(0,10)}),Object(n.jsx)("td",{className:"align-middle text-center",children:Object(n.jsx)(ic.a,{variant:"ligth",style:{color:"gray"},onClick:function(){return t.push("/staffing/".concat(e._id))},size:"md",children:Object(n.jsx)("i",{className:"fas fa-edit"})})}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(ic.a,{variant:"ligth",style:{color:"red"},onClick:function(){return l(e)},size:"md",children:Object(n.jsx)("i",{className:"fas fa-times"})})})]},e._id)}))})]})},Hr=$c.a.ExcelFile,Qr=$c.a.ExcelFile.ExcelSheet,Kr=$c.a.ExcelFile.ExcelColumn,Vr=function(e){var t=e.history,a=Object(i.b)(),r=Object(c.useState)(""),s=Object(rc.a)(r,1)[0],l=Object(c.useState)(""),o=Object(rc.a)(l,1)[0],d=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).title?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).title:""),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).company?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).company:""),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).contact?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).contact:""),f=Object(rc.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).dealStatus?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).dealStatus:""),S=Object(rc.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).requestStatus?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).requestStatus:""),T=Object(rc.a)(N,2),A=T[0],L=T[1],_=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).myDeals?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).myDeals:""),I=Object(rc.a)(_,2),D=I[0],k=I[1],w=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).searchStaff?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).searchStaff:""),U=Object(rc.a)(w,2),R=U[0],P=U[1],M=Object(c.useState)(7),F=Object(rc.a)(M,2),q=F[0],G=F[1],z=Object(c.useState)(30),B=Object(rc.a)(z,2),X=B[0],H=B[1],Q=Object(c.useState)(7),K=Object(rc.a)(Q,2),V=K[0],Y=K[1],W=Object(c.useState)(7),J=Object(rc.a)(W,2),Z=J[0],$=J[1],ee=Object(c.useState)(!1),te=Object(rc.a)(ee,2),ae=te[0],ne=te[1],ce=Object(c.useState)(["Waiting staffing","Updated (".concat(q,"d)"),"Not updated (".concat(X,"d)"),"New deal (".concat(V,"d)"),"Won (".concat(Z,"d)"),"All"]),re=Object(rc.a)(ce,1)[0],se=Object(c.useState)(localStorage.getItem("ManageDealsScreen.defaultTab")?localStorage.getItem("ManageDealsScreen.defaultTab"):re[0]),ie=Object(rc.a)(se,2),le=ie[0],oe=ie[1],de=Object(c.useState)([]),ue=Object(rc.a)(de,2),je=ue[0],be=ue[1],he=Object(c.useState)(!0),pe=Object(rc.a)(he,2),Oe=pe[0],me=pe[1],xe=Object(c.useState)(""),fe=Object(rc.a)(xe,2),ge=fe[0],ve=fe[1],ye=Object(c.useState)([]),Se=Object(rc.a)(ye,2),Ee=Se[0],Ce=Se[1],Ne=Object(i.c)((function(e){return e.userLogin})).userInfo,Te=Object(i.c)((function(e){return e.dealAllList})),Ae=Te.error,Le=Te.loading,_e=Te.deals,Ie=Object(i.c)((function(e){return e.dealDelete})),De=Ie.error,ke=Ie.success,we=Object(i.c)((function(e){return e.dealsImportMass})),Ue=we.loading,Re=we.success;return Object(c.useEffect)((function(){Ne?(a(Fc({title:j,contact:g,company:O,status:E,request:A,staff:R,filterMy:D},o,s,"active")),localStorage.setItem("ManageDealsScreen.filter",JSON.stringify({title:j,company:O,contact:g,dealStatus:E,requestStatus:A,searchStaff:R,myDeals:D})),me(!1)):t.push("/login")}),[a,t,Ne,j,O,g,E,A,R,o,s,Oe,D,Re]),Object(c.useEffect)((function(){_e&&function(){var e=new Date(Date.now());e.setUTCDate(e.getUTCDate()-q);var t=new Date(Date.now());t.setUTCDate(t.getUTCDate()-X);var a=new Date(Date.now());a.setUTCDate(a.getUTCDate()-V);var n=new Date(Date.now());n.setUTCDate(n.getUTCDate()-Z);for(var c=[],r=0;r<re.length;r++){var s=[];!function(){switch(re[r]){case re[0]:var c=Ha.filter((function(e){return!0===e.staff})),i=Ka.filter((function(e){return"onTrack"===e.display||"win"===e.display}));s={deals:_e.filter((function(e){return c.map((function(e){return e.name})).includes(e.staffingRequest.requestStatus)&&i.map((function(e){return e.name})).includes(e.status)})),param:null,setParam:null};break;case re[1]:s={deals:_e.filter((function(t){return new Date(t.updatedAt)>=e})),param:q,setParam:G};break;case re[2]:s={deals:_e.filter((function(e){return new Date(e.updatedAt)<=t})),param:X,setParam:H};break;case re[3]:s={deals:_e.filter((function(e){return new Date(e.createdAt)>=a})),param:V,setParam:Y};break;case re[4]:s={deals:_e.filter((function(e){return new Date(e.wonDate)>=n})),param:Z,setParam:$};break;case re[5]:s={deals:_e,param:null,setParam:null};break;default:s=[]}}(),c.push({filter:re[r],data:s,count:s.deals.length})}be(c)}()}),[_e,re,V,X,q,Z]),Object(c.useEffect)((function(){if(_e){var e=_e.map((function(e){return{TITLE:e.title,COMPANY:e.company,PRACTICE:e.mainPractice,LEADER:e.contacts&&e.contacts.primary&&e.contacts.primary.name,"CO-LEADER":e.contacts&&e.contacts.secondary&&e.contacts.secondary.map((function(e){return e.name})).join(""),OTHERS_PRACTICES:e.othersPractices&&e.othersPractices.join(","),STATUS:e.status,DESCRIPTION:e.description,START:e.startDate.substring(0,10),DURATION:e.duration,REQUEST_STATUS:e.staffingRequest.requestStatus,REQUEST_DETAILS:e.staffingRequest.instructions,DECISION:e.staffingDecision.staff&&e.staffingDecision.staff.map((function(e){return"".concat(e.responsability,": ").concat(e.idConsultant.name," (").concat(e.priority,")}")})).join("\n")}}));ve(e)}}),[_e,ve]),Object(c.useEffect)((function(){var e;Ee.length>0&&a((e=Ee,function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ga}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.put("/api/deals/admin/mass-import",e,s);case 6:i=t.sent,l=i.data,a({type:za,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Ba,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[a,Ee]),Object(c.useEffect)((function(){if(ke){var e={title:j,mainPractice:Ne.consultantProfil.practice,othersPractices:Ne.consultantProfil.practice,contact:g,company:O,status:E,request:A,staff:R,filterMy:D};a(Fc(e,o,s))}}),[a,ke]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Uc,{}),De&&Object(n.jsx)(dc,{variant:"danger",children:De}),Ae&&Object(n.jsx)(dc,{variant:"danger",children:Ae}),Le&&Object(n.jsx)(jc,{}),Object(n.jsxs)(yc,{title:"Manage Deals",close:!1,children:[Object(n.jsxs)(ac.a,{className:"mt-3",children:[Object(n.jsx)(nc.a,{xs:0,md:7}),Object(n.jsx)(nc.a,{xs:6,md:3,children:Object(n.jsx)(ec,{access:"uploadDeals",children:Ue?Object(n.jsx)(jc,{}):Object(n.jsx)(Jc,{setImportData:Ce})})}),Object(n.jsx)(nc.a,{ws:6,md:2,children:ge&&Object(n.jsx)(Hr,{element:Object(n.jsxs)(ic.a,{variant:"primary",children:[Object(n.jsx)("i",{className:"fas fa-download"}),"  Download"]}),children:Object(n.jsxs)(Qr,{data:ge,name:"dealsSheet",children:[Object(n.jsx)(Kr,{label:"TITLE",value:"TITLE"}),Object(n.jsx)(Kr,{label:"COMPANY",value:"COMPANY"}),Object(n.jsx)(Kr,{label:"PRACTICE",value:"PRACTICE"}),Object(n.jsx)(Kr,{label:"LEADER",value:"LEADER"}),Object(n.jsx)(Kr,{label:"CO-LEADER",value:"CO-LEADER"}),Object(n.jsx)(Kr,{label:"OTHERS_PRACTICES",value:"OTHERS_PRACTICES"}),Object(n.jsx)(Kr,{label:"STATUS",value:"STATUS"}),Object(n.jsx)(Kr,{label:"DESCRIPTION",value:"DESCRIPTION"}),Object(n.jsx)(Kr,{label:"START",value:"START"}),Object(n.jsx)(Kr,{label:"DURATION",value:"DURATION"}),Object(n.jsx)(Kr,{label:"REQUEST_STATUS",value:"REQUEST_STATUS"}),Object(n.jsx)(Kr,{label:"REQUEST_DETAILS",value:"REQUEST_DETAILS"}),Object(n.jsx)(Kr,{label:"DECISION",value:"DECISION"})]})})})]}),Object(n.jsx)(pc.a.Item,{className:"p-0 mt-3",children:Object(n.jsx)(br.a,{id:"uncontrolled-tab-example",variant:"pills",activeKey:le,onSelect:function(e){oe(e),localStorage.setItem("ManageDealsScreen.defaultTab",e)},children:je.length>0&&je.map((function(e,a){return Object(n.jsxs)(hr.a,{className:"mx-3",eventKey:"".concat(e.filter),title:Object(n.jsxs)(ac.a,{className:"align-text-middle",children:[Object(n.jsx)("span",{className:"ml-3 align-middle",children:e.filter.split(/[0-9]+/i)[0]}),ae?Object(n.jsx)("span",{children:e.data.param&&Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{as:"select",value:e.data.param,onChange:function(t){return e.data.setParam(t.target.value)},children:Object(Gc.a)(new Array(30).keys()).map((function(e){return Object(n.jsx)("option",{value:e+1,children:e+1},e+1)}))})})}):e.data.param,Object(n.jsx)("span",{children:e.filter.split(/[0-9]+/i)[1]&&e.filter.split(/[0-9]+/i)[1]}),Object(n.jsx)("span",{className:"mr-3",children:" > "+e.count})]}),children:[Object(n.jsx)(ac.a,{className:"mt-3",children:Object(n.jsxs)(nc.a,{className:"text-left",children:[Object(n.jsxs)(ic.a,{variant:"ligth",onClick:function(){return ne(!ae)},children:[Object(n.jsx)("i",{className:"fas fa-edit"}),"  Configure tabs"]}),Object(n.jsxs)(ic.a,{variant:"ligth",onClick:function(){return t.push("/admin/deals/history")},children:[Object(n.jsx)("i",{className:"fas fa-history"}),"  History"]}),Object(n.jsx)(ic.a,{variant:"ligth",onClick:function(){k(!D),me(!0)},children:D?Object(n.jsxs)("div",{children:[Object(n.jsx)("i",{className:"fas fa-backspace"}),"  Get all deals"]}):Object(n.jsxs)("div",{children:[Object(n.jsx)("i",{className:"fas fa-filter"}),"  Filter my deals"]})}),Object(n.jsxs)(ic.a,{variant:"ligth",onClick:function(){return window.confirm("Soon available")},children:[Object(n.jsx)("i",{className:"fas fa-project-diagram"}),"  Business flows"]}),Object(n.jsx)(ec,{access:"sendStaffingDecision",children:Object(n.jsxs)(ic.a,{variant:"ligth",className:"text-black align-right",onClick:function(){return t.push("/admin/send")},children:[Object(n.jsx)("i",{className:"fas fa-envelope"}),"  Send staffing decisions"]})})]})}),Object(n.jsx)(Xr,{history:t,data:e.data,filter:{searchTitle:j,setSearchTitle:b,searchCompany:O,setSearchCompany:m,searchContact:g,setSearchContact:v,searchDealStatus:E,setSearchDealStatus:C,searchRequestStatus:A,setSearchRequestStatus:L,searchStaff:R,setSearchStaff:P}})]},a)}))})})]})]})},Yr=$c.a.ExcelFile,Wr=$c.a.ExcelFile.ExcelSheet,Jr=$c.a.ExcelFile.ExcelColumn,Zr=function(e){var t=e.history,a=Object(i.b)(),r=Object(c.useState)(""),s=Object(rc.a)(r,1)[0],l=Object(c.useState)(""),o=Object(rc.a)(l,1)[0],d=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).title?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).title:""),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).company?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).company:""),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).contact?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).contact:""),f=Object(rc.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).dealStatus?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).dealStatus:""),S=Object(rc.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).requestStatus?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).requestStatus:""),T=Object(rc.a)(N,2),A=T[0],L=T[1],_=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).searchStaff?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).searchStaff:""),I=Object(rc.a)(_,2),D=I[0],k=I[1],w=Object(c.useState)(Object(Gc.a)(new Array(5).keys()).map((function(e){return new Date(Date.now()).getFullYear()-e}))),U=Object(rc.a)(w,1)[0],R=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.defaultTab")?localStorage.getItem("DealsHistoryScreen.defaultTab"):U[0]),P=Object(rc.a)(R,2),M=P[0],F=P[1],q=Object(c.useState)([]),G=Object(rc.a)(q,2),z=G[0],B=G[1],X=Object(c.useState)(!0),H=Object(rc.a)(X,2),Q=H[0],K=H[1],V=Object(i.c)((function(e){return e.userLogin})).userInfo,Y=Object(i.c)((function(e){return e.dealAllList})),W=Y.error,J=Y.loading,Z=Y.deals,$=Object(i.c)((function(e){return e.dealDelete})),ee=$.error,te=$.success;return Object(c.useEffect)((function(){if(V){var e={title:j,mainPractice:V.consultantProfil.practice,othersPractices:V.consultantProfil.practice,contact:g,company:O,status:E,request:A,staff:D,filterMy:!1};a(Fc(e,o,s,"all")),localStorage.setItem("DealsHistoryScreen.filter",JSON.stringify({title:j,company:O,contact:g,dealStatus:E,requestStatus:A,searchStaff:D})),K(!1)}else t.push("/login")}),[a,t,V,j,O,g,E,A,D,o,s,Q]),Object(c.useEffect)((function(){if(Z){for(var e=[],t=function(t){var a=Z.filter((function(e){return e.updatedAt.substring(0,4)===U[t].toString()}));a={deals:a,param:null,setParam:null,exportExcel:a.map((function(e){return{TITLE:e.title,MAIN_PRACTICE:e.mainPractice,OTHERS_PRACTICES:e.othersPractices.join(", "),LEADER:e.contacts.primary?e.contacts.primary.name+" ("+e.contacts.primary.matricule+")":"","CO-LEADERS":e.contacts.secondary?e.contacts.secondary.map((function(e){return e.name+" ("+e.matricule+")"})).join(", "):"",COMPANY:e.company,STATUS:e.status,TYPE:e.type,DESCRIPTION:e.description,"PROPOSAL DATE":e.proposalDate?e.proposalDate.substring(0,10):"","PRESENTATION DATE":e.presentationDate?e.presentationDate.substring(0,10):"","START DATE":e.startDate?e.startDate.substring(0,10):"","WON DATE":e.wonDate?e.wonDate.substring(0,10):"",STAFF:e.staffingDecision.staff?e.staffingDecision.staff.map((function(e){return e.responsability+": "+e.idConsultant.name+" ("+e.idConsultant.matricule+")"})).join(", "):""}}))},e.push({filter:U[t],data:a,count:a.deals.length})},a=0;a<U.length;a++)t(a);B(e)}}),[Z,U]),Object(c.useEffect)((function(){if(te){var e={title:j,mainPractice:V.consultantProfil.practice,othersPractices:V.consultantProfil.practice,contact:g,company:O,status:E,request:A,staff:D,filterMy:!1};a(Fc(e,o,s))}}),[a,te]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Uc,{}),ee&&Object(n.jsx)(dc,{variant:"danger",children:ee}),W&&Object(n.jsx)(dc,{variant:"danger",children:W}),J&&Object(n.jsx)(jc,{}),Object(n.jsx)(yc,{title:"Manage Deals",close:!1,children:Object(n.jsx)(pc.a.Item,{className:"p-0 mt-3",children:Object(n.jsx)(br.a,{id:"uncontrolled-tab-example",variant:"pills",activeKey:M,onSelect:function(e){F(e),localStorage.setItem("DealsHistoryScreen.defaultTab",e)},children:z.length>0&&z.map((function(e,a){return Object(n.jsxs)(hr.a,{className:"mx-3",eventKey:"".concat(e.filter),title:e.filter+" ("+e.data.deals.length+")",children:[e.data.deals&&Object(n.jsx)(Yr,{element:Object(n.jsxs)(ic.a,{variant:"ligth",className:"mt-3",children:[Object(n.jsx)("i",{className:"fas fa-download"}),"  Download"]}),children:Object(n.jsxs)(Wr,{data:e.data.exportExcel,name:"dealsSheet",children:[Object(n.jsx)(Jr,{label:"TITLE",value:"TITLE"}),Object(n.jsx)(Jr,{label:"MAIN_PRACTICE",value:"MAIN_PRACTICE"}),Object(n.jsx)(Jr,{label:"OTHERS_PRACTICES",value:"OTHERS_PRACTICES"}),Object(n.jsx)(Jr,{label:"LEADER",value:"LEADER"}),Object(n.jsx)(Jr,{label:"CO-LEADERS",value:"CO-LEADERS"}),Object(n.jsx)(Jr,{label:"COMPANY",value:"COMPANY"}),Object(n.jsx)(Jr,{label:"STATUS",value:"STATUS"}),Object(n.jsx)(Jr,{label:"TYPE",value:"TYPE"}),Object(n.jsx)(Jr,{label:"DESCRIPTION",value:"DESCRIPTION"}),Object(n.jsx)(Jr,{label:"PROPOSAL DATE",value:"PROPOSAL DATE"}),Object(n.jsx)(Jr,{label:"PRESENTATION DATE",value:"PRESENTATION DATE"}),Object(n.jsx)(Jr,{label:"START DATE",value:"START DATE"}),Object(n.jsx)(Jr,{label:"WON DATE",value:"WON DATE"}),Object(n.jsx)(Jr,{label:"STAFF",value:"STAFF"})]})}),Object(n.jsx)(Xr,{history:t,data:e.data,filter:{searchTitle:j,setSearchTitle:b,searchCompany:O,setSearchCompany:m,searchContact:g,setSearchContact:v,searchDealStatus:E,setSearchDealStatus:C,searchRequestStatus:A,setSearchRequestStatus:L,searchStaff:D,setSearchStaff:k}})]},a)}))})})})]})},$r=function(e){var t=e.data,a=function(e){for(var t=Object(Gc.a)(new Set(e.map((function(e){return e.category})))),a=[],n=function(n){var c=e.filter((function(e){return e.category===t[n]}));a.push({frontAccessRules:c,category:t[n]})},c=0;c<t.length;c++)n(c);return[a,t]}(t.frontAccess),c=Object(rc.a)(a,2),r=c[0],s=c[1];return Object(n.jsx)(pc.a,{children:r&&r.map((function(e,a){return Object(n.jsx)(pc.a.Item,{className:"pt-3",children:Object(n.jsx)(es,{accessRules:e.frontAccessRules,category:e.category,categories:s,profilId:t._id})},a)}))})},es=function(e){var t=e.accessRules,a=e.category,c=e.categories,r=e.profilId,s={categories:c,modes:nn,datas:cn};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h4",{children:a&&a}),Object(n.jsx)(pc.a,{variant:"flush",children:Object(n.jsx)(pc.a.Item,{children:Object(n.jsxs)(ac.a,{className:"py-1 border-bottom bg-primary",children:[Object(n.jsx)(nc.a,{className:"text-white",xs:3,children:Object(n.jsx)("strong",{children:"TECHNICAL ID"})}),Object(n.jsx)(nc.a,{className:"text-white",xs:4,children:Object(n.jsx)("strong",{children:"LABEL"})}),Object(n.jsx)(nc.a,{className:"text-white",xs:2,children:Object(n.jsx)("strong",{children:"MODE"})}),Object(n.jsx)(nc.a,{className:"text-white",xs:2,children:Object(n.jsx)("strong",{children:"ACCESS"})}),Object(n.jsx)(nc.a,{xs:1,children:Object(n.jsx)("strong",{})})]})})}),t&&t.map((function(e,t){return Object(n.jsx)(pc.a,{variant:"flush",className:"border-bottom",children:Object(n.jsx)(pc.a.Item,{children:Object(n.jsx)(ts,{frontAccessItem:e,params:s,profilId:r})})},t)}))]})},ts=function(e){var t=e.frontAccessItem,a=e.params,r=e.profilId,s=Object(i.b)(),l=Object(c.useState)(t.id),o=Object(rc.a)(l,1)[0],d=Object(c.useState)(t.label),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(t.mode),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)(t.data),f=Object(rc.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)(!1),S=Object(rc.a)(y,2),E=S[0],C=S[1],N=Object(i.c)((function(e){return e.accessFrontUpdate})),T=N.error,A=N.success;Object(c.useEffect)((function(){A&&C(!1)}),[A]),Object(c.useEffect)((function(){T&&C(!1)}),[T]);return Object(n.jsx)(sc.a,{onSubmit:function(e){e.preventDefault(),C(!0),s(function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:$a}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.put("/api/access",e,s);case 6:i=t.sent,l=i.data,a({type:en,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:tn,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}({id:o,label:j,mode:O,data:g,profilId:r})),console.log("update to implement")},children:Object(n.jsxs)(sc.a.Row,{children:[Object(n.jsx)(nc.a,{xs:3,children:Object(n.jsx)(sc.a.Control,{type:"text",value:o&&o,plaintext:!0,readOnly:!0})}),Object(n.jsx)(nc.a,{xs:4,children:Object(n.jsx)(sc.a.Control,{type:"text",value:j&&j,onChange:function(e){return b(e.target.value)}})}),Object(n.jsx)(nc.a,{xs:2,children:Object(n.jsxs)(sc.a.Control,{as:"select",value:O&&O,onChange:function(e){return m(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),a.modes.map((function(e,t){return Object(n.jsx)("option",{value:e,children:e},t)}))]})}),Object(n.jsx)(nc.a,{xs:2,children:Object(n.jsxs)(sc.a.Control,{as:"select",value:g&&g,onChange:function(e){return v(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),a.datas.map((function(e,t){return Object(n.jsx)("option",{value:e,children:e},t)}))]})}),Object(n.jsx)(nc.a,{xs:1,children:Object(n.jsx)(ic.a,{variant:"ligth",className:"text-secondary",type:"submit",children:E?Object(n.jsx)(jc,{}):Object(n.jsx)("i",{className:"fas fa-download"})})})]})})},as=function(e){var t=e.history,a=Object(i.b)(),r=Object(i.c)((function(e){return e.userLogin})).userInfo,s=Object(i.c)((function(e){return e.accessList})),l=s.loading,o=s.error,d=s.access,u=Object(i.c)((function(e){return e.accessFrontUpdate})).error;return Object(c.useEffect)((function(){r||t.push("/login")}),[t,r]),Object(c.useEffect)((function(){d||a(or())}),[a,d]),Object(n.jsxs)(ec,{access:"manageProfils",children:[l&&Object(n.jsx)(jc,{}),o&&Object(n.jsx)(dc,{variant:"danger",children:o}),u&&Object(n.jsx)(dc,{variant:"danger",children:u}),Object(n.jsx)("h1",{children:"Manage user profils screen"}),Object(n.jsx)(br.a,{defaultActiveKey:d&&d[0].profil,id:"uncontrolled-tab-example",children:d&&d.map((function(e,t){return Object(n.jsx)(hr.a,{eventKey:e.profil,title:e.profil,children:Object(n.jsx)($r,{data:e})},t)}))})]})},ns=function(e){var t=e.company,a=e.setShowAddContact,r=e.deleteContactHandler,s=Object(c.useState)(t.commercialTeam||[]),i=Object(rc.a)(s,1)[0];return Object(n.jsxs)("div",{children:[i.map((function(e,a){return Object(n.jsx)(ac.a,{children:Object(n.jsxs)(nc.a,{children:["".concat(e.contactName," (").concat(e.contactEmail,")"),Object(n.jsx)(ic.a,{variant:"ligth",className:"ml-3 px-1 text-danger",onClick:function(){return r(e.contactEmail,t._id)},children:Object(n.jsx)("i",{className:"fas fa-times"})})]})},a)})),Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{className:"text-left",children:Object(n.jsxs)(ic.a,{className:"m-0 p-1 text-primary",variant:"ligth",onClick:function(){return a({state:!0,companyId:t._id,companyName:t.name})},children:[Object(n.jsx)("i",{className:"fas fa-plus"}),Object(n.jsx)("i",{children:"  add a contact"})]})})})]})},cs=function(e){var t=e.history,a=Object(i.b)(),r=Object(c.useState)(10),s=Object(rc.a)(r,2),l=s[0],o=s[1],d=Object(c.useState)(1),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(""),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)({state:!1,companyId:"",companyName:""}),f=Object(rc.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)(""),S=Object(rc.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(""),T=Object(rc.a)(N,2),A=T[0],L=T[1],_=Object(c.useState)(""),I=Object(rc.a)(_,2),D=I[0],k=I[1],w=Object(c.useState)({state:!1,companyId:"",companyName:""}),U=Object(rc.a)(w,2),R=U[0],P=U[1],M=Object(c.useState)(""),F=Object(rc.a)(M,2),q=F[0],G=F[1],z=Object(c.useState)({state:!1}),B=Object(rc.a)(z,2),X=B[0],H=B[1],Q=Object(i.c)((function(e){return e.userLogin})).userInfo,K=Object(i.c)((function(e){return e.clientAll})),V=K.error,Y=K.loading,W=K.clients,J=K.count,Z=K.page,$=K.pages,ee=Object(i.c)((function(e){return e.clientUpdate})),te=ee.error,ae=ee.success,ne=Object(i.c)((function(e){return e.clientDelete})),ce=ne.error,re=ne.success,se=Object(i.c)((function(e){return e.clientCreate})),ie=se.error,le=se.success;Object(c.useEffect)((function(){Q?a(Nr(O,j,l)):t.push("/login")}),[a,t,Q,j,l,O]),Object(c.useEffect)((function(){ae&&a(Nr(O,j,l))}),[a,ae]),Object(c.useEffect)((function(){re&&a(Nr(O,j,l))}),[a,re]),Object(c.useEffect)((function(){le&&a(Nr(O,j,l))}),[a,le]);var oe=function(e){var t;window.confirm("Are you sure to delete company: ".concat(e.name," ?"))&&a((t=e._id,function(){var e=Object(Kn.a)(Qn.a.mark((function e(a,n){var c,r,s,i,l;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:xn}),c=n(),r=c.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(r.token)}},e.next=6,Yn.a.delete("/api/clients/".concat(t),s);case 6:i=e.sent,l=i.data,a({type:fn,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:gn,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))},de=function(e,t){if(window.confirm("Are you sure to delete contact: ".concat(e," ?"))){var n=W.filter((function(e){return e._id===t}))[0];n.commercialTeam=n.commercialTeam.map((function(e){return{contactName:e.contactName,contactEmail:e.contactEmail}}));var c=n.commercialTeam.filter((function(t){return t.contactEmail!==e}));n.commercialTeam=c,a(Ar(n))}};return Object(n.jsxs)(ec,{access:"manageCompanies",children:[te&&Object(n.jsx)(dc,{variant:"danger",children:te}),ce&&Object(n.jsx)(dc,{variant:"danger",children:ce}),ie&&Object(n.jsx)(dc,{variant:"danger",children:ie}),Object(n.jsx)(yc,{title:"Manage companies",close:!1,children:Object(n.jsxs)(pc.a.Item,{children:[Object(n.jsxs)(ac.a,{children:[Object(n.jsx)(nc.a,{xs:6,md:4,children:Object(n.jsxs)(ic.a,{className:"mb-3",onClick:function(){return H({state:!0})},children:[Object(n.jsx)("i",{className:"fas fa-plus mr-2"}),"Add"]})}),Object(n.jsx)(nc.a,{xs:6,md:2,children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{type:"text",className:"mb-3",placeholder:"Search company",value:O&&O,onChange:function(e){return m(e.target.value)}})})}),Object(n.jsx)(nc.a,{xs:6,md:4,children:Object(n.jsx)(sc.a.Control,{plaintext:!0,readOnly:!0,value:J?"".concat(J," companies found"):"0 company found"})}),Object(n.jsx)(nc.a,{xs:6,md:2,children:Object(n.jsx)(Oc.a,{children:Object(n.jsx)(Rc.a,{as:"select",id:"number-c",className:"mb-3",value:l&&l,onChange:function(e){return o(e.target.value)},children:[5,10,15,20,50].map((function(e){return Object(n.jsxs)("option",{value:e,children:[e," / page"]},e)}))})})})]}),W&&0===W.length?Object(n.jsx)(dc,{variant:"information",children:"You have not access to these information"}):Y?Object(n.jsx)(jc,{}):V?Object(n.jsx)(dc,{variant:"danger",children:V}):Object(n.jsxs)(Sc.a,{responsive:!0,hover:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"Company name"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Commercial contacts"})]})}),Object(n.jsx)("tbody",{children:W&&W.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{className:"align-middle",children:[Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{children:e.name})}),Object(n.jsx)(ac.a,{children:Object(n.jsxs)(nc.a,{children:[Object(n.jsxs)(ic.a,{variant:"ligth",className:"m-0 p-1 text-primary",onClick:function(){return P({state:!0,companyId:e._id,companyName:e.name})},children:[Object(n.jsx)("i",{className:"fas fa-minus"}),Object(n.jsx)("i",{children:"  modify"})]}),Object(n.jsxs)(ic.a,{variant:"ligth",className:"m-0 p-1 btn text-danger",onClick:function(){return oe(e)},children:[Object(n.jsx)("i",{className:"fas fa-times"}),Object(n.jsx)("i",{children:"  Delete"})]})]})})]}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(ns,{company:e,setShowAddContact:v,deleteContactHandler:de})})]},e._id)}))})]}),Object(n.jsxs)(er.a,{children:[Object(n.jsx)(er.a.Prev,{onClick:function(){return b(Z-1)},disabled:1===Z}),Object(Gc.a)(Array($).keys()).map((function(e){return[0,1,$-2,$-1].includes(e)?Object(n.jsx)(er.a.Item,{active:e+1===Z,onClick:function(){a(Nr(O,e+1,l)),b(e+1)},children:e+1},e+1):$>4&&2===e&&Object(n.jsx)(er.a.Ellipsis,{},e+1)})),Object(n.jsx)(er.a.Next,{onClick:function(){return b(Z+1)},disabled:Z===$})]})]})}),Object(n.jsxs)(tr.a,{show:g.state,onHide:function(){return v({state:!1,companyId:"",companyName:""})},children:[Object(n.jsx)(tr.a.Header,{closeButton:!0,children:Object(n.jsx)(tr.a.Title,{children:"New contact for: ".concat(g.companyName)})}),Object(n.jsxs)(tr.a.Body,{children:[Object(n.jsxs)(sc.a,{children:[Object(n.jsxs)(sc.a.Group,{children:[Object(n.jsx)(sc.a.Label,{children:"Name *"}),Object(n.jsx)(sc.a.Control,{type:"text",value:E&&E,onChange:function(e){return C(e.target.value)}})]}),Object(n.jsxs)(sc.a.Group,{children:[Object(n.jsx)(sc.a.Label,{children:"Email *"}),Object(n.jsx)(sc.a.Control,{type:"email",value:A&&A,onChange:function(e){return L(e.target.value)}})]}),Object(n.jsx)(ic.a,{type:"submit",variant:"primary",onClick:function(e){return function(e,t,n,c){e.preventDefault();var r=!1,s=!1,i=[];if(t?r=!0:i.push("Thanks to enter a correct Name"),/^(([^<>()[]\.,;:s@]+(.[^<>()[]\.,;:s@]+)*)|(.+))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$/.test(n)?s=!0:i.push("Thanks to enter a correct Email address"),k(i),s&&r){var l=W.filter((function(e){return e._id===c}))[0];l.commercialTeam=l.commercialTeam.map((function(e){return{contactName:e.contactName,contactEmail:e.contactEmail}})),l.commercialTeam.push({contactName:t,contactEmail:n}),a(Ar(l)),v({state:!1,companyId:"",companyName:""}),k("")}}(e,E,A,g.companyId)},disabled:!A||!E,children:"Create"})]}),D&&Object(n.jsx)(dc,{variant:"danger",children:D})]}),Object(n.jsx)(tr.a.Footer,{children:Object(n.jsx)(ic.a,{variant:"secondary",onClick:function(){return v({state:!1,companyId:"",companyName:""})},children:"Close"})})]}),Object(n.jsxs)(tr.a,{show:R.state,onHide:function(){return P({state:!1,companyId:"",companyName:""})},children:[Object(n.jsx)(tr.a.Header,{closeButton:!0,children:Object(n.jsx)(tr.a.Title,{children:"Original name: ".concat(R.companyName)})}),Object(n.jsx)(tr.a.Body,{children:Object(n.jsxs)(sc.a,{children:[Object(n.jsxs)(sc.a.Group,{children:[Object(n.jsx)(sc.a.Label,{children:"New company name *"}),Object(n.jsx)(sc.a.Control,{type:"text",value:q||R.companyName,onChange:function(e){return G(e.target.value)}})]}),Object(n.jsx)(ic.a,{type:"submit",variant:"primary",onClick:function(e){return function(e,t,n){e.preventDefault();var c=W.filter((function(e){return e._id===t}))[0];c.name=n,a(Ar(c)),P({state:!1,companyId:"",companyName:""})}(e,R.companyId,q)},disabled:!(q&&q!==R.companyName),children:"Modify"})]})}),Object(n.jsx)(tr.a.Footer,{children:Object(n.jsx)(ic.a,{variant:"secondary",onClick:function(){P({state:!1,companyId:"",companyName:""}),G("")},children:"Close"})})]}),Object(n.jsxs)(tr.a,{show:X.state,onHide:function(){return H({state:!1})},children:[Object(n.jsx)(tr.a.Header,{closeButton:!0,children:Object(n.jsx)(tr.a.Title,{children:"Create a company:"})}),Object(n.jsx)(tr.a.Body,{children:Object(n.jsxs)(sc.a,{children:[Object(n.jsxs)(sc.a.Group,{children:[Object(n.jsx)(sc.a.Label,{children:"New company name *"}),Object(n.jsx)(sc.a.Control,{type:"text",value:q||R.companyName,onChange:function(e){return G(e.target.value)}})]}),Object(n.jsxs)(sc.a.Group,{children:[Object(n.jsx)(sc.a.Label,{children:"First contact name"}),Object(n.jsx)(sc.a.Control,{type:"text",value:E||"",placeholder:"Contact name",onChange:function(e){return C(e.target.value)}})]}),Object(n.jsxs)(sc.a.Group,{children:[Object(n.jsx)(sc.a.Label,{children:"First contact email"}),Object(n.jsx)(sc.a.Control,{type:"email",value:A||"",placeholder:"Contact email",onChange:function(e){return L(e.target.value)}})]}),Object(n.jsx)(ic.a,{type:"submit",variant:"primary",onClick:function(e){return function(e,t,n,c){e.preventDefault(),a(Tr([{name:t,commercialTeam:[{contactName:n,contactEmail:c}]}])),H({state:!1}),L(""),C(""),G("")}(e,q,E,A)},disabled:!q,children:"Create"})]})}),Object(n.jsx)(tr.a.Footer,{children:Object(n.jsx)(ic.a,{variant:"secondary",onClick:function(){P({state:!1,companyId:"",companyName:""}),G("")},children:"Close"})})]})]})},rs=function(e){var t=e.history,a=Object(i.b)(),r=Object(c.useState)([]),s=Object(rc.a)(r,2),l=s[0],o=s[1],d=Object(c.useState)(0),u=Object(rc.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(0),p=Object(rc.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)(0),f=Object(rc.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)(!1),S=Object(rc.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(0),T=Object(rc.a)(N,2),A=T[0],L=T[1],_=Object(i.c)((function(e){return e.contactsList})),I=_.loading,D=_.contacts,k=Object(i.c)((function(e){return e.sendOneEmail})),w=k.success,U=k.error,R=k.email,P=function(e,t){for(var n=l.slice(),c=0;c<n.length;c++)n[c].email===e&&(n[c].status="loading");o(n),a(function(e,t){return function(){var a=Object(Kn.a)(Qn.a.mark((function a(n,c){var r,s,i,l,o;return Qn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:_n}),r=c(),s=r.userLogin.userInfo,i={headers:{Authorization:"Bearer ".concat(s.token)}},a.next=6,Yn.a.get("/api/emails/decision?email=".concat(e,"&name=").concat(t),i);case 6:l=a.sent,o=l.data,n({type:In,payload:o}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:Dn,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()}(e,t))};return Object(c.useEffect)((function(){a(function(){var e=Object(Kn.a)(Qn.a.mark((function e(t,a){var n,c,r,s,i;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Nn}),n=a(),c=n.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,Yn.a.get("/api/emails/contacts",r);case 6:s=e.sent,i=s.data,t({type:Tn,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:An,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())}),[a]),Object(c.useEffect)((function(){D&&(o(D.map((function(e){return Object(Ne.a)(Object(Ne.a)({},e),{},{status:"not sent"})}))),v(D.length))}),[D]),Object(c.useEffect)((function(){E&&("send"!==l[A].status?P(l[A].email,l[A].name):A<l.length-1&&L(A+1))}),[E,A]),Object(c.useEffect)((function(){if(w){for(var e=R,t=l.slice(),a=0;a<t.length;a++)t[a].email===e&&(t[a].status="send");o(t),E&&(A<l.length-1?L(A+1):C(!1))}}),[w]),Object(c.useEffect)((function(){if(U){for(var e=U,t=l.slice(),a=0;a<t.length;a++)t[a].email===e&&(t[a].status="error");o(t),E&&(A<l.length-1?L(A+1):(C(!1),L(0)))}}),[U]),Object(c.useEffect)((function(){b(l.filter((function(e){return"send"===e.status})).length),m(l.filter((function(e){return"error"===e.status})).length),v(l.length)}),[l,U,w]),Object(n.jsxs)("div",{children:[Object(n.jsx)(Uc,{}),I&&Object(n.jsx)(jc,{}),Object(n.jsx)(ic.a,{variant:"primary",onClick:function(){return t.go(-1)},children:"Go Back"}),Object(n.jsxs)(ac.a,{className:"align-items-center pt-3",children:[Object(n.jsx)(nc.a,{children:"".concat(j," messages send / ").concat(g," - ").concat(O," messages with error")}),Object(n.jsx)(nc.a,{className:"text-right",children:Object(n.jsxs)(ic.a,{variant:"ligth",className:"text-primary",onClick:function(){return a({type:kn}),L(0),void C(!0)},children:[Object(n.jsx)("i",{className:"fas fa-envelope"})," ",E?Object(n.jsx)(jc,{}):"Send all messages"]})})]}),Object(n.jsx)(ac.a,{className:"pt-3",children:Object(n.jsx)(nc.a,{children:Object(n.jsxs)(Mr.a,{children:[Object(n.jsx)(Mr.a,{animated:E,now:100*j/g,variant:"primary"}),Object(n.jsx)(Mr.a,{animated:E,now:100*O/g,variant:"danger"})]})})}),Object(n.jsx)(ac.a,{className:"pt-3",children:Object(n.jsx)(nc.a,{children:Object(n.jsxs)(Sc.a,{responsive:!0,hover:!0,striped:!0,className:"mt-3",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light text-center col-md-5",children:"Name"}),Object(n.jsx)("th",{className:"align-middle text-light text-center col-md-5",children:"Email"}),Object(n.jsx)("th",{className:"align-middle text-light text-center col-md-2",children:"status"})]})}),Object(n.jsx)("tbody",{children:l&&l.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle text-center",children:e.name?e.name:"Unknown"}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.email}),Object(n.jsx)("td",{className:"align-middle text-center",children:Object(n.jsxs)(ic.a,{variant:"ligth",className:"error"===e.status?"text-danger":"send"===e.status?"text-success":"text-primary",size:"sm",onClick:function(){return P(e.email,e.name)},disabled:"send"===e.status||!0===E,children:[Object(n.jsx)("i",{className:"fas fa-envelope"}),"not sent"===e.status&&"  send","loading"===e.status&&Object(n.jsx)(jc,{}),"error"===e.status&&"  Error send again","send"===e.status&&"  sent"]})})]},t)}))})]})})})]})},ss=function(e){var t=e.history,a=Object(c.useState)(""),r=Object(rc.a)(a,2),s=r[0],l=r[1],o=Object(c.useState)(""),d=Object(rc.a)(o,2),u=d[0],j=d[1],b=Object(c.useState)(""),h=Object(rc.a)(b,2),p=h[0],O=h[1],m=Object(c.useState)(""),x=Object(rc.a)(m,2),f=x[0],g=x[1],v=Object(c.useState)(null),y=Object(rc.a)(v,2),S=y[0],E=y[1],C=Object(c.useState)(null),N=Object(rc.a)(C,2),T=N[0],A=N[1],L=Object(c.useState)(null),_=Object(rc.a)(L,2),I=_[0],D=_[1],k=Object(i.b)(),w=Object(i.c)((function(e){return e.userDetails})),U=w.loading,R=w.error,P=w.user,M=Object(i.c)((function(e){return e.userLogin})).userInfo,F=Object(i.c)((function(e){return e.userUpdateProfil})),q=F.success,G=F.error,z=Object(i.c)((function(e){return e.dealAllList})).deals,B=Object(i.c)((function(e){return e.consultantCDMList})).cdmList,X=Object(i.c)((function(e){return e.consultantDelegateUpdate})).loading;Object(c.useEffect)((function(){M?P&&P.name?(l(P.name),j(P.email)):k(Zn(M._id)):t.push("/login")}),[k,t,M,P]),Object(c.useEffect)((function(){q&&A({type:"success",message:"Profile updated"})}),[q]),Object(c.useEffect)((function(){G&&A({type:"danger",message:"Profile not updated"})}),[G]),Object(c.useEffect)((function(){if(M){k(Fc({title:"",contact:"",company:"",status:"",request:"",staff:"",filterMy:!0},1,1e3,"active"))}}),[k,M]),Object(c.useEffect)((function(){P&&D(P.consultantProfil.cdmDelegation.map((function(e){return{id:e.cdmId,value:e.name}})))}),[P]),Object(c.useEffect)((function(){B||k(Tc(M.consultantProfil.practice))}),[k,B,M]);return Object(n.jsxs)(ac.a,{children:[Object(n.jsxs)(nc.a,{md:3,children:[Object(n.jsx)("h2",{children:"User Profil"}),S&&Object(n.jsx)(dc,{variant:"danger",children:S}),R&&Object(n.jsx)(dc,{variant:"danger",children:R}),T&&T.type&&Object(n.jsx)(dc,{variant:T.type,children:T.message}),U&&Object(n.jsx)(jc,{}),Object(n.jsxs)(sc.a,{onSubmit:function(e){if(!1!==e.currentTarget.checkValidity()){e.preventDefault(),E(null),A(null);var t=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"),a=new RegExp("([a-zA-Z0-9!@#$%^&*]){1,}"),n=["demo","poc"].includes("poc")?t:a;return p&&f?p.match(n)?p&&p===f?void k(function(e){return function(){var t=Object(Kn.a)(Qn.a.mark((function t(a,n){var c,r,s,i,l;return Qn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:oe}),c=n(),r=c.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},t.next=6,Yn.a.put("/api/users/profile",e,s);case 6:i=t.sent,l=i.data,a({type:de,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:ue,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}({id:P._id,name:s,password:p})):void E("Passwords do not match"):void E("Please enter strong password: \n\n                    - must be eight characters or longer \n\n                    - must contain at least 1 lowercase alphabetical character \n\n                    - must contain at least 1 uppercase alphabetical character \n\n                    - must contain at least 1 numeric character \n\n                    - must contain at least one special character (!@#$%^&*)"):void E("Please enter a password")}E("Please check your information")},children:[Object(n.jsxs)(sc.a.Group,{controlId:"name",children:[Object(n.jsx)(sc.a.Label,{children:"Name"}),Object(n.jsx)(sc.a.Control,{type:"name",placeholder:"Enter Name",value:s,onChange:function(e){return l(e.target.value)}})]}),Object(n.jsxs)(sc.a.Group,{controlId:"email",children:[Object(n.jsx)(sc.a.Label,{children:"Email Adress"}),Object(n.jsx)(sc.a.Control,{type:"email",placeholder:"Enter Email",value:u,onChange:function(e){return j(e.target.value)}})]}),Object(n.jsxs)(sc.a.Group,{controlId:"password",children:[Object(n.jsx)(sc.a.Label,{children:"Password"}),Object(n.jsx)(sc.a.Control,{type:"password",placeholder:"Enter password",value:p,onChange:function(e){return O(e.target.value)}})]}),Object(n.jsxs)(sc.a.Group,{controlId:"confirm-password",children:[Object(n.jsx)(sc.a.Label,{children:"Confirm Password"}),Object(n.jsx)(sc.a.Control,{type:"password",placeholder:"Confirm password",value:f,onChange:function(e){return g(e.target.value)}})]}),Object(n.jsx)(ic.a,{type:"submit",className:"my-3",variant:"primary",block:!0,children:"Update Password"}),M&&M.consultantProfil.isCDM&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Delegate "}),Object(n.jsx)(xr,{options:B?B.map((function(e){return{value:e._id,label:e.name}})):[],value:I?I.map((function(e){return{value:e.id,label:e.value}})):[],setValue:D,multi:!0}),Object(n.jsx)(ic.a,{onClick:function(){var e=I.map((function(e){return{cdmId:e.id,name:e.value}}));k(function(e,t){return function(){var a=Object(Kn.a)(Qn.a.mark((function a(n,c){var r,s,i;return Qn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:Xe}),r=c(),s=r.userLogin.userInfo,i={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},a.next=6,Yn.a.put("/api/consultants/delegate/".concat(e),t,i);case 6:if(a.sent.data){a.next=10;break}throw new Error("Error: your modification is not saved");case 10:n({type:He}),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),n({type:Qe,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 16:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(e,t){return a.apply(this,arguments)}}()}(P.consultantProfil._id,e))},className:"my-3",variant:"primary",block:!0,children:X?Object(n.jsx)(jc,{}):"Update Delegations"})]})]})]}),Object(n.jsx)(nc.a,{md:9,children:Object(n.jsxs)(ec,{access:"viewProfilDetails",children:[Object(n.jsx)("h2",{children:"Follow my Requests"}),Object(n.jsxs)(Sc.a,{striped:!0,hover:!0,responsive:!0,className:"table-sm mt-3",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-light",children:[Object(n.jsx)("th",{className:"align-middle text-center",children:"Title"}),Object(n.jsx)("th",{className:"align-middle text-center",children:"Client"}),Object(n.jsx)("th",{className:"align-middle text-center",children:"Contacts"}),Object(n.jsx)("th",{className:"align-middle text-center",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-center",children:"Step"}),Object(n.jsx)("th",{className:"align-middle text-center",children:"Request status"}),Object(n.jsx)("th",{className:"align-middle text-center",children:"Starting date"}),Object(n.jsx)("th",{className:"align-middle text-center",children:"Staffing"}),Object(n.jsx)("th",{className:"align-middle text-center",children:"Details"})]})}),Object(n.jsx)("tbody",{children:z&&z.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle text-center",children:e.title}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.company}),Object(n.jsx)("td",{className:"align-middle text-center",children:"".concat(e.contacts&&e.contacts.primary&&e.contacts.primary.name," \n(").concat(e.contacts&&e.contacts.secondary&&e.contacts.secondary.map((function(e){return e.name})).join(", "),")")}),Object(n.jsx)("td",{className:"align-middle text-center",children:"".concat(e.mainPractice," \n(").concat(e.othersPractices&&e.othersPractices.join(", "),")")}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.status}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.staffingRequest&&e.staffingRequest.requestStatus}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.startDate.substring(0,10)}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.staffingDecision&&e.staffingDecision.staff&&e.staffingDecision.staff.map((function(e){return"".concat(e.idConsultant.name," - ").concat(e.responsability," - ").concat(e.priority)})).join(",\n")}),Object(n.jsx)("td",{className:"align-middle text-center",children:Object(n.jsx)(ic.a,{variant:"ligth",style:{color:"gray"},onClick:function(){return t.push("/staffing/".concat(e._id))},size:"md",children:Object(n.jsx)("i",{className:"fas fa-edit"})})})]},e._id)}))})]})]})})]})},is=function(e){var t=e.history,a=e.children,r=Object(i.b)(),s=!0,l=Object(i.c)((function(e){return e.userLogin})).userInfo;return Object(c.useEffect)((function(){l||(s=!1,t.push("/login"))}),[l,t]),Object(c.useEffect)((function(){l&&!l.lastConnexion&&(s=!1,r(Jn()))})),Object(c.useEffect)((function(){if(l&&"LOCAL"===l.accountType){var e=(new Date(Date.now())-new Date(l.lastConnexion))/864e5;e>.7&&e<1&&(s=!1,r(function(e,t){return function(){var a=Object(Kn.a)(Qn.a.mark((function a(n){var c,r,s,i,l;return Qn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:K}),c="LOCAL",r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(t.token)}},a.next=6,Yn.a.post("/api/users/renewToken",e,r);case 6:s=a.sent,i=s.data,l=Object(Ne.a)(Object(Ne.a)({},i),{},{accountType:c}),n({type:V,payload:l}),localStorage.setItem("userInfo",JSON.stringify(l)),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),n({type:Y,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 16:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(e){return a.apply(this,arguments)}}()}({email:l.email,delay:e},l)))}}),[r,l]),Object(c.useEffect)((function(){l&&"LOCAL"===l.accountType&&((new Date(Date.now())-new Date(l.lastConnexion))/864e5>=1&&(s=!1,r(Jn())))}),[r,l]),Object(n.jsx)("span",{children:s&&a&&a})},ls=a(44),os=Object(ls.a)(),ds=function(){return Object(n.jsxs)(Mn.BrowserRouter,{history:os,children:[Object(n.jsx)(tc,{}),Object(n.jsx)("main",{className:"py-3",children:Object(n.jsxs)(qn.a,{children:[Object(n.jsx)(Fn.d,{path:"/login",component:hc,exact:!0}),Object(n.jsx)(Fn.d,{path:"/register",component:ur,exact:!0}),Object(n.jsxs)(is,{history:os,children:[Object(n.jsx)(Fn.d,{path:"/profile",component:ss,exact:!0}),Object(n.jsx)(Fn.d,{path:"/staffing",component:Rr,exact:!0}),Object(n.jsx)(Fn.d,{path:"/staffing/:id",component:Rr,exact:!0}),Object(n.jsx)(Fn.d,{path:"/pxx",component:Vc,exact:!0}),Object(n.jsx)(Fn.d,{path:"/pxx/:id",component:Vc,exact:!0}),Object(n.jsx)(Fn.d,{path:"/pxxdetails/:id",component:Br,exact:!0}),Object(n.jsx)(Fn.d,{path:"/editconsultant/:id",component:Yc,exact:!0}),Object(n.jsx)(Fn.d,{path:"/admin/consultants",component:ir,exact:!0}),Object(n.jsx)(Fn.d,{path:"/admin/consultants/:keyword/page/:pageNumber",component:Sr,exact:!0}),Object(n.jsx)(Fn.d,{path:"/admin/users",component:lr,exact:!0}),Object(n.jsx)(Fn.d,{path:"/admin/edituser/:id",component:dr,exact:!0}),Object(n.jsx)(Fn.d,{path:"/admin/consultant/add",component:Yc,exact:!0}),Object(n.jsx)(Fn.d,{path:"/admin/skills",component:Pr,exact:!0}),Object(n.jsx)(Fn.d,{path:"/admin/deals",component:Vr,exact:!0}),Object(n.jsx)(Fn.d,{path:"/admin/deals/history",component:Zr,exact:!0}),Object(n.jsx)(Fn.d,{path:"/admin/profils",component:as,exact:!0}),Object(n.jsx)(Fn.d,{path:"/admin/companies",component:cs,exact:!0}),Object(n.jsx)(Fn.d,{path:"/admin/send",component:rs,exact:!0}),Object(n.jsx)(Fn.d,{path:"/",component:Sr,exact:!0})]})]})}),Object(n.jsx)(cc,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(n.jsx)(i.a,{store:Pn,children:Object(n.jsx)(ds,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[431,1,2]]]);
//# sourceMappingURL=main.2ffcc7ec.chunk.js.map