(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{283:function(e,t,a){},284:function(e,t,a){},330:function(e,t){},332:function(e,t){},343:function(e,t){},345:function(e,t){},372:function(e,t){},374:function(e,t){},375:function(e,t){},380:function(e,t){},382:function(e,t){},401:function(e,t){},413:function(e,t){},416:function(e,t){},431:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a(36),r=a.n(s),i=a(7),l=a(85),o=a(266),d=a(267),j="PXX_MY_TO_EDIT_REQUEST",u="PXX_MY_TO_EDIT_SUCCESS",b="PXX_MY_TO_EDIT_FAIL",h="PXX_MY_TO_EDIT_RESET",O="PXX_UPDATE_REQUEST",p="PXX_UPDATE_SUCCESS",x="PXX_UPDATE_FAIL",m="PXX_UPDATE_RESET",f="PXX_LIST_REQUEST",g="PXX_LIST_SUCCESS",v="PXX_LIST_FAIL",y="PXX_LIST_RESET",S="PXX_TACE_REQUEST",E="PXX_TACE_SUCCESS",C="PXX_TACE_FAIL",N="PXX_TACE_RESET",T="PXX_AVAILABILITIES_REQUEST",L="PXX_AVAILABILITIES_SUCCESS",A="PXX_AVAILABILITIES_FAIL",_="PXX_AVAILABILITIES_RESET",I="PXX_ALL_REQUEST",D="PXX_ALL_SUCCESS",k="PXX_ALL_FAIL",w="PXX_ALL_RESET",U="PXX_IMPORT_LINE_REQUEST",P="PXX_IMPORT_LINE_SUCCESS",R="PXX_IMPORT_LINE_FAIL",M="PXX_IMPORT_LINE_RESET",F="PXX_UPLOAD_FILE_REQUEST",G="PXX_UPLOAD_FILE_SUCCESS",B="PXX_UPLOAD_FILE_FAIL",q="PXX_UPLOAD_FILE_RESET",z="PXX_UPDATE_PXX_REQUEST",X="PXX_UPDATE_PXX_SUCCESS",H="PXX_UPDATE_PXX_FAIL",Q="PXX_UPDATE_PXX_RESET",K="USER_LOGIN_REQUEST",Y="USER_LOGIN_SUCCESS",V="USER_LOGIN_FAIL",W="USER_LOGOUT",J="USER_REGISTER_REQUEST",Z="USER_REGISTER_SUCCESS",$="USER_REGISTER_FAIL",ee="USER_REGISTER_RESET",te="USER_DETAILS_REQUEST",ae="USER_DETAILS_SUCCESS",ne="USER_DETAILS_FAIL",ce="USER_DETAILS_RESET",se="USER_LIST_REQUEST",re="USER_LIST_SUCCESS",ie="USER_LIST_FAIL",le="USER_LIST_RESET",oe="USER_DELETE_REQUEST",de="USER_DELETE_SUCCESS",je="USER_DELETE_FAIL",ue="USER_DELETE_RESET",be="USER_UPDATE_REQUEST",he="USER_UPDATE_SUCCESS",Oe="USER_UPDATE_FAIL",pe="USER_UPDATE_RESET",xe=["Waiting approval","Validated","Refused"],me=a(28),fe="CONSULTANTS_MY_DETAILS_REQUEST",ge="CONSULTANTS_MY_DETAILS_SUCCESS",ve="CONSULTANTS_MY_DETAILS_FAIL",ye="CONSULTANTS_MY_DETAILS_FOCUS",Se="CONSULTANTS_MY_DETAILS_RESET",Ee="CONSULTANTS_ALL_ADMIN_DETAILS_REQUEST",Ce="CONSULTANTS_ALL_ADMIN_DETAILS_SUCCESS",Ne="CONSULTANTS_ALL_ADMIN_DETAILS_FAIL",Te="CONSULTANTS_ALL_ADMIN_DETAILS_RESET",Le="CONSULTANTS_ALL_LEADERS_REQUEST",Ae="CONSULTANTS_ALL_LEADERS_SUCCESS",_e="CONSULTANTS_ALL_LEADERS_FAIL",Ie="CONSULTANTS_ALL_LEADERS_RESET",De="CONSULTANT_MY_REQUEST",ke="CONSULTANT_MY_SUCCESS",we="CONSULTANT_MY_FAIL",Ue="CONSULTANT_MY_RESET",Pe="CONSULTANT_MY_UPDATE_REQUEST",Re="CONSULTANT_MY_UPDATE_SUCCESS",Me="CONSULTANT_MY_UPDATE_FAIL",Fe="CONSULTANT_MY_UPDATE_RESET",Ge="CONSULTANT_CREATE_REQUEST",Be="CONSULTANT_CREATE_SUCCESS",qe="CONSULTANT_CREATE_FAIL",ze="CONSULTANT_CREATE_RESET",Xe="CONSULTANT_DELETE_REQUEST",He="CONSULTANT_DELETE_SUCCESS",Qe="CONSULTANT_DELETE_FAIL",Ke="CONSULTANT_DELETE_RESET",Ye="CONSULTANT_CDM_LIST_REQUEST",Ve="CONSULTANT_CDM_LIST_SUCCESS",We="CONSULTANT_CDM_LIST_FAIL",Je="CONSULTANT_CDM_LIST_RESET",Ze="CONSULTANT_PRACTICE_LIST_REQUEST",$e="CONSULTANT_PRACTICE_LIST_SUCCESS",et="CONSULTANT_PRACTICE_LIST_FAIL",tt="CONSULTANT_PRACTICE_LIST_RESET",at="CONSULTANT_UPDATE_COMMENT_REQUEST",nt="CONSULTANT_UPDATE_COMMENT_SUCCESS",ct="CONSULTANT_UPDATE_COMMENT_FAIL",st="CONSULTANT_UPDATE_COMMENT_RESET",rt="CONSULTANT_CDM_REQUEST",it="CONSULTANT_CDM_SUCCESS",lt="CONSULTANT_CDM_FAIL",ot="CONSULTANT_CDM_RESET",dt="CONSULTANT_SKILLS_REQUEST",jt="CONSULTANT_SKILLS_SUCCESS",ut="CONSULTANT_SKILLS_FAIL",bt="CONSULTANT_SKILLS_RESET",ht="CONSULTANT_ALL_SKILLS_REQUEST",Ot="CONSULTANT_ALL_SKILLS_SUCCESS",pt="CONSULTANT_ALL_SKILLS_FAIL",xt="CONSULTANT_ALL_SKILLS_RESET",mt="CONSULTANT_ALL_STAFF_REQUEST",ft="CONSULTANT_ALL_STAFF_SUCCESS",gt="CONSULTANT_ALL_STAFF_FAIL",vt="CONSULTANT_ALL_STAFF_RESET",yt="CONSULTANT_ADD_SKILL_REQUEST",St="CONSULTANT_ADD_SKILL_SUCCESS",Et="CONSULTANT_ADD_SKILL_FAIL",Ct="CONSULTANT_ADD_SKILL_RESET",Nt="CONSULTANT_DELETE_SKILL_REQUEST",Tt="CONSULTANT_DELETE_SKILL_SUCCESS",Lt="CONSULTANT_DELETE_SKILL_FAIL",At="CONSULTANT_DELETE_SKILL_RESET",_t="CONSULTANT_UPDATE_SKILL_REQUEST",It="CONSULTANT_UPDATE_SKILL_SUCCESS",Dt="CONSULTANT_UPDATE_SKILL_FAIL",kt="CONSULTANT_UPDATE_SKILL_RESET",wt="CONSULTANT_MASS_IMPORT_REQUEST",Ut="CONSULTANT_MASS_IMPORT_SUCCESS",Pt="CONSULTANT_MASS_IMPORT_FAIL",Rt="CONSULTANT_MASS_IMPORT_RESET",Mt="CONSULTANT_UPLOAD_WK_REQUEST",Ft="CONSULTANT_UPLOAD_WK_SUCCESS",Gt="CONSULTANT_UPLOAD_WK_FAIL",Bt="CONSULTANT_UPLOAD_WK_RESET",qt="CONSULTANT_UPDATE_WK_REQUEST",zt="CONSULTANT_UPDATE_WK_SUCCESS",Xt="CONSULTANT_UPDATE_WK_FAIL",Ht="CONSULTANT_UPDATE_WK_RESET",Qt=["Intern","Analyst","Consultant","Senior consultant","Manager","Senior manager","Director","Partner","Unknown","Commercial","Research"],Kt="SKILL_LIST_REQUEST",Yt="SKILL_LIST_SUCCESS",Vt="SKILL_LIST_FAIL",Wt="SKILL_LIST_RESET",Jt="SKILL_DELETE_REQUEST",Zt="SKILL_DELETE_SUCCESS",$t="SKILL_DELETE_FAIL",ea="SKILL_DELETE_RESET",ta="SKILL_CREATE_REQUEST",aa="SKILL_CREATE_SUCCESS",na="SKILL_CREATE_FAIL",ca="SKILL_CREATE_RESET",sa="DEAL_CREATE_REQUEST",ra="DEAL_CREATE_SUCCESS",ia="DEAL_CREATE_FAIL",la="DEAL_CREATE_RESET",oa="DEAL_UPDATE_REQUEST",da="DEAL_UPDATE_SUCCESS",ja="DEAL_UPDATE_FAIL",ua="DEAL_UPDATE_RESET",ba="DEAL_ALL_LIST_REQUEST",ha="DEAL_ALL_LIST_SUCCESS",Oa="DEAL_ALL_LIST_FAIL",pa="DEAL_ALL_LIST_RESET",xa="DEAL_DELETE_REQUEST",ma="DEAL_DELETE_SUCCESS",fa="DEAL_DELETE_FAIL",ga="DEAL_DELETE_RESET",va="DEAL_EDIT_REQUEST",ya="DEAL_EDIT_SUCCESS",Sa="DEAL_EDIT_FAIL",Ea="DEAL_EDIT_RESET",Ca="DEAL_OLD_REQUEST",Na="DEAL_OLD_SUCCESS",Ta="DEAL_OLD_FAIL",La="DEAL_OLD_RESET",Aa="DEAL_MASS_IMPORT_REQUEST",_a="DEAL_MASS_IMPORT_SUCCESS",Ia="DEAL_MASS_IMPORT_FAIL",Da="DEAL_MASS_IMPORT_RESET",ka=[{name:"Identify Leader",staff:!0,priority:10},{name:"Identify Staff",staff:!0,priority:7},{name:"Staff to validate by leader",staff:!1,priority:5},{name:"Staff validated by leader",staff:!1,priority:0},{name:"Staff validated by client",staff:!1,priority:0},{name:"You can staff elsewhere",staff:!1,priority:0},{name:"Close",staff:!1,priority:0}],wa=[{name:"New business",priority:10},{name:"New position",priority:5},{name:"Replacement",priority:1}],Ua=[{name:"Lead",priority:0,display:"onTrack"},{name:"Proposal to send",priority:5,display:"onTrack"},{name:"Proposal sent",priority:5,display:"onTrack"},{name:"Won",priority:10,display:"win"},{name:"Abandoned",priority:0,display:"lost"},{name:"Lost",priority:0,display:"lots"}],Pa=[{name:10,priority:1},{name:30,priority:3},{name:50,priority:5},{name:70,priority:7},{name:100,priority:10}],Ra="ACCESS_LIST_REQUEST",Ma="ACCESS_LIST_SUCCESS",Fa="ACCESS_LIST_FAIL",Ga="ACCESS_LIST_RESET",Ba="ACCESS_UPDATE_FRONTACCESS_REQUEST",qa="ACCESS_UPDATE_FRONTACCESS_SUCCESS",za="ACCESS_UPDATE_FRONTACCESS_FAIL",Xa="ACCESS_UPDATE_FRONTACCESS_RESET",Ha=["no","yes","read","write"],Qa=["my","team","department","domain","all"],Ka="CLIENT_ALL_REQUEST",Ya="CLIENT_ALL_SUCCESS",Va="CLIENT_ALL_FAIL",Wa="CLIENT_ALL_RESET",Ja="CLIENT_CREATE_REQUEST",Za="CLIENT_CREATE_SUCCESS",$a="CLIENT_CREATE_FAIL",en="CLIENT_CREATE_RESET",tn="CLIENT_UPDATE_REQUEST",an="CLIENT_UPDATE_SUCCESS",nn="CLIENT_UPDATE_FAIL",cn="CLIENT_UPDATE_RESET",sn="CLIENT_DELETE_REQUEST",rn="CLIENT_DELETE_SUCCESS",ln="CLIENT_DELETE_FAIL",on="CLIENT_DELETE_RESET",dn="TACE_CREATE_REQUEST",jn="TACE_CREATE_SUCCESS",un="TACE_CREATE_FAIL",bn="TACE_CREATE_RESET",hn="EMAIL_CONTACTS_LIST_REQUEST",On="EMAIL_CONTACTS_LIST_SUCCESS",pn="EMAIL_CONTACTS_LIST_FAIL",xn="EMAIL_CONTACTS_LIST_RESET",mn="EMAIL_SEND_DECISION_REQUEST",fn="EMAIL_SEND_DECISION_SUCCESS",gn="EMAIL_SEND_DECISION_FAIL",vn="EMAIL_SEND_DECISION_RESET",yn=Object(l.combineReducers)({userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return{loading:!0};case Z:return{loading:!1,userInfo:t.payload};case $:return{loading:!1,error:t.payload};case ee:return{};default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return{loading:!0};case Y:return{loading:!1,userInfo:t.payload};case V:return{loading:!1,error:t.payload};case W:return{};default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return{loading:!0};case re:return{loading:!1,users:t.payload.users,pages:t.payload.pages,page:t.payload.page,count:t.payload.count};case ie:return{loading:!1,error:t.payload};case le:return{};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return{loading:!0};case ae:return{loading:!1,user:t.payload};case ne:return{loading:!1,error:t.payload};case ce:return{};default:return e}},userUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return{loading:!0};case he:return{loading:!1,success:!0};case Oe:return{loading:!1,error:t.payload};case pe:return{};default:return e}},userDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return{loading:!0};case de:return{loading:!1,success:!0};case je:return{loading:!1,error:t.payload};case ue:return{};default:return e}},consultantUpdateComment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case at:return{loading:!0};case nt:return{loading:!1,success:!0};case ct:return{loading:!1,error:t.payload};case st:return{};default:return e}},consultantsMyAdminList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return{loading:!0};case Ce:return{loading:!1,consultantsMyAdmin:t.payload.consultants,pages:t.payload.pages,page:t.payload.page,count:t.payload.count};case Ne:return{loading:!1,error:t.payload};case Te:return{};default:return e}},consultantsMyList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{focus:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return Object(me.a)(Object(me.a)({},e),{},{loading:!0});case ge:return Object(me.a)(Object(me.a)({},e),{},{loading:!1,consultantsMy:t.payload});case ve:return Object(me.a)(Object(me.a)({},e),{},{loading:!1,error:t.payload});case ye:return Object(me.a)(Object(me.a)({},e),{},{focus:t.payload});case Se:return{focus:0};default:return e}},consultantMy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return{loading:!0};case ke:return{loading:!1,consultant:t.payload};case we:return{loading:!1,error:t.payload};case Ue:return{};default:return e}},consultantMyUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:return{loading:!0};case Re:return{loading:!1,success:!0};case Me:return{loading:!1,error:t.payload};case Fe:return{};default:return e}},consultantCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return{loading:!0};case Be:return{loading:!1,success:!0,consultantCreated:t.payload};case qe:return{loading:!1,error:t.payload};case ze:return{};default:return e}},consultantDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe:return{loading:!0};case He:return{loading:!1,success:!0};case Qe:return{loading:!1,error:t.payload};case Ke:return{};default:return e}},consultantCDMList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye:return{loading:!0};case Ve:return{loading:!1,cdmList:t.payload};case We:return{loading:!1,error:t.payload};case Je:return{};default:return e}},consultantPracticeList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze:return{loading:!0};case $e:return{loading:!1,practiceList:t.payload};case et:return{loading:!1,error:t.payload};case tt:return{};default:return e}},consultantSkills:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dt:return{loading:!0};case jt:return{loading:!1,skills:t.payload};case ut:return{loading:!1,error:t.payload};case bt:return{};default:return e}},consultantAllSkills:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return{loading:!0};case Ot:return{loading:!1,skills:t.payload};case pt:return{loading:!1,error:t.payload};case xt:return{};default:return e}},consultantAllStaffs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:return{loading:!0};case ft:return{loading:!1,staffings:t.payload};case gt:return{loading:!1,error:t.payload};case vt:return{};default:return e}},consultantAddSkill:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yt:return{loading:!0};case St:return{loading:!1,success:!0};case Et:return{loading:!1,success:!1,error:t.payload};case Ct:return{};default:return e}},consultantDeleteSkill:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nt:return{loading:!0};case Tt:return{loading:!1,success:!0};case Lt:return{loading:!1,success:!1,error:t.payload};case At:return{};default:return e}},consultantUpdateSkill:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _t:return{loading:!0};case It:return{loading:!1,success:!0};case Dt:return{loading:!1,success:!1,error:t.payload};case kt:return{};default:return e}},consultantGetCdm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rt:return{loading:!0};case it:return{loading:!1,success:!0,cdm:t.payload};case lt:return{loading:!1,error:t.payload};case ot:return{};default:return e}},consultantsAllLeaders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Le:return{loading:!0};case Ae:return{loading:!1,leaderslist:t.payload};case _e:return{loading:!1,error:t.payload};case Ie:return{};default:return e}},consultantsMassImport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wt:return{loading:!0};case Ut:return{loading:!1,success:!0};case Pt:return{loading:!1,success:!1,error:t.payload};case Rt:return{};default:return e}},consultantUploadWk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mt:return{loading:!0};case Ft:return{loading:!1,success:!0,path:t.payload};case Gt:return{loading:!1,success:!1,error:t.payload};case Bt:return{};default:return e}},consultantUpdateWk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return{loading:!0};case zt:return{loading:!1,success:!0,message:t.payload};case Xt:return{loading:!1,success:!1,error:t.payload};case Ht:return{};default:return e}},pxxList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pxxs:{pxxMonthInformation:[],pxxUserList:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{loading:!0,pxxs:{}};case g:return{loading:!1,pxxs:t.payload};case v:return{loading:!1,error:t.payload};case y:return{pxxs:{pxxMonthInformation:[],pxxUserList:[]}};default:return e}},pxxAllList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return{loading:!0,success:!1};case D:return{loading:!1,success:!0,pxxs:t.payload.pxxs,pages:t.payload.pages,page:t.payload.page,count:t.payload.count};case k:return{loading:!1,error:t.payload};case w:return{};default:return e}},pxxMyToEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pxx:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return{loading:!0};case u:return{loading:!1,pxx:t.payload};case b:return{loading:!1,error:t.payload};case h:return{pxx:[]};default:return e}},pxxUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return{loading:!0};case p:return{loading:!1,success:!0};case x:return{loading:!1,error:t.payload};case m:return{};default:return e}},pxxTACE:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return{loading:!0,success:!1};case E:return{loading:!1,success:!0,tace:t.payload};case C:return{loading:!1,error:t.payload};case N:return{};default:return e}},pxxAvailabilities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return{loading:!0,success:!1};case L:return{loading:!1,success:!0,availabilities:t.payload};case A:return{loading:!1,error:t.payload};case _:return{};default:return e}},updatePxx:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return{loading:!0};case X:return{loading:!1,success:!0,message:t.payload};case H:return{loading:!1,error:t.payload};case Q:return{};default:return e}},pxxImportLine:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pxx:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return{loading:!0};case P:return{loading:!1,success:!0,updatedLine:t.payload};case R:return{loading:!1,error:t.payload};case M:return{pxx:[]};default:return e}},pxxUploadFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return{loading:!0};case G:return{loading:!1,success:!0,path:t.payload};case B:return{loading:!1,error:t.payload};case q:return{};default:return e}},skillList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Kt:return{loading:!0,success:!1};case Yt:return{loading:!1,success:!0,skills:t.payload.skills,pages:t.payload.pages,page:t.payload.page,count:t.payload.count};case Vt:return{loading:!1,error:t.payload};case Wt:return{};default:return e}},skillDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jt:return{loading:!0,success:!1};case Zt:return{loading:!1,success:!0};case $t:return{loading:!1,error:t.payload};case ea:return{};default:return e}},skillCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ta:return{loading:!0,success:!1};case aa:return{loading:!1,success:!0};case na:return{loading:!1,error:t.payload};case ca:return{};default:return e}},dealCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sa:return{loading:!0};case ra:return{loading:!1,success:!0,createId:t.payload};case ia:return{loading:!1,error:t.payload};case la:return{};default:return e}},dealAllList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ba:return{loading:!0};case ha:return{loading:!1,success:!0,deals:t.payload.deals,pages:t.payload.pages,page:t.payload.page,count:t.payload.count};case Oa:return{loading:!1,error:t.payload};case pa:return{};default:return e}},dealDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xa:return{loading:!0};case ma:return{loading:!1,success:!0};case fa:return{loading:!1,error:t.payload};case ga:return{};default:return e}},dealEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case va:return{loading:!0};case ya:return{loading:!1,success:!0,deal:t.payload};case Sa:return{loading:!1,error:t.payload};case Ea:return{};default:return e}},dealUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oa:return{loading:!0};case da:return{loading:!1,success:!0};case ja:return{loading:!1,error:t.payload};case ua:return{};default:return e}},dealOld:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ca:return{loading:!0};case Na:return{loading:!1,success:!0,oldDeals:t.payload};case Ta:return{loading:!1,error:t.payload};case La:return{};default:return e}},dealsImportMass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Aa:return{loading:!0};case _a:return{loading:!1,success:!0,datas:t.payload.datas};case Ia:return{loading:!1,error:t.payload};case Da:return{};default:return e}},accessList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ra:return{loading:!0};case Ma:return{loading:!1,access:t.payload};case Fa:return{loading:!1,error:t.payload};case Ga:return{};default:return e}},accessFrontUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ba:return{loading:!0};case qa:return{loading:!1,success:!0};case za:return{loading:!1,error:t.payload};case Xa:return{};default:return e}},clientAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ka:return{loading:!0};case Ya:return{loading:!1,success:!0,clients:t.payload.clients,page:t.payload.page,pages:t.payload.pages,count:t.payload.count};case Va:return{loading:!1,error:t.payload};case Wa:return{};default:return e}},clientCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ja:return{loading:!0};case Za:return{loading:!1,success:!0};case $a:return{loading:!1,error:t.payload};case en:return{};default:return e}},clientUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tn:return{loading:!0};case an:return{loading:!1,success:!0};case nn:return{loading:!1,error:t.payload};case cn:return{};default:return e}},clientDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sn:return{loading:!0};case rn:return{loading:!1,success:!0};case ln:return{loading:!1,error:t.payload};case on:return{};default:return e}},createTace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dn:return{loading:!0,success:!1};case jn:return{loading:!1,taceData:t.payload};case un:return{loading:!1,error:t.payload};case bn:return{};default:return e}},contactsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case hn:return{loading:!0};case On:return{loading:!1,contacts:t.payload};case pn:return{loading:!1,error:t.payload};case xn:return{};default:return e}},sendOneEmail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mn:return{loading:!0};case fn:return{success:!0,loading:!1,email:t.payload.email};case gn:return{loading:!1,error:t.payload};case vn:return{};default:return e}}}),Sn={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},En=[o.a],Cn=Object(l.createStore)(yn,Sn,Object(d.composeWithDevTools)(l.applyMiddleware.apply(void 0,En))),Nn=(a(283),a(284),a(60)),Tn=a(33),Ln=a(77),An=a(42),_n=a(122),In=a(70),Dn=a(38),kn=a(9),wn=a.n(kn),Un=a(15),Pn=a(16),Rn=a.n(Pn),Mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"15";return function(){var c=Object(Un.a)(wn.a.mark((function c(s,r){var i,l,o,d,j;return wn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s({type:se}),i=r(),l=i.userLogin.userInfo,o={headers:{Authorization:"Bearer ".concat(l.token)}},c.next=6,Rn.a.get("/api/users?practice=".concat(e,"&keyword=").concat(t,"&pageNumber=").concat(a,"&pageSize=").concat(n),o);case 6:d=c.sent,j=d.data,s({type:re,payload:j}),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),s({type:ie,payload:c.t0.response&&c.t0.response.data.message?c.t0.response.data.message:c.t0.message});case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e,t){return c.apply(this,arguments)}}()},Fn=function(e){var t=e.access,a=e.children,c=Object(i.c)((function(e){return e.userLogin})).userInfo,s=!1;if(c){var r=c.profil.frontAccess.filter((function(e){return e.id===t}));r.length>0&&(s="no"!==r[0].mode)}return Object(n.jsx)("span",{children:s&&a})},Gn=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.userLogin})).userInfo;return Object(n.jsx)("header",{children:Object(n.jsx)(_n.a,{bg:"primary",variant:"dark",expand:"lg",collapseOnSelect:!0,fixed:"top",children:Object(n.jsxs)(Ln.a,{children:[Object(n.jsx)(An.LinkContainer,{to:"/",children:Object(n.jsx)(_n.a.Brand,{children:"Performance App"})}),Object(n.jsx)(_n.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsx)(_n.a.Collapse,{id:"basic-navbar-nav",children:Object(n.jsxs)(In.a,{className:"ml-auto",children:[Object(n.jsx)(Fn,{access:"staffingRequest",children:Object(n.jsx)(An.LinkContainer,{to:"/staffing",children:Object(n.jsx)(In.a.Link,{children:"Staffing Request"})})}),Object(n.jsx)(Fn,{access:"editMyPxx",children:Object(n.jsx)(An.LinkContainer,{to:"/pxx",children:Object(n.jsx)(In.a.Link,{children:"Edit My Pxx"})})}),t?Object(n.jsxs)(Dn.a,{title:"".concat(t.name," (").concat(t.profil.profil&&t.profil.profil,")")||!1,id:"username",children:[Object(n.jsx)(Fn,{access:"editMyProfil",children:Object(n.jsx)(An.LinkContainer,{to:"/profile",children:Object(n.jsx)(Dn.a.Item,{children:"Edit My Profil"})})}),Object(n.jsxs)(Fn,{access:"manageConsultants",children:[Object(n.jsx)(Dn.a.Divider,{}),Object(n.jsx)(An.LinkContainer,{to:"/admin/consultants",children:Object(n.jsx)(Dn.a.Item,{children:"Manage Consultant"})})]}),Object(n.jsxs)(Fn,{access:"manageDeals",children:[Object(n.jsx)(Dn.a.Divider,{}),Object(n.jsx)(An.LinkContainer,{to:"/admin/deals",children:Object(n.jsx)(Dn.a.Item,{children:"Manage Deals"})})]}),Object(n.jsx)(Dn.a.Divider,{}),Object(n.jsx)(An.LinkContainer,{to:"/login",children:Object(n.jsx)(Dn.a.Item,{onClick:function(){e((function(e){localStorage.clear(),e({type:W}),e({type:ee}),e({type:Se}),e({type:Ue}),e({type:y}),e({type:h}),e({type:m})}))},children:"Logout"})})]}):Object(n.jsx)(An.LinkContainer,{to:"/login",children:Object(n.jsxs)(In.a.Link,{children:[Object(n.jsx)("i",{className:"fas fa-user"}),"Sign In"]})}),Object(n.jsx)(Fn,{access:"adminMenu",children:Object(n.jsxs)(Dn.a,{title:"admin",children:[Object(n.jsx)(Fn,{access:"manageUsers",children:Object(n.jsx)(An.LinkContainer,{to:"/admin/users",children:Object(n.jsx)(Dn.a.Item,{children:"Manage Users"})})}),Object(n.jsxs)(Fn,{access:"manageSkills",children:[Object(n.jsx)(Dn.a.Divider,{}),Object(n.jsx)(An.LinkContainer,{to:"/admin/skills",children:Object(n.jsx)(Dn.a.Item,{children:"Manage Skills"})})]}),Object(n.jsxs)(Fn,{access:"manageProfils",children:[Object(n.jsx)(Dn.a.Divider,{}),Object(n.jsx)(An.LinkContainer,{to:"/admin/profils",children:Object(n.jsx)(Dn.a.Item,{children:"Manage Profils"})})]}),Object(n.jsxs)(Fn,{access:"manageCompanies",children:[Object(n.jsx)(Dn.a.Divider,{}),Object(n.jsx)(An.LinkContainer,{to:"/admin/companies",children:Object(n.jsx)(Dn.a.Item,{children:"Manage companies"})})]})]})})]})})]})})})},Bn=a(12),qn=a(4),zn=function(){return Object(n.jsx)("footer",{children:Object(n.jsx)(Ln.a,{children:Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{className:"text-center py-3",children:"Copyright \xa9 byJPR"})})})})},Xn=a(5),Hn=a(2),Qn=a(11),Kn=a(34),Yn=a(436),Vn=function(e){var t=e.variant,a=e.children;return Object(n.jsx)(Yn.a,{variant:t,className:"my-1",children:a})};Vn.defaultProps={variant:"info"};var Wn=Vn,Jn=a(437),Zn=function(){return Object(n.jsx)(Jn.a,{animation:"border",role:"status",stype:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(n.jsx)("span",{className:"sr-only",children:"Loading..."})})},$n=function(e){var t=e.children;return Object(n.jsx)(Ln.a,{children:Object(n.jsx)(Bn.a,{className:"justify-content-md-center",children:Object(n.jsx)(qn.a,{xs:12,md:6,children:t})})})},ec=function(e){var t=e.location,a=e.history,s=Object(c.useState)(""),r=Object(Xn.a)(s,2),l=r[0],o=r[1],d=Object(c.useState)(""),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(null),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(i.b)(),f=Object(i.c)((function(e){return e.userLogin})),g=f.loading,v=f.error,y=f.userInfo,S=t.search?t.search.split("=")[1]:"/";Object(c.useEffect)((function(){y&&"Validated"===y.status&&a.push(S)}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)($n,{children:[Object(n.jsx)("h1",{children:"Sign In"}),p&&Object(n.jsx)(Wn,{variant:"danger",children:p}),v&&Object(n.jsx)(Wn,{variant:"danger",children:v}),g&&Object(n.jsx)(Zn,{}),Object(n.jsxs)(Hn.a,{onSubmit:function(e){!1===e.currentTarget.checkValidity()?x("Please check your information"):(e.preventDefault(),m(function(e,t){return function(){var a=Object(Un.a)(wn.a.mark((function a(n){var c,s,r;return wn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:K}),c={headers:{"Content-type":"Application/json"}},a.next=5,Rn.a.post("/api/users/login",{email:e,password:t},c);case 5:s=a.sent,r=s.data,n({type:Y,payload:r}),localStorage.setItem("userInfo",JSON.stringify(r)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:V,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()}(l,u)))},children:[Object(n.jsxs)(Hn.a.Group,{controlId:"email",children:[Object(n.jsx)(Hn.a.Label,{children:"Email Address"}),Object(n.jsx)(Hn.a.Control,{type:"email",placeholder:"Enter Email",value:l,onChange:function(e){return o(e.target.value)}})]}),Object(n.jsxs)(Hn.a.Group,{controlId:"password",children:[Object(n.jsx)(Hn.a.Label,{children:"Password"}),Object(n.jsx)(Hn.a.Control,{type:"password",placeholder:"Enter password",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(n.jsx)(Qn.a,{type:"submit",variant:"primary",children:"Sign In"}),Object(n.jsx)(Bn.a,{className:"py-3",children:Object(n.jsxs)(qn.a,{children:["New User ? ",Object(n.jsx)(Nn.Link,{to:S?"/register?reditect=".concat(S):"/register",children:"Register"})]})})]})]}),Object(n.jsx)(Ln.a,{children:Object(n.jsx)(Bn.a,{className:"justify-content-md-center",children:Object(n.jsxs)(qn.a,{xs:12,md:6,className:"mt-5",children:[Object(n.jsx)("h3",{children:"Disclaimer"}),Object(n.jsxs)("p",{children:["Welcome on this demo! Please note that this is not an official Wavestone product.",Object(n.jsx)("br",{}),"On this online resource management application, you'll be able to:"]}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:"Login with different profiles (admin, coordinator, CDM, manager)"}),Object(n.jsx)("li",{children:"Edit your Pxx"}),Object(n.jsx)("li",{children:"Edit your consultants' profiles (position, expertise, partial time, etc.)"}),Object(n.jsx)("li",{children:"Create, edit and keep track of your staffing requests"}),Object(n.jsx)("li",{children:"Staff your available consultants on staffing requests"}),Object(n.jsx)("li",{children:"Check where a consultant is staffed"}),Object(n.jsx)("li",{children:"Create and manage a dataset of skills for your consultants"}),Object(n.jsx)("li",{children:"Get access to latest KPIs and export the data on Excel"})]}),Object(n.jsx)("h4",{children:"Test acounts logins:"}),Object(n.jsxs)(Kn.a,{hover:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-secondary",children:[Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Email"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Password"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Description"})]})}),Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle text-center",children:"cdmptc11000@mail.com"}),Object(n.jsx)("td",{className:"align-middle text-center",children:"123456"}),Object(n.jsx)("td",{className:"align-middle text-center",children:"Admin account with all accreditation on application"})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle text-center",children:"cdmptc11001@mail.com"}),Object(n.jsx)("td",{className:"align-middle text-center",children:"123456"}),Object(n.jsx)("td",{className:"align-middle text-center",children:"Coordinator of practice PTC1 account"})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle text-center",children:"cdmptc11004@mail.com"}),Object(n.jsx)("td",{className:"align-middle text-center",children:"123456"}),Object(n.jsx)("td",{className:"align-middle text-center",children:"CDM of practice PTC1 account"})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle text-center",children:"jessicamichelptc179@mail.com"}),Object(n.jsx)("td",{className:"align-middle text-center",children:"123456"}),Object(n.jsx)("td",{className:"align-middle text-center",children:"Manager of practice PTC1 account"})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle text-center",children:"arthurthomasptc112@mail.com"}),Object(n.jsx)("td",{className:"align-middle text-center",children:"123456"}),Object(n.jsx)("td",{className:"align-middle text-center",children:"Consultant of practice PTC1 account"})]})]})]})]})})})]})},tc=a(17),ac=a(22),nc=a(26),cc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",r=arguments.length>6?arguments[6]:void 0;return function(){var i=Object(Un.a)(wn.a.mark((function i(l,o){var d,j,u,b,h,O;return wn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,l({type:T}),d=o(),j=d.userLogin.userInfo,u={headers:{Authorization:"Bearer ".concat(j.token)}},b=c.toString(),s&&(b=b+"-"+s.toString()),i.next=8,Rn.a.get("/api/pxx/chart/availability?practice=".concat(e,"&start=").concat(t,"&end=").concat(a,"&skills=").concat(n,"&experience=").concat(b,"&filterMode=").concat(r),u);case 8:h=i.sent,O=h.data,l({type:L,payload:O}),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(0),l({type:A,payload:i.t0.response&&i.t0.response.data.message?i.t0.response.data.message:i.t0.message});case 16:case"end":return i.stop()}}),i,null,[[0,13]])})));return function(e,t){return i.apply(this,arguments)}}()},sc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"10",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"1";return function(){var s=Object(Un.a)(wn.a.mark((function s(r,i){var l,o,d,j,u;return wn.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,r({type:I}),l=i(),o=l.userLogin.userInfo,d={headers:{Authorization:"Bearer ".concat(o.token)}},s.next=6,Rn.a.get("/api/pxx?practice=".concat(e,"&month=").concat(t,"&keyword=").concat(a,"&pageSize=").concat(n,"&pageNumber=").concat(c),d);case 6:j=s.sent,u=j.data,r({type:D,payload:u}),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(0),r({type:k,payload:s.t0.response&&s.t0.response.data.message?s.t0.response.data.message:s.t0.message});case 14:case"end":return s.stop()}}),s,null,[[0,11]])})));return function(e,t){return s.apply(this,arguments)}}()},rc=function(e){var t=e.data,a=Object(i.b)(),s=Object(c.useState)(Number(t.prodDay)||0),r=Object(Xn.a)(s,2),l=r[0],o=r[1],d=Object(c.useState)(Number(t.notProdDay)||0),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(Number(t.leavingDay)||0),m=Object(Xn.a)(h,2),f=m[0],g=m[1],v=Object(c.useState)(Number(t.availableDay)||0),y=Object(Xn.a)(v,2),S=y[0],E=y[1],C=Object(c.useState)(Number(t.prodDay)+Number(t.notProdDay)+Number(t.leavingDay)+Number(t.availableDay)),N=Object(Xn.a)(C,1)[0],T=Object(c.useState)(!1),L=Object(Xn.a)(T,2),A=L[0],_=L[1],I=new Date(Date.now());I.setDate(1),I=I.toISOString().substring(0,10);var D=!!t.month&&t.month.firstDay>=I;return Object(c.useEffect)((function(){var e;A&&N>=l+u+f&&(E(N-(l+u+f)),a((e={_id:t._id,name:t.name,month:t.month._id,prodDay:l,notProdDay:u,leavingDay:f,availableDay:N-(l+u+f)},function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:O}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.put("/api/pxx",e,r);case 6:a({type:p}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:x,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}())),_(!1))}),[N,l,u,f,t]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(Bn.a,{className:"py-1",children:[Object(n.jsxs)(qn.a,{xs:4,className:"text-center align-middle",children:[Object(n.jsx)("b",{children:t.month?t.month.name:"Not created Yeat"})," ",Object(n.jsx)("i",{children:N?"(".concat(N,"d)"):null})]}),Object(n.jsx)(qn.a,{xs:2,className:"text-center align-middle px-1",children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{type:"number",min:0,max:N-u-f?N-u-f:"-",step:.5,disabled:!D||!N,className:"align-middle text-center p-0",value:l&&l.toString(),onChange:function(e){o(Number(e.target.value)),_(!0)}})})}),Object(n.jsx)(qn.a,{xs:2,className:"text-center align-middle px-1",children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{type:"number",min:0,max:N-l-f?N-l-f:"-",step:.5,disabled:!D||!N,className:"align-middle text-center p-0",value:u&&u.toString(),onChange:function(e){e.target.value.toString().match(/[0-9]*[,.]$/g)||(b(Number(e.target.value)),_(!0))}})})}),Object(n.jsx)(qn.a,{xs:2,className:"text-center align-middle px-1",children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{type:"number",min:0,max:N-l-u?N-l-u:"-",step:.5,disabled:!D||!N,className:"align-middle text-center p-0",value:f&&f.toString(),onChange:function(e){g(Number(e.target.value)),_(!0)}})})}),Object(n.jsx)(qn.a,{xs:2,className:"text-center align-middle px-1",children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{type:"number",min:0,max:N||"-",step:.5,className:"align-middle text-center p-0",value:S&&S.toString(),disabled:!0})})})]})})},ic=function(e){var t=e.consultantsMy,a=e.consultantFocus,s=e.searchDate,r=e.navigationMonthHandler,l=Object(i.b)(),o=Object(c.useState)(5),d=Object(Xn.a)(o,1)[0],h=Object(i.c)((function(e){return e.pxxMyToEdit})),O=h.loading,p=h.error,x=h.pxx,m=Object(i.c)((function(e){return e.pxxUpdate})),f=m.loading,g=m.error,v=t[a]._id;return Object(c.useEffect)((function(){l(function(e,t,a){return function(){var n=Object(Un.a)(wn.a.mark((function n(c,s){var r,i,l,o,d,h;return wn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:j}),r=s(),i=r.userLogin.userInfo,l={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(i.token)}},t.setUTCDate(1),o=t.toISOString().substring(0,10),n.next=8,Rn.a.get("/api/pxx/edit?consultantId=".concat(e,"&month=").concat(o,"&numberOfMonth=").concat(a),l);case 8:d=n.sent,h=d.data,c({type:u,payload:h}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),c({type:b,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e,t){return n.apply(this,arguments)}}()}(v,s,d))}),[l,s,d,v]),Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsxs)(Bn.a,{children:[Object(n.jsxs)(qn.a,{xs:4,className:"text-center align-middle px-1 pb-2",style:{height:"2em"},children:[" ",f&&Object(n.jsx)(Zn,{})]}),Object(n.jsx)(qn.a,{xs:2,className:"text-center align-middle px-1 pb-2",children:Object(n.jsx)("strong",{children:"Prd"})}),Object(n.jsx)(qn.a,{xs:2,className:"text-center align-middle px-1 pb-2",children:Object(n.jsx)("strong",{children:"NPrd"})}),Object(n.jsx)(qn.a,{xs:2,className:"text-center align-middle px-1 pb-2",children:Object(n.jsx)("strong",{children:"Hld"})}),Object(n.jsx)(qn.a,{xs:2,className:"text-center align-middle px-1 pb-2",children:Object(n.jsx)("strong",{children:"Avlb"})})]}),O?Object(n.jsx)(Zn,{}):p?Object(n.jsx)(Wn,{variant:"danger",children:p}):x.map((function(e,t){return Object(n.jsx)(rc,{data:e},t)})),g&&Object(n.jsx)(Bn.a,{children:Object(n.jsx)(Wn,{variant:"danger",children:g})}),Object(n.jsxs)(Bn.a,{children:[Object(n.jsx)(qn.a,{xs:0,md:6}),Object(n.jsx)(qn.a,{xs:6,md:2,className:"text-right",children:Object(n.jsxs)(Qn.a,{className:"btn btn-primary mt-3",variant:"primary",size:"sm",onClick:function(){return r(-1)},block:!0,children:[Object(n.jsx)("i",{className:"fas fa-caret-left"}),"  Previous"]})}),Object(n.jsx)(qn.a,{xs:6,md:2,className:"text-left",children:Object(n.jsxs)(Qn.a,{className:"btn btn-primary mt-3",variant:"primary",size:"sm",onClick:function(){return r(1)},block:!0,children:["Next  ",Object(n.jsx)("i",{className:"fas fa-caret-right"})]})}),Object(n.jsx)(qn.a,{xs:0,md:2})]})]})},lc=function(e){var t=e.children,a=e.title,s=e.close,r=Object(c.useState)(s),i=Object(Xn.a)(r,2),l=i[0],o=i[1];return Object(n.jsx)(Bn.a,{className:"mt-3",children:Object(n.jsxs)(qn.a,{children:[Object(n.jsxs)(Qn.a,{onClick:function(){return o(!l)},variant:"light",className:"text-left",block:!0,children:[" ",Object(n.jsx)("h3",{children:l?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("i",{className:"fas fa-caret-down"})," ",a]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("i",{className:"fas fa-caret-up"})," ",a]})})]}),!l&&t]})})};lc.defaultProps={close:!0};var oc=lc,dc=(a(125),function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a){return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:ye,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),jc=function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:De}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.get("/api/consultants/".concat(e),r);case 6:i=t.sent,l=i.data,a({type:ke,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:we,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},uc=function(){return function(){var e=Object(Un.a)(wn.a.mark((function e(t,a){var n,c,s,r,i;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Ze}),n=a(),c=n.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,Rn.a.get("/api/consultants/practicelist",s);case 6:r=e.sent,i=r.data,t({type:$e,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:et,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()},bc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"15";return function(){var n=Object(Un.a)(wn.a.mark((function n(c,s){var r,i,l,o,d;return wn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:Ee}),r=s(),i=r.userLogin.userInfo,l={headers:{Authorization:"Bearer ".concat(i.token)}},n.next=6,Rn.a.get("/api/consultants/admin/consultants?keyword=".concat(e,"&pageNumber=").concat(t,"&pageSize=").concat(a),l);case 6:o=n.sent,d=o.data,c({type:Ce,payload:d}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),c({type:Ne,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},hc=function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:dt}),c=n(),s=c.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.get("/api/consultants/".concat(e,"/skill"),r);case 6:i=t.sent,l=i.data,a({type:jt,payload:l.quality}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:ut,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},Oc=function(){return function(){var e=Object(Un.a)(wn.a.mark((function e(t,a){var n,c,s,r,i;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:ht}),n=a(),c=n.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,Rn.a.get("/api/consultants/skills",s);case 6:r=e.sent,i=r.data,t({type:Ot,payload:i.skills}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:pt,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()},pc=function(e){var t=e.history,a=e.consultantsMy,c=e.focusActive,s=Object(i.b)();return Object(n.jsxs)(Kn.a,{responsive:!0,hover:!0,striped:!0,className:"mt-3",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-light",children:[Object(n.jsx)("th",{className:"align-middle text-dark",children:"Consultant name"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Matricule"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Valued"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Arrival"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Leaving"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Seniority"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Comment"}),Object(n.jsx)("th",{className:"align-middle text-dark"})]})}),Object(n.jsx)("tbody",{children:a.map((function(e,a){return Object(n.jsxs)("tr",{onClick:function(){return c&&s(dc(a))},children:[Object(n.jsx)("td",{className:"align-middle",children:e.name}),Object(n.jsx)("td",{className:"align-middle",children:e.matricule}),Object(n.jsx)("td",{className:"align-middle",children:e.practice}),Object(n.jsx)("td",{className:"align-middle",children:e.valued?e.valued.substring(0,10):""}),Object(n.jsx)("td",{className:"align-middle",children:e.arrival?e.arrival.substring(0,10):""}),Object(n.jsx)("td",{className:"align-middle",children:e.leaving?e.leaving.substring(0,10):""}),Object(n.jsxs)("td",{className:"align-middle",children:[e.valued?((new Date(Date.now())-new Date(e.valued.substring(0,10)))/315576e5).toString().substring(0,4):0," years"]}),Object(n.jsx)("td",{className:"align-middle",children:e.comment}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(Qn.a,{className:"btn btn-light p-1",onClick:function(){return function(e,a){c&&s(dc(e)),t.push("/editconsultant/".concat(a))}(a,e._id)},children:Object(n.jsx)("i",{className:"fas fa-user-edit"})})})]},e._id)}))})]})},xc=a(268),mc=function(e){var t=e.title;return Object(n.jsx)(xc.a,{children:Object(n.jsx)("title",{children:t})})};mc.defaultProps={title:"Performance App"};var fc=mc,gc=function(e){var t=e.history,a=e.consultantId,s=e.displayedDeal,r=void 0===s?"":s,l=e.onNavigate,o=void 0===l?function(){return""}:l,d=Object(i.b)(),j=Object(i.c)((function(e){return e.consultantAllStaffs})),u=j.loading,b=j.staffings;return Object(c.useEffect)((function(){a&&d(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:mt}),c=n(),s=c.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.get("/api/consultants/staffings?consultantId=".concat(e),r);case 6:i=t.sent,l=i.data,a({type:ft,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:gt,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))}),[d,a]),Object(n.jsx)(Bn.a,{children:Object(n.jsxs)(qn.a,{children:[u&&Object(n.jsx)(Zn,{}),Object(n.jsxs)(Kn.a,{responsive:!0,hover:!0,striped:!0,className:"mt-3",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-light",children:[Object(n.jsx)("th",{className:"align-middle text-dark",children:"Company"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Title"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Probability"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Start"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Deal status"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Request status"}),Object(n.jsx)("th",{})]})}),Object(n.jsx)("tbody",{children:b&&b.map((function(e){return e._id.toString()!==r.toString()&&Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:e.company}),Object(n.jsx)("td",{className:"align-middle",children:e.title}),Object(n.jsx)("td",{className:"align-middle",children:e.mainPractice}),Object(n.jsxs)("td",{className:"align-middle",children:[e.probability," %"]}),Object(n.jsx)("td",{className:"align-middle",children:e.startDate.substring(0,10)}),Object(n.jsx)("td",{className:"align-middle",children:e.status}),Object(n.jsx)("td",{className:"align-middle",children:e.requestStatus}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(Qn.a,{onClick:function(){t.push("/staffing/".concat(e._id)),o()},variant:"light",children:Object(n.jsx)("i",{className:"fas fa-edit"})})})]},e._id)}))})]})]})})},vc=function(e,t){return function(){var a=Object(Un.a)(wn.a.mark((function a(n,c){var s,r,i;return wn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:oa}),s=c(),r=s.userLogin.userInfo,i={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r.token)}},a.next=6,Rn.a.put("/api/deals/".concat(e),t,i);case 6:n({type:da}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:ja,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()},yc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(){var c=Object(Un.a)(wn.a.mark((function c(s,r){var i,l,o,d,j;return wn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s({type:ba}),i=r(),l=i.userLogin.userInfo,o={headers:{Authorization:"Bearer ".concat(l.token)}},c.next=6,Rn.a.get("/api/deals?title=".concat(e.title,"&company=").concat(e.company,"&contact=").concat(e.contact,"&status=").concat(e.status,"&request=").concat(e.request,"&pageNumber=").concat(t,"&pageSize=").concat(a,"&state=").concat(n,"&filterMy=").concat(e.filterMy,"&staff=").concat(e.staff),o);case 6:d=c.sent,j=d.data,s({type:ha,payload:j}),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),s({type:Oa,payload:c.t0.response&&c.t0.response.data.message?c.t0.response.data.message:c.t0.message});case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e,t){return c.apply(this,arguments)}}()},Sc=function(e){var t=e.history,a=e.consultantId,s=(e.displayedDeal,e.onNavigate),r=void 0===s?function(){return""}:s,l=Object(i.b)(),o=Object(i.c)((function(e){return e.dealOld})),d=o.loading,j=o.oldDeals;return Object(c.useEffect)((function(){a&&l(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ca}),c=n(),s=c.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.get("/api/deals/old?consultantId=".concat(e),r);case 6:i=t.sent,l=i.data,a({type:Na,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Ta,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))}),[l,a]),Object(n.jsx)(Bn.a,{children:Object(n.jsxs)(qn.a,{children:[d&&Object(n.jsx)(Zn,{}),Object(n.jsxs)(Kn.a,{responsive:!0,hover:!0,striped:!0,className:"mt-3",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-light",children:[Object(n.jsx)("th",{className:"align-middle text-dark",children:"Company"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Title"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Probability"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Start"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Deal status"}),Object(n.jsx)("th",{className:"align-middle text-dark",children:"Request status"}),Object(n.jsx)("th",{})]})}),Object(n.jsx)("tbody",{children:j&&j.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:e.company}),Object(n.jsx)("td",{className:"align-middle",children:e.title}),Object(n.jsx)("td",{className:"align-middle",children:e.mainPractice}),Object(n.jsxs)("td",{className:"align-middle",children:[e.probability," %"]}),Object(n.jsx)("td",{className:"align-middle",children:e.startDate.substring(0,10)}),Object(n.jsx)("td",{className:"align-middle",children:e.status}),Object(n.jsx)("td",{className:"align-middle",children:e.staffingRequest.requestStatus}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(Qn.a,{onClick:function(){t.push("/staffing/".concat(e._id)),r()},variant:"light",children:Object(n.jsx)("i",{className:"fas fa-edit"})})})]},e._id)}))})]})]})})},Ec=a(29),Cc=a(63),Nc=a(78),Tc=function(e){var t=e.value,a=e.setValue,c=e.text,s=e.color,r=e.editable,i=Object(Ec.a)(new Array(Math.floor(t)).fill(1));for(t%1>=.5&&i.push(t%1);i.length<5;)i.push(0);return Object(n.jsx)(Hn.a.Group,{className:"mb-0",children:Object(n.jsxs)(ac.a,{children:[i&&i.map((function(e,t){return Object(n.jsx)("span",{children:Object(n.jsx)(Qn.a,{className:"mx-0 px-0",variant:"ligth",onClick:function(){r&&a(e>=1?t:e>=.5?t+1:t+.5)},children:Object(n.jsx)("i",{style:{color:s},className:e>=1?"fas fa-star":e>=.5?"fas fa-star-half-alt":"far fa-star"})})},t)})),Object(n.jsx)("span",{children:c&&c})]})})};Tc.defaultProps={color:"#f8e825",text:"",editable:!0};var Lc=Tc,Ac=function(e){var t=e.consultantId,a=e.skill,s=e.val,r=e.setUpdate,l=e.editable,o=void 0===l||l,d=Object(i.b)(),j=Object(i.c)((function(e){return e.consultantUpdateSkill})).success,u=Object(i.c)((function(e){return e.consultantDeleteSkill})).success,b=Object(c.useState)(a.level),h=Object(Xn.a)(b,2),O=h[0],p=h[1],x=Object(c.useState)(a.level),m=Object(Xn.a)(x,2),f=m[0],g=m[1];Object(c.useEffect)((function(){u&&r(!0)}),[u,r]),Object(c.useEffect)((function(){j&&(p(f),d({type:kt}))}),[d,j,f]);var v=function(e,t){d(function(e,t){return function(){var a=Object(Un.a)(wn.a.mark((function a(n,c){var s,r,i;return wn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:Nt}),s=c(),r=s.userLogin.userInfo,i={headers:{Authorization:"Bearer ".concat(r.token)}},a.next=6,Rn.a.delete("/api/consultants/".concat(e,"/skill/").concat(t),i);case 6:n({type:Tt}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:Lt,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()}(e,t))};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(Hn.a.Row,{children:[Object(n.jsx)(qn.a,{xs:3,children:Object(n.jsx)(Hn.a.Group,{controlId:"skillName",className:"mb-0",children:Object(n.jsx)(Hn.a.Control,{plaintext:!0,readOnly:!0,value:a.skill&&a.skill.name})})}),Object(n.jsx)(qn.a,{children:Object(n.jsx)(Lc,{value:Number(O),setValue:function(e){d(function(e,t,a){return function(){var n=Object(Un.a)(wn.a.mark((function n(c,s){var r,i,l;return wn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:_t}),r=s(),i=r.userLogin.userInfo,l={headers:{Authorization:"Bearer ".concat(i.token)}},n.next=6,Rn.a.put("/api/consultants/".concat(e,"/skill/").concat(t),{level:a},l);case 6:c({type:It}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),c({type:Dt,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()}(t,a.skill._id,e)),g(e)},editable:o})}),Object(n.jsx)(qn.a,{children:o&&Object(n.jsx)(Hn.a.Group,{className:"mb-0",children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(Qn.a,{variant:"secondary",size:"sm",onClick:function(){return v(t,a.skill._id)},children:Object(n.jsx)("i",{className:"fas fa-times-circle"})})})})})]},s)})},_c=function(e){var t=e.consultantId,a=e.close,s=void 0===a||a,r=e.editable,l=void 0===r||r,o=Object(i.b)(),d=Object(c.useState)("default"),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)("default"),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(c.useState)(1),f=Object(Xn.a)(m,2),g=f[0],v=f[1],y=Object(c.useState)([]),S=Object(Xn.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)([]),T=Object(Xn.a)(N,2),L=T[0],A=T[1],_=Object(c.useState)(!1),I=Object(Xn.a)(_,2),D=I[0],k=I[1],w=Object(i.c)((function(e){return e.consultantAllSkills})).skills,U=Object(i.c)((function(e){return e.consultantSkills})),P=U.loading,R=U.skills,M=Object(i.c)((function(e){return e.consultantAddSkill})),F=M.loading,G=M.success,B=M.error;Object(c.useEffect)((function(){w||o(Oc())}),[o,w]),Object(c.useEffect)((function(){o(hc(t))}),[o,t]),Object(c.useEffect)((function(){if(R){var e=q(R);A(e)}}),[o,R,t]),Object(c.useEffect)((function(){D&&!P&&(o(hc(t)),k(!1))}),[o,D,t,P]),Object(c.useEffect)((function(){if(w){var e=w.map((function(e){return e.category}));e=Object(Ec.a)(new Set(e)),C(e)}}),[w]),Object(c.useEffect)((function(){G&&k(!0)}),[G]);var q=function(e){for(var t=Object(Ec.a)(new Set(e.map((function(e){return e.skill.category})))),a=[],n=function(n){a.push({category:t[n],data:e.filter((function(e){return e.skill.category===t[n]}))})},c=0;c<t.length;c++)n(c);return a},z=function(e,t,a){o(function(e,t,a){return function(){var n=Object(Un.a)(wn.a.mark((function n(c,s){var r,i,l,o;return wn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r={skill:t,level:a},c({type:yt}),i=s(),l=i.userLogin.userInfo,o={headers:{Authorization:"Bearer ".concat(l.token)}},n.next=7,Rn.a.put("/api/consultants/".concat(e,"/skill"),r,o);case 7:c({type:St}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),c({type:Et,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()}(e,t,a))};return Object(n.jsxs)(oc,{title:"Skills",close:s,children:[l&&Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsx)("h4",{children:"Add skills"}),Object(n.jsxs)(Hn.a.Row,{className:"mt-3 align-items-end",children:[Object(n.jsx)(qn.a,{xs:12,md:3,children:Object(n.jsxs)(Hn.a.Group,{controlId:"skillCategory",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("strong",{children:"Category"})}),Object(n.jsxs)(Hn.a.Control,{as:"select",value:u||"default",onChange:function(e){return b(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"default",children:"Please Select"}),E&&E.map((function(e,t){return Object(n.jsx)("option",{value:e,children:e},t)}))]})]})}),Object(n.jsx)(qn.a,{xs:12,md:3,children:Object(n.jsxs)(Hn.a.Group,{controlId:"skillName",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("strong",{children:"Skill"})}),Object(n.jsx)(Cc.a,{placement:"top",overlay:Object(n.jsx)(Nc.a,{id:"button-tooltip-2",children:p&&w?w.map((function(e){return e._id===p&&e.description})):"no description"}),children:Object(n.jsxs)(Hn.a.Control,{as:"select",value:p||"default",onChange:function(e){return x(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"default",children:"Please Select"}),w&&u&&w.map((function(e,t){return e.category===u&&Object(n.jsx)("option",{value:e._id,children:e.name},t)}))]})})]})}),Object(n.jsx)(qn.a,{xs:12,md:3,children:Object(n.jsxs)(Hn.a.Group,{controlId:"skillLevel",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("strong",{children:"Level"})}),Object(n.jsx)(Hn.a.Control,{type:"number",min:0,max:5,step:.5,value:g||1,onChange:function(e){return v(e.target.value)},required:!0})]})}),Object(n.jsx)(qn.a,{xs:12,md:3,className:"align-items-bottom",children:Object(n.jsx)(Hn.a.Group,{children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(Qn.a,{block:!0,onClick:function(){return z(t,p,g)},children:F?Object(n.jsx)(Zn,{}):"Add"})})})})]}),B&&Object(n.jsx)(Wn,{variant:"danger",children:B})]}),Object(n.jsx)(tc.a.Item,{children:L&&L.length?Object(n.jsx)(tc.a,{variant:"flush",children:L.map((function(e,a){return Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsx)("h4",{children:e.category}),e.data.map((function(e,a){return Object(n.jsx)(Ac,{consultantId:t,skill:e,val:a,setUpdate:k,editable:l},a)}))]},a)}))}):Object(n.jsx)("p",{children:"Please add quality"})})]})},Ic=function(e){var t=e.history,a=Object(i.b)(),s=Object(c.useState)(""),r=Object(Xn.a)(s,2),l=r[0],o=r[1],d=Object(i.c)((function(e){return e.userLogin})).userInfo,j=Object(i.c)((function(e){return e.consultantsMyList})),u=j.loading,b=j.error,h=j.consultantsMy,O=j.focus,p=Object(c.useState)(new Date(Date.now())),x=Object(Xn.a)(p,2),m=x[0],f=x[1];Object(c.useEffect)((function(){d||t.push("/login")}),[t,d]),Object(c.useEffect)((function(){a(function(){var e=Object(Un.a)(wn.a.mark((function e(t,a){var n,c,s,r,i;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:fe}),n=a(),c=n.userLogin.userInfo,s={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,Rn.a.get("/api/consultants",s);case 6:r=e.sent,i=r.data,t({type:ge,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:ve,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())}),[a,O]),Object(c.useEffect)((function(){h&&o(h[O].comment)}),[h,O]);var g=function(e){O+e>=0&&O+e<h.length&&a(dc(O+e))},v=function(e,t){a(function(e,t){return function(){var a=Object(Un.a)(wn.a.mark((function a(n,c){var s,r,i;return wn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:at}),s=c(),r=s.userLogin.userInfo,i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.token)}},a.next=6,Rn.a.put("/api/consultants/comment/".concat(e),{commentText:t},i);case 6:n({type:nt}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:ct,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()}(e,t))};return Object(n.jsxs)(Ln.a,{children:[Object(n.jsx)(fc,{}),u?Object(n.jsx)(Zn,{}):b?Object(n.jsx)(Wn,{variant:"danger",children:b}):h&&0!==h.length?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"border-bottom p-3",children:[Object(n.jsxs)(Bn.a,{children:[Object(n.jsx)(qn.a,{className:"text-center",xs:2,children:Object(n.jsx)(Qn.a,{variant:"primary",size:"sm",onClick:function(){return g(-1)},disabled:0===O,children:Object(n.jsx)("i",{className:"fas fa-caret-left"})})}),Object(n.jsx)(qn.a,{className:"text-center",xs:8,children:Object(n.jsx)(An.LinkContainer,{to:"/editconsultant/".concat(h[O]._id),children:Object(n.jsx)(In.a.Link,{children:Object(n.jsxs)("h4",{children:[h[O].name," ",Object(n.jsxs)("i",{children:["(",h[O].matricule,")"]})]})})})}),Object(n.jsx)(qn.a,{className:"text-center",xs:2,children:Object(n.jsx)(Qn.a,{variant:"primary",size:"sm",onClick:function(){return g(1)},disabled:O===h.length-1,children:Object(n.jsx)("i",{className:"fas fa-caret-right"})})})]}),Object(n.jsxs)(Bn.a,{className:"mt-3",children:[Object(n.jsx)(qn.a,{xs:12,md:4,children:Object(n.jsx)(tc.a,{children:Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsxs)(Bn.a,{className:"my-3",children:[Object(n.jsxs)(qn.a,{className:"text-left",children:[Object(n.jsx)("b",{children:"Arrival:"})," ",h[O].arrival&&h[O].arrival.substring(0,10)]}),Object(n.jsxs)(qn.a,{className:"text-left",children:[Object(n.jsx)("b",{children:"Valued:"})," ",h[O].valued&&h[O].valued.substring(0,10)]}),Object(n.jsxs)(qn.a,{className:"text-left",children:[Object(n.jsx)("b",{children:"Leaving:"})," ",h[O].leaving&&h[O].leaving.substring(0,10)]})]}),Object(n.jsx)(Bn.a,{className:"my-3",children:Object(n.jsxs)(qn.a,{children:[Object(n.jsx)("b",{children:"Seniority:"})," ",((new Date(Date.now())-new Date(h[O].arrival.substring(0,10)))/315576e5).toString().substring(0,4)," years"]})}),Object(n.jsx)(Bn.a,{className:"my-3",children:Object(n.jsx)(qn.a,{children:!(h[O]._id===d.consultantProfil._id)&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("label",{htmlFor:"comment",children:Object(n.jsx)("strong",{children:"Staffing comment"})}),Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{as:"textarea",rows:4,id:"comment",value:l,placeholder:"Please enter a comment",onChange:function(e){o(e.target.value),v(h[O]._id,e.target.value)}})})]})})})]})})}),Object(n.jsx)(qn.a,{xs:12,md:8,children:Object(n.jsx)(ic,{consultantsMy:h,consultantFocus:O,searchDate:m,navigationMonthHandler:function(e){var t=new Date(m);t.setMonth(t.getMonth()+e),f(t)}})})]})]}),Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:Object(n.jsx)(Fn,{access:"viewStaffings",children:Object(n.jsx)(oc,{title:"Staffings on track",close:!1,children:Object(n.jsx)(gc,{history:t,consultantId:h[O]._id})})})})}),Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:Object(n.jsx)(oc,{title:"Old staffings",close:!0,children:Object(n.jsx)(Sc,{history:t,consultantId:h[O]._id})})})}),Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:Object(n.jsx)(Fn,{access:"viewSkills",children:Object(n.jsx)(_c,{consultantId:h[O]._id})})})}),Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:Object(n.jsx)(Fn,{access:"viewOthersConsultants",children:Object(n.jsx)(oc,{title:"Others consultants",close:!0,children:Object(n.jsx)(pc,{consultantsMy:h,history:t,focusActive:!0})})})})})]}):Object(n.jsx)(Wn,{variant:"info",children:"You don't have consultant to edit yet"})]})},Dc=function(e){var t=e.history,a=e.match,s=Object(i.b)(),r=Object(c.useState)(""),l=Object(Xn.a)(r,2),o=l[0],d=l[1],j=Object(c.useState)(""),u=Object(Xn.a)(j,2),b=u[0],h=u[1],O=Object(c.useState)(""),p=Object(Xn.a)(O,2),x=p[0],m=p[1],f=Object(c.useState)(""),g=Object(Xn.a)(f,2),v=g[0],y=g[1],S=Object(c.useState)("Analyst"),E=Object(Xn.a)(S,2),C=E[0],N=E[1],T=Object(c.useState)(""),L=Object(Xn.a)(T,2),A=L[0],_=L[1],I=Object(c.useState)(""),D=Object(Xn.a)(I,2),k=D[0],w=D[1],U=Object(c.useState)(""),P=Object(Xn.a)(U,2),R=P[0],M=P[1],F=Object(c.useState)(""),G=Object(Xn.a)(F,2),B=G[0],q=G[1],z=Object(c.useState)(""),X=Object(Xn.a)(z,2),H=X[0],Q=X[1],K=Object(c.useState)(!1),Y=Object(Xn.a)(K,2),V=Y[0],W=Y[1],J=Object(c.useState)(!1),Z=Object(Xn.a)(J,2),$=Z[0],ee=Z[1],te=Object(c.useState)(""),ae=Object(Xn.a)(te,2),ne=ae[0],ce=ae[1],se=Object(c.useState)(""),re=Object(Xn.a)(se,2),ie=re[0],le=re[1],oe=Object(c.useState)(1),de=Object(Xn.a)(oe,2),je=de[0],ue=de[1],be=Object(c.useState)(1),he=Object(Xn.a)(be,2),Oe=he[0],pe=he[1],xe=Object(c.useState)(1),fe=Object(Xn.a)(xe,2),ge=fe[0],ve=fe[1],ye=Object(c.useState)(1),Se=Object(Xn.a)(ye,2),Ee=Se[0],Ce=Se[1],Ne=Object(c.useState)(1),Te=Object(Xn.a)(Ne,2),Le=Te[0],Ae=Te[1],_e=Object(c.useState)(""),Ie=Object(Xn.a)(_e,2),De=Ie[0],ke=Ie[1],we=Object(c.useState)(""),Ue=Object(Xn.a)(we,2),Xe=Ue[0],He=Ue[1],Qe=Object(c.useState)(!1),Ke=Object(Xn.a)(Qe,2),Je=Ke[0],Ze=Ke[1],$e=a.params.id?"edit":"create",et=Object(i.c)((function(e){return e.userLogin})).userInfo,tt=Object(i.c)((function(e){return e.consultantMy})),at=tt.loading,nt=tt.error,ct=tt.consultant,st=Object(i.c)((function(e){return e.consultantMyUpdate})),rt=st.loading,it=st.error,lt=st.success,ot=Object(i.c)((function(e){return e.consultantCreate})),dt=ot.loading,jt=ot.error,ut=ot.success,bt=ot.consultantCreated,ht=Object(i.c)((function(e){return e.consultantCDMList})),Ot=ht.error,pt=ht.cdmList,xt=Object(i.c)((function(e){return e.consultantPracticeList})),mt=xt.error,ft=xt.practiceList;Object(c.useEffect)((function(){et||t.push("/login")}),[t,et]),Object(c.useEffect)((function(){a.params.id&&(ct||s(jc(a.params.id)))}),[s,a,ct]),Object(c.useEffect)((function(){a.params.id&&ct&&ct._id!==a.params.id&&s(jc(a.params.id))}),[s,a,ct]),Object(c.useEffect)((function(){Je&&(s(jc(a.params.id)),Ze(!1))}),[s,Je,a]),Object(c.useEffect)((function(){a.params.id&&lt&&Ze(!0)}),[a,lt]),Object(c.useEffect)((function(){ft||s(uc())}),[s,et,ft]),Object(c.useEffect)((function(){v&&s(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ye}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.get("/api/consultants/cdm/".concat(e),r);case 6:i=t.sent,l=i.data,a({type:Ve,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:We,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(v))}),[s,v]),Object(c.useEffect)((function(){a.params.id&&ct&&(d(ct.name),h(ct.email),m(ct.matricule),y(ct.practice),N(ct.grade),_(ct.cdmId?ct.cdmId:""),w(ct.arrival.substring(0,10)),M(ct.valued?ct.valued.substring(0,10):""),q(ct.leaving?ct.leaving.substring(0,10):""),Q(((new Date(Date.now())-new Date(ct.arrival.substring(0,10)))/315576e5).toString().substring(0,4)),W(ct.isCDM||!1),ee(ct.isPartialTime.value),ce(!!ct.isPartialTime.start.substring(0,10)&&ct.isPartialTime.start.substring(0,10)),le(!!ct.isPartialTime.end.substring(0,10)&&ct.isPartialTime.end.substring(0,10)),ue(ct.isPartialTime.week.filter((function(e){return 1===e.num}))[0].worked),pe(ct.isPartialTime.week.filter((function(e){return 2===e.num}))[0].worked),ve(ct.isPartialTime.week.filter((function(e){return 3===e.num}))[0].worked),Ce(ct.isPartialTime.week.filter((function(e){return 4===e.num}))[0].worked),Ae(ct.isPartialTime.week.filter((function(e){return 5===e.num}))[0].worked))}),[a,ct,$e]),Object(c.useEffect)((function(){!v&&et&&ft&&y(ft[0])}),[et,v,ft,A,pt]),Object(c.useEffect)((function(){it&&(ke({message:it,type:"danger"}),s({type:Fe})),lt&&(He({message:"Consultant updated",type:"success"}),s({type:Fe})),jt&&(ke({message:jt,type:"danger"}),s({type:ze})),ut&&(He({message:"Consultant created",type:"success"}),t.push("/editconsultant/".concat(bt._id)),s({type:ze}))}),[s,t,it,lt,ut,jt,bt]);return Object(n.jsxs)(n.Fragment,{children:[nt&&Object(n.jsx)(Wn,{variant:"danger",children:nt}),De&&Object(n.jsx)(Wn,{variant:"danger",children:De.message}),Ot&&Object(n.jsx)(Wn,{variant:"danger",children:Ot}),mt&&Object(n.jsx)(Wn,{variant:"danger",children:mt}),at&&Object(n.jsx)(Zn,{}),Object(n.jsx)(Qn.a,{className:"mb-3",onClick:function(){return t.go(-1),ke(""),void He("")},children:"Go Back"}),Object(n.jsx)(Fn,{access:"editConsultantProfil",children:Object(n.jsx)(Ln.a,{children:Object(n.jsx)(Bn.a,{className:"justify-content-md-center",children:Object(n.jsx)(qn.a,{xs:12,md:8,children:Object(n.jsxs)(Hn.a,{onSubmit:function(e){if(e.preventDefault(),"edit"===$e){var t=Object(me.a)(Object(me.a)({},ct),{},{name:o,matricule:x,arrival:new Date(k),valued:new Date(R),leaving:B?new Date(B):null,isCDM:V,grade:C,cdmId:A,isPartialTime:{value:$,start:$?ne:"",end:$?ie:"",week:[{num:1,worked:$?je:1},{num:2,worked:$?Oe:1},{num:3,worked:$?ge:1},{num:4,worked:$?Ee:1},{num:5,worked:$?Le:1}]}});s(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Pe}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.put("/api/consultants/".concat(e._id),e,r);case 6:if(t.sent.data){t.next=10;break}throw new Error("Error: your modification is not saved");case 10:a({type:Re}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:Me,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))}"create"===$e&&s(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ge}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.post("/api/consultants",e,r);case 6:i=t.sent,l=i.data,a({type:Be,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:qe,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}({name:o,email:b,matricule:x,arrival:k,valued:R,leaving:B,practice:v,isCDM:V,grade:C,cdmId:A,isPartialTime:{value:$,start:ne,end:ie,week:[{num:1,worked:je},{num:2,worked:Oe},{num:3,worked:ge},{num:4,worked:Ee},{num:5,worked:Le}]}}))},children:[Object(n.jsx)("h2",{children:o&&o}),Object(n.jsx)(oc,{title:"Personal",close:"create"!==$e,children:Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsx)(Hn.a.Row,{children:Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"name",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Name"})}),Object(n.jsx)(Hn.a.Control,{type:"name",placeholder:"Enter Name",value:o&&o,onChange:function(e){return d(e.target.value)},required:!0})]})})}),Object(n.jsxs)(Hn.a.Row,{children:[Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"matricule",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Matricule"})}),Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Enter Matricule",value:x&&x,onChange:function(e){return m(e.target.value)},required:!0})]})}),Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"seniority",children:[Object(n.jsxs)(Hn.a.Label,{children:[Object(n.jsx)("b",{children:"Seniority"})," ",Object(n.jsx)("i",{children:"(years)"})]}),Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"-",value:H&&H,readOnly:!0})]})})]}),Object(n.jsx)(Hn.a.Row,{children:Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"email",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Email Address"})}),Object(n.jsx)(Hn.a.Control,{type:"email",placeholder:"Enter email",value:b&&b,onChange:function(e){return h(e.target.value)},required:!0})]})})})]})}),ct&&"create"!==$e&&Object(n.jsx)(_c,{consultantId:ct._id}),Object(n.jsx)(oc,{title:"Profil",close:!1,children:Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsx)(Hn.a.Row,{children:Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"practice",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Practice"})}),Object(n.jsx)(ac.a,{children:Object(n.jsx)(Hn.a.Control,{as:"select",value:v||(et?et.consultantProfil.practice:""),onChange:function(e){y(e.target.value)},required:!0,children:ft?mt?Object(n.jsx)(Wn,{variant:"Danger",children:"No Practice found"}):ft.map((function(e){return Object(n.jsx)("option",{value:e,disabled:"-"===e,children:e},e)})):Object(n.jsx)("option",{value:v&&v,children:v})})})]})})}),Object(n.jsx)(Hn.a.Row,{children:Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"grade",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Grade"})}),Object(n.jsx)(Hn.a.Control,{as:"select",placeholder:"Enter grade",value:C&&C,onChange:function(e){return N(e.target.value)},required:!0,children:Qt.map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}))})]})})}),Object(n.jsx)(Hn.a.Row,{children:Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"cdm",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"CDM"})}),Object(n.jsxs)(Hn.a.Control,{as:"select",value:A||"default",onChange:function(e){return _(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"default",children:"Please Select"}),pt?Ot?Object(n.jsx)(Wn,{variant:"danger",children:"No CDM found, please verify Practice"}):pt.length&&pt.map((function(e){return Object(n.jsx)("option",{value:e._id,children:e.name},e._id)})):"No cdm"]})]})})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Hn.a.Row,{children:[Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"valued",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Valued date"})}),Object(n.jsx)(Hn.a.Control,{type:"date",value:R&&R,onChange:function(e){return function(e){M(e.substring(0,10)),Q(((new Date(Date.now())-new Date(e.substring(0,10)))/315576e5).toString().substring(0,4))}(e.target.value)},required:!0})]})}),Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"arrival",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Arrival date"})}),Object(n.jsx)(Hn.a.Control,{type:"date",value:k&&k,min:R,onChange:function(e){w(e.target.value)},required:!0})]})}),Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"leaving",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Leaving date"})}),Object(n.jsx)(Hn.a.Control,{type:"date",value:B&&B,min:k,onChange:function(e){return q(e.target.value)}})]})})]})}),Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsxs)(Hn.a.Row,{children:[Object(n.jsx)(qn.a,{children:Object(n.jsx)(Hn.a.Group,{controlId:"partialtime",children:Object(n.jsx)(Hn.a.Check,{type:"checkbox",label:"Partial time",checked:!!$,onChange:function(e){ee(e.target.checked)}})})}),$&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"startpartialtime",children:[Object(n.jsx)(Hn.a.Label,{children:"Start"}),Object(n.jsx)(Hn.a.Control,{type:"Date",min:k&&k,value:ne&&ne,onChange:function(e){ce(e.target.value.substring(0,10)),!ie&&le(e.target.value.substring(0,10)),ie<e.target.value.substring(0,10)&&le(e.target.value.substring(0,10))},required:!0})]})}),Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"endpartialtime",children:[Object(n.jsx)(Hn.a.Label,{children:"End"}),Object(n.jsx)(Hn.a.Control,{type:"Date",value:ie&&ie,min:ne||"",onChange:function(e){le(e.target.value.substring(0,10))},required:!0})]})})]})]}),$&&Object(n.jsxs)(Hn.a.Row,{children:[Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"monday",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Monday"})}),Object(n.jsx)(Hn.a.Control,{type:"Number",min:0,max:1,step:.5,value:Number(je),onChange:function(e){return ue(e.target.value)}})]})}),Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"tuesday",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Tuesday"})}),Object(n.jsx)(Hn.a.Control,{type:"Number",min:0,max:1,step:.5,value:Number(Oe),onChange:function(e){return pe(e.target.value)}})]})}),Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"wendnesday",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Wendnesday"})}),Object(n.jsx)(Hn.a.Control,{type:"Number",min:0,max:1,step:.5,value:Number(ge),onChange:function(e){return ve(e.target.value)}})]})}),Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"thursday",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Thursday"})}),Object(n.jsx)(Hn.a.Control,{type:"Number",min:0,max:1,step:.5,value:Number(Ee),onChange:function(e){return Ce(e.target.value)}})]})}),Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"friday",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Friday"})}),Object(n.jsx)(Hn.a.Control,{type:"Number",min:0,max:1,step:.5,value:Number(Le),onChange:function(e){return Ae(e.target.value)}})]})})]})]}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsx)(Hn.a.Row,{children:Object(n.jsx)(qn.a,{children:Object(n.jsx)(Hn.a.Group,{controlId:"iscdm",children:Object(n.jsx)(Hn.a.Check,{type:"checkbox",label:"Is CDM",checked:!!V,onChange:function(e){W(e.target.checked)}})})})})})]})}),Object(n.jsx)(Hn.a.Row,{className:"pt-3",children:Object(n.jsx)(qn.a,{children:Object(n.jsx)(Qn.a,{type:"submit",variant:"primary",block:!0,disabled:!o||!b||!x||!v||!A||!R||!k,children:rt||dt?Object(n.jsx)(Zn,{}):"create"===$e?"Create":"Update"})})}),Object(n.jsx)(Hn.a.Row,{children:Object(n.jsx)(qn.a,{children:Xe&&Object(n.jsx)(Wn,{variant:"success",children:Object(n.jsx)("i",{className:"fas fa-check-circle",children:"  Your information is correctly registered"})})})})]})})})})})]})},kc=a(73),wc=function(e){var t=e.setImportData,a=e.sheets,s=void 0===a?"all":a,r=Object(c.useState)(""),i=Object(Xn.a)(r,2),l=i[0],o=i[1],d=function(){var e=Object(Un.a)(wn.a.mark((function e(a){var n,c;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.target.files[0],(c=new FileReader).onload=function(e){for(var a=e.target.result,c=kc.read(a,{type:"binary"}),r=[],i=0;i<c.SheetNames.length;i++){var l=c.SheetNames[i],d=c.Sheets[l];r.push(kc.utils.sheet_to_json(d))}"1"===s&&t(r[0].map((function(e){return Object(me.a)(Object(me.a)({},e),{},{status:"not imported"})}))),"all"===s&&t(r),o(n.name)},c.readAsBinaryString(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(Hn.a,{children:Object(n.jsxs)(Hn.a.File,{id:"importData",custom:!0,children:[Object(n.jsx)(Hn.a.File.Label,{"data-browse":"Upload",children:l||"  ...  "}),Object(n.jsx)(Hn.a.File.Input,{onChange:function(e){return d(e)}})]})})},Uc=a(39),Pc=a.n(Uc),Rc=a(25),Mc=a(23),Fc=a(271),Gc=function(e){var t=Object(i.b)(),a=Object(c.useState)(0),s=Object(Xn.a)(a,2),r=s[0],l=s[1],o=Object(i.c)((function(e){return e.consultantUploadWk})),d=o.loading,j=o.error,u=o.path,b=Object(i.c)((function(e){return e.consultantUpdateWk})),h=b.loading,O=b.error,p=b.message;return Object(n.jsxs)(Mc.a,Object(me.a)(Object(me.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(n.jsx)(Mc.a.Header,{closeButton:!0,children:Object(n.jsx)(Bn.a,{className:"align-items-center",children:Object(n.jsx)(qn.a,{className:"text-center",children:Object(n.jsx)(Mc.a.Title,{id:"contained-modal-title-vcenter",children:"Import consultants data from Wavekeeper"})})})}),Object(n.jsxs)(Mc.a.Body,{children:[Object(n.jsxs)(Bn.a,{className:"mb-3",children:[Object(n.jsx)(qn.a,{children:Object(n.jsx)(Qn.a,{className:r>=0?"text-primary":"text-secondary",onClick:function(){return l(0)},variant:"ligth",disabled:r<0,children:Object(n.jsx)("strong",{children:"1-Guidelines"})})}),Object(n.jsx)(qn.a,{children:Object(n.jsx)(Qn.a,{className:r>=1?"text-primary":"text-secondary",onClick:function(){return l(1)},variant:"ligth",disabled:r<1,children:Object(n.jsx)("strong",{children:"2-Upload in App"})})}),Object(n.jsx)(qn.a,{children:Object(n.jsx)(Qn.a,{className:r>=2?"text-primary":"text-secondary",onClick:function(){return l(2)},variant:"ligth",disabled:r<2,children:Object(n.jsx)("strong",{children:"3-Start update"})})}),Object(n.jsx)(qn.a,{children:Object(n.jsx)(Qn.a,{className:r>=3?"text-primary":"text-secondary",onClick:function(){return l(3)},variant:"ligth",disabled:r<3,children:Object(n.jsx)("strong",{children:"4-Result"})})})]}),Object(n.jsx)(Bn.a,{className:"align-items-center",children:Object(n.jsxs)(qn.a,{children:[0===r&&Object(n.jsx)(Bn.a,{children:Object(n.jsxs)(qn.a,{children:[Object(n.jsxs)("h4",{children:["Process to export from Wavekeeper ",Object(n.jsx)("a",{href:"https://wavekeeper.wavestone-app.com/web#action=534&model=hr.presence&view_type=list&cids=1&menu_id=92",target:"_blank",rel:"noopener noreferrer",children:"(link)"})]}),Object(n.jsx)("p",{children:"Please connect to Wavekeeper"}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:"Step 1: Go to collaborators"}),Object(n.jsx)("li",{children:"Step 2: Apply filter to keep only current consultants"}),Object(n.jsx)("li",{children:"Step 3: Select all lines and go to actions / export"}),Object(n.jsx)("li",{children:"Step 4: Select filter 'JPR_export_2'"}),Object(n.jsx)("li",{children:"Step 5: Save the Excel file on you desktop"})]}),Object(n.jsx)(Fc.a,{src:"/images/WK_export_consultants_application_filtres.jpg",rounded:!0,fluid:!0})]})}),1===r&&Object(n.jsx)(Bn.a,{className:"align-items-center",children:Object(n.jsxs)(qn.a,{className:"text-center",children:[Object(n.jsx)("h4",{children:"Upload your file here"}),d?Object(n.jsx)(Zn,{}):Object(n.jsx)("input",{className:"my-3",type:"file",name:"hr.presence",onChange:function(e){var a,n=new FormData;n.append("file",e.target.files[0]),t((a=n,function(){var e=Object(Un.a)(wn.a.mark((function e(t,n){var c,s,r,i,l;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Mt}),c=n(),s=c.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(s.token)}},e.next=6,Rn.a.post("/api/upload/consultant",a,r);case 6:i=e.sent,l=i.data,t({type:Ft,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:Gt,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))}}),j&&Object(n.jsx)(Wn,{variant:"danger",children:j})]})}),2===r&&(u?Object(n.jsx)(Bn.a,{children:Object(n.jsxs)(qn.a,{className:"text-center",children:[Object(n.jsx)("h4",{children:"Do you want to update your consultants ?"}),h?Object(n.jsx)(Zn,{}):Object(n.jsx)(Qn.a,{variant:"primary",className:"m-3",onClick:function(){u&&t(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:qt}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",responseType:"stream",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.put("/api/consultants/admin/wk",e,r);case 6:i=t.sent,l=i.data,a({type:zt,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Xt,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(u))},children:"Update"}),Object(n.jsx)("p",{children:"Process could take a few minute"}),O&&Object(n.jsx)(Wn,{variant:"danger",children:O})]})}):Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:"Something wrong retry step 2"})})),3===r&&Object(n.jsx)(Hn.a.Control,{as:"textarea",rows:10,value:p&&p,readOnly:!0})]})})]}),Object(n.jsxs)(Mc.a.Footer,{children:[3===r&&Object(n.jsx)(Qn.a,{onClick:e.onHide,children:"Close"}),r<3&&Object(n.jsx)(Qn.a,{variant:"success",onClick:function(){return r+1<=3&&l(r+1)},disabled:3===r||1===r&&!u||2===r&&!p,children:"Next"})]})]}))},Bc=Pc.a.ExcelFile,qc=Pc.a.ExcelFile.ExcelSheet,zc=Pc.a.ExcelFile.ExcelColumn,Xc=function(e){var t=e.history,a=(e.match,Object(i.b)()),s=Object(c.useState)(1e4),r=Object(Xn.a)(s,2),l=r[0],o=r[1],d=Object(c.useState)(1),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(""),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(c.useState)(""),f=Object(Xn.a)(m,2),g=f[0],v=f[1],y=Object(c.useState)([]),S=Object(Xn.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(!1),T=Object(Xn.a)(N,2),L=T[0],A=T[1],_=Object(i.c)((function(e){return e.userLogin})).userInfo,I=Object(i.c)((function(e){return e.consultantsMyAdminList})),D=I.loading,k=I.error,w=I.consultantsMyAdmin,U=I.pages,P=I.page,R=I.count,M=Object(i.c)((function(e){return e.consultantDelete})).success,F=Object(i.c)((function(e){return e.consultantsMassImport})),G=F.loading,B=F.error,q=F.success;Object(c.useEffect)((function(){_?a(bc(p,u,l)):t.push("/login")}),[a,t,_,u,l,p,q]),Object(c.useEffect)((function(){if(w){var e=w.map((function(e){return{NAME:e.name,EMAIL:e.email,PRACTICE:e.practice,MATRICULE:e.matricule,VALUED:e.valued?e.valued.substring(0,10):"",ARRIVAL:e.arrival?e.arrival.substring(0,10):"",LEAVING:e.leaving?e.leaving.substring(0,10):"",PARTIAL_TIME:e.isPartialTime.value,GRADE:e.grade,IS_CDM:e.isCDM,CDM_MATRICULE:e.cdmId&&e.cdmId.matricule,CDM_NAME:e.cdmId&&e.cdmId.name,COMMENT:e.comment}}));v(e)}}),[w]),Object(c.useEffect)((function(){M&&(a(bc(p,u,l)),a({type:Ke}))}),[a,M]),Object(c.useEffect)((function(){var e;E.length>0&&a((e=E,function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:wt}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.put("/api/consultants/admin/mass-import",e,r);case 6:a({type:Ut}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:Pt,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[a,E]);var z=function(e){var t;window.confirm("Are you sure to delete user: ".concat(e.name," ?"))&&a((t=e._id,function(){var e=Object(Un.a)(wn.a.mark((function e(a,n){var c,s,r;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:Xe}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},e.next=6,Rn.a.delete("/api/consultants/".concat(t),r);case 6:a({type:He}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:Qe,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(fc,{}),B&&Object(n.jsx)(Wn,{variant:"danger",children:B}),Object(n.jsx)(Gc,{show:L,onHide:function(){return A(!1)}}),Object(n.jsx)(Fn,{access:"updateConsultantsFromWK",children:Object(n.jsx)(Qn.a,{variant:"primary",onClick:function(){return A(!0)},children:"Import WK"})}),Object(n.jsx)(oc,{title:"Manage consultants",close:!1,children:Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsxs)(Bn.a,{children:[Object(n.jsx)(qn.a,{xs:6,md:2,children:Object(n.jsxs)(Qn.a,{className:"mb-3",onClick:function(){t.push("/admin/consultant/add")},children:[Object(n.jsx)("i",{className:"fas fa-user-edit mr-2"}),"Add"]})}),Object(n.jsx)(qn.a,{xs:6,md:2,children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{type:"text",className:"mb-3",placeholder:"Search name",value:p&&p,onChange:function(e){return x(e.target.value)}})})}),Object(n.jsx)(qn.a,{xs:6,md:2,children:Object(n.jsx)(Hn.a.Control,{plaintext:!0,readOnly:!0,value:R?"".concat(R," consultants found"):"0 consultant found"})}),Object(n.jsx)(qn.a,{xs:6,md:2,children:G?Object(n.jsx)(Zn,{}):Object(n.jsx)(wc,{setImportData:C})}),Object(n.jsx)(qn.a,{xs:6,md:2,children:g&&Object(n.jsx)(Bc,{element:Object(n.jsxs)(Qn.a,{variant:"primary",children:[Object(n.jsx)("i",{className:"fas fa-download"}),"  Download"]}),children:Object(n.jsxs)(qc,{data:g,name:"consultantsSheet",children:[Object(n.jsx)(zc,{label:"NAME",value:"NAME"}),Object(n.jsx)(zc,{label:"EMAIL",value:"EMAIL"}),Object(n.jsx)(zc,{label:"PRACTICE",value:"PRACTICE"}),Object(n.jsx)(zc,{label:"MATRICULE",value:"MATRICULE"}),Object(n.jsx)(zc,{label:"VALUED",value:"VALUED"}),Object(n.jsx)(zc,{label:"ARRIVAL",value:"ARRIVAL"}),Object(n.jsx)(zc,{label:"LEAVING",value:"LEAVING"}),Object(n.jsx)(zc,{label:"PARTIAL_TIME",value:"PARTIAL_TIME"}),Object(n.jsx)(zc,{label:"GRADE",value:"GRADE"}),Object(n.jsx)(zc,{label:"IS_CDM",value:"IS_CDM"}),Object(n.jsx)(zc,{label:"CDM_MATRICULE",value:"CDM_MATRICULE"}),Object(n.jsx)(zc,{label:"CDM_NAME",value:"CDM_NAME"}),Object(n.jsx)(zc,{label:"COMMENT",value:"COMMENT"})]})})}),Object(n.jsx)(qn.a,{xs:6,md:2,children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{as:"select",id:"number-c",className:"mb-3",value:l&&l,onChange:function(e){return o(e.target.value)},children:[5,10,15,20,50,1e4].map((function(e){return Object(n.jsx)("option",{value:e,children:1e4===e?"All (export)":"".concat(e," / page")},e)}))})})})]}),w&&0===w.length?Object(n.jsx)(Wn,{variant:"information",children:"You have not access to these information"}):D?Object(n.jsx)(Zn,{}):k?Object(n.jsx)(Wn,{variant:"danger",children:k}):Object(n.jsxs)(Kn.a,{responsive:!0,hover:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"Consultant name"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Matricule"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Valued"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Arrival"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Leaving"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Seniority"}),Object(n.jsx)("th",{className:"align-middle text-light"}),Object(n.jsx)("th",{className:"align-middle text-light"})]})}),Object(n.jsx)("tbody",{children:w&&w.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:e.name}),Object(n.jsx)("td",{className:"align-middle",children:e.matricule}),Object(n.jsx)("td",{className:"align-middle",children:e.practice}),Object(n.jsx)("td",{className:"align-middle",children:e.valued?e.valued.substring(0,10):""}),Object(n.jsx)("td",{className:"align-middle",children:e.arrival?e.arrival.substring(0,10):""}),Object(n.jsx)("td",{className:"align-middle",children:e.leaving?e.leaving.substring(0,10):""}),Object(n.jsxs)("td",{className:"align-middle",children:[e.valued?((new Date(Date.now())-new Date(e.valued.substring(0,10)))/315576e5).toString().substring(0,4):0," years"]}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(Qn.a,{className:"btn btn-primary p-1",onClick:function(){return a=e._id,void t.push("/editconsultant/".concat(a));var a},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-user-edit"})})}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(Qn.a,{className:"btn btn-danger p-1",onClick:function(){return z(e)},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-user-times"})})})]},e._id)}))})]}),Object(n.jsxs)(Rc.a,{children:[Object(n.jsx)(Rc.a.Prev,{onClick:function(){return b(P-1)},disabled:1===P}),Object(Ec.a)(Array(U).keys()).map((function(e){return[0,1,U-2,U-1].includes(e)?Object(n.jsx)(Rc.a.Item,{active:e+1===P,onClick:function(){a(bc(p,e+1,l)),b(e+1)},children:e+1},e+1):U>4&&2===e&&Object(n.jsx)(Rc.a.Ellipsis,{},e+1)})),Object(n.jsx)(Rc.a.Next,{onClick:function(){return b(P+1)},disabled:P===U})]})]})})]})},Hc=function(e){var t=e.history,a=Object(i.b)(),s=Object(c.useState)(10),r=Object(Xn.a)(s,2),l=r[0],o=r[1],d=Object(c.useState)(1),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(""),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(i.c)((function(e){return e.userLogin})).userInfo,f=Object(i.c)((function(e){return e.userList})),g=f.users,v=f.pages,y=f.page,S=f.count,E=Object(i.c)((function(e){return e.userDelete})),C=E.error,N=E.success;Object(c.useEffect)((function(){m?a(Mn(m.consultantProfil.practice,p,u,l)):t.push("/login")}),[a,t,m,N,p,u,l]);var T=function(e){var t;console.log("delete user"),window.confirm("Are you sure to delete user: ".concat(e.name," ?"))&&a((t=e._id,function(){var e=Object(Un.a)(wn.a.mark((function e(a,n){var c,s,r;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:oe}),c=n(),s=c.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(s.token)}},e.next=6,Rn.a.delete("/api/users/".concat(t),r);case 6:a({type:de}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:je,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(n.jsxs)(n.Fragment,{children:[C&&Object(n.jsx)(Wn,{variant:"danger",children:C}),Object(n.jsx)(oc,{title:"Manage users",close:!1,children:Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsxs)(Bn.a,{children:[Object(n.jsx)(qn.a,{xs:6,md:3,children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{type:"text",className:"mb-3",placeholder:"Search name",value:p&&p,onChange:function(e){return x(e.target.value)}})})}),Object(n.jsx)(qn.a,{xs:6,md:6,children:Object(n.jsx)(Hn.a.Control,{plaintext:!0,readOnly:!0,value:S?"".concat(S," consultants found"):"0 consultant found"})}),Object(n.jsx)(qn.a,{xs:6,md:3,children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{as:"select",id:"number-c",className:"mb-3",value:l&&l,onChange:function(e){return o(e.target.value)},children:[5,10,15,20,50].map((function(e){return Object(n.jsxs)("option",{value:e,children:[e," / page"]},e)}))})})})]}),Object(n.jsxs)(Kn.a,{responsive:!0,hover:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"User name"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Matricule"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Created at"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Status"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"User Profil"}),Object(n.jsx)("th",{className:"align-middle text-light"}),Object(n.jsx)("th",{className:"align-middle text-light"})]})}),Object(n.jsx)("tbody",{children:g&&g.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)("b",{children:e.name&&e.name})}),Object(n.jsx)("td",{className:"align-middle",children:e.consultantProfil&&e.consultantProfil.matricule}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.consultantProfil&&e.consultantProfil.practice}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.createdAt&&e.createdAt.toString().substring(0,10)}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.status&&"Waiting approval"===e.status?Object(n.jsx)("i",{className:"far fa-clock",style:{color:"orange"}}):"Validated"===e.status?Object(n.jsx)("i",{className:"fas fa-check-circle",style:{color:"green"}}):"Refused"===e.status?Object(n.jsx)("i",{className:"fas fa-times",style:{color:"red"}}):"unknown"}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.profil&&e.profil.profil&&e.profil.profil}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(Qn.a,{className:"btn btn-primary p-1",onClick:function(){return a=e._id,void t.push("/admin/edituser/".concat(a));var a},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-user-edit"})})}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(Qn.a,{className:"btn btn-danger p-1",onClick:function(){return T(e)},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-user-times"})})})]},e._id)}))})]}),Object(n.jsxs)(Rc.a,{children:[Object(n.jsx)(Rc.a.Prev,{onClick:function(){return b(y-1)},disabled:1===y}),Object(Ec.a)(Array(v).keys()).map((function(e){return[0,1,v-2,v-1].includes(e)?Object(n.jsx)(Rc.a.Item,{active:e+1===y,onClick:function(){a(Mn(m.consultantProfil.practice,p,e+1,l)),b(e+1)},children:e+1},e+1):v>4&&2===e&&Object(n.jsx)(Rc.a.Ellipsis,{},e+1)})),Object(n.jsx)(Rc.a.Next,{onClick:function(){return b(y+1)},disabled:y===v})]})]})})]})},Qc=function(){return function(){var e=Object(Un.a)(wn.a.mark((function e(t,a){var n,c,s,r,i;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Ra}),n=a(),c=n.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,Rn.a.get("/api/access",s);case 6:r=e.sent,i=r.data,t({type:Ma,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:Fa,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()},Kc=function(e){var t=e.match,a=e.history,s=t.params.id,r=Object(i.b)(),l=Object(c.useState)(""),o=Object(Xn.a)(l,2),d=o[0],j=o[1],u=Object(c.useState)(""),b=Object(Xn.a)(u,2),h=b[0],O=b[1],p=Object(c.useState)(""),x=Object(Xn.a)(p,2),m=x[0],f=x[1],g=Object(c.useState)(""),v=Object(Xn.a)(g,2),y=v[0],S=v[1],E=Object(c.useState)(""),C=Object(Xn.a)(E,2),N=C[0],T=C[1],L=Object(i.c)((function(e){return e.userLogin})).userInfo,A=Object(i.c)((function(e){return e.userDetails})),_=A.error,I=A.loading,D=A.user,k=Object(i.c)((function(e){return e.userUpdate})),w=k.error,U=k.success,P=Object(i.c)((function(e){return e.consultantsMyAdminList})),R=P.error,M=P.consultantsMyAdmin,F=Object(i.c)((function(e){return e.accessList})).access;Object(c.useEffect)((function(){L||a.push("/login")}),[a,L]),Object(c.useEffect)((function(){var e;I||_||D&&D._id===s||r((e=s,function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:te}),c=n(),s=c.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.get("/api/users/".concat(e),r);case 6:i=t.sent,l=i.data,a({type:ae,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:ne,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[r,D,_,s,I]),Object(c.useEffect)((function(){D&&(j(D.name),O(D.email),S(D.profil),T(D.status),D.consultantProfil?f(D.consultantProfil._id):f(""))}),[D]),Object(c.useEffect)((function(){D&&D._id===s&&r(bc("","",1e4))}),[r,D,s]),Object(c.useEffect)((function(){F||r(Qc())}),[r,F]);return Object(n.jsxs)(n.Fragment,{children:[_&&Object(n.jsx)(Wn,{variant:"danger",children:_}),R&&Object(n.jsx)(Wn,{variant:"danger",children:R}),w&&Object(n.jsx)(Wn,{variant:"danger",children:w}),U&&Object(n.jsx)(Wn,{variant:"success",children:"User updated with success"}),Object(n.jsx)(Qn.a,{className:"mb-3",onClick:function(){return a.go(-1),void r({type:pe})},children:"Go Back"}),Object(n.jsx)($n,{children:Object(n.jsxs)(Hn.a,{onSubmit:function(e){e.preventDefault();var t=Object(me.a)(Object(me.a)({},D),{},{name:d,email:h,consultantProfil:m,profil:y._id,status:N});r(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:be}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.put("/api/users/".concat(e._id),e,r);case 6:a({type:he}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:Oe,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))},children:[Object(n.jsxs)(Hn.a.Group,{controlId:"name",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Name"})}),Object(n.jsx)(Hn.a.Control,{type:"name",placeholder:"Enter Name",value:d&&d,onChange:function(e){return j(e.target.value)},required:!0})]}),Object(n.jsxs)(Hn.a.Group,{controlId:"email",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Email address"})}),Object(n.jsx)(Hn.a.Control,{type:"email",placeholder:"Enter email",value:h&&h,onChange:function(e){return O(e.target.value)},required:!0})]}),Object(n.jsxs)(Hn.a.Group,{controlId:"consultantProfil",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Linked Consultant Profil"})}),Object(n.jsxs)(ac.a,{children:[Object(n.jsx)(Hn.a.Control,{as:"select",placeholder:"Enter consultant to link",value:m&&m,onChange:function(e){return f(e.target.value)},required:!0,children:M&&M.map((function(e){return Object(n.jsx)("option",{value:e._id,children:e.name},e._id)}))}),Object(n.jsx)(ac.a.Append,{children:Object(n.jsx)(Qn.a,{onClick:function(){return a.push("/editconsultant/".concat(m))},children:"Edit user"})})]})]}),Object(n.jsxs)(Hn.a.Group,{controlId:"user-profil",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"User profil"})}),Object(n.jsxs)(Hn.a.Control,{as:"select",value:y&&y.profil?y.profil:"",onChange:function(e){return function(e){var t=F.filter((function(t){return t.profil===e}))[0];S(t)}(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),F&&F.map((function(e){return Object(n.jsx)("option",{value:e.profil,children:e.profil},e._id)}))]})]}),Object(n.jsxs)(Hn.a.Group,{controlId:"status",children:[Object(n.jsx)(Hn.a.Label,{children:Object(n.jsx)("b",{children:"Account Status"})}),Object(n.jsx)(Hn.a.Control,{as:"select",placeholder:"Select status for account",value:N&&N,onChange:function(e){return T(e.target.value)},required:!0,children:xe.map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}))})]}),Object(n.jsx)(Qn.a,{type:"submit",variant:"primary",children:"Update"})]})})]})},Yc=function(e){var t=e.location,a=e.history,s=Object(c.useState)(""),r=Object(Xn.a)(s,2),l=r[0],o=r[1],d=Object(c.useState)(""),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(""),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(c.useState)(""),f=Object(Xn.a)(m,2),g=f[0],v=f[1],y=Object(c.useState)(null),S=Object(Xn.a)(y,2),E=S[0],C=S[1],N=Object(i.b)(),T=Object(i.c)((function(e){return e.userRegister})),L=T.loading,A=T.error,_=T.userInfo,I=t.search?t.search.split("=")[1]:"/";Object(c.useEffect)((function(){_&&a.push(I)}),[a,_,I]);return Object(n.jsxs)($n,{children:[Object(n.jsx)("h1",{children:"Sign Up"}),E&&Object(n.jsx)(Wn,{variant:"danger",children:E}),A&&Object(n.jsx)(Wn,{variant:"danger",children:A}),L&&Object(n.jsx)(Zn,{}),Object(n.jsxs)(Hn.a,{onSubmit:function(e){!1===e.currentTarget.checkValidity()?C("Please check your information"):(e.preventDefault(),C(null),p!==g?C("Passwords do not match"):N(function(e,t,a){return function(){var n=Object(Un.a)(wn.a.mark((function n(c){var s,r,i;return wn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:J}),s={headers:{"Content-type":"Application/json"}},n.next=5,Rn.a.post("/api/users",{name:e,email:t,password:a},s);case 5:r=n.sent,i=r.data,c({type:Z,payload:i}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),c({type:$,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(l,u,p)))},children:[Object(n.jsxs)(Hn.a.Group,{controlId:"name",children:[Object(n.jsx)(Hn.a.Label,{children:"Name"}),Object(n.jsx)(Hn.a.Control,{type:"name",placeholder:"Enter Name",value:l,onChange:function(e){return o(e.target.value)}})]}),Object(n.jsxs)(Hn.a.Group,{controlId:"email",children:[Object(n.jsx)(Hn.a.Label,{children:"Email Adress"}),Object(n.jsx)(Hn.a.Control,{type:"email",placeholder:"Enter Email",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(n.jsxs)(Hn.a.Group,{controlId:"password",children:[Object(n.jsx)(Hn.a.Label,{children:"Password"}),Object(n.jsx)(Hn.a.Control,{type:"password",placeholder:"Enter password",value:p,onChange:function(e){return x(e.target.value)}})]}),Object(n.jsxs)(Hn.a.Group,{controlId:"confirm-password",children:[Object(n.jsx)(Hn.a.Label,{children:"Confirm Password"}),Object(n.jsx)(Hn.a.Control,{type:"password",placeholder:"Confirm password",value:g,onChange:function(e){return v(e.target.value)}})]}),Object(n.jsx)(Qn.a,{type:"submit",variat:"primary",children:"Register"}),Object(n.jsx)(Bn.a,{className:"py-3",children:Object(n.jsxs)(qn.a,{children:["Have an account ?",Object(n.jsx)(Nn.Link,{to:I?"/login?reditect=".concat(I):"/login",children:"Login"})]})})]})]})},Vc=a(66),Wc=a(102),Jc=a(64),Zc=function(e){var t=e.history,a=e.onHide,s=e.show,r=e.consultant,l=e.loadingData,o=void 0===l?{}:l,d=e.mode,j=e.addStaffHandler,u=Object(i.b)(),b=Object(c.useState)(o.responsability?o.responsability:""),h=Object(Xn.a)(b,2),O=h[0],p=h[1],x=Object(c.useState)(o.priority?o.priority:""),m=Object(Xn.a)(x,2),f=m[0],g=m[1],v=Object(c.useState)(o.information?o.information:""),y=Object(Xn.a)(v,2),S=y[0],E=y[1],C=Object(i.c)((function(e){return e.consultantGetCdm})).cdm;return Object(c.useEffect)((function(){var e;s&&u((e=r._id,function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:rt}),c=n(),s=c.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.get("/api/consultants/".concat(e,"/cdm"),r);case 6:i=t.sent,l=i.data,a({type:it,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:lt,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[u,r,s]),Object(n.jsxs)(Mc.a,{show:s,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:a,children:[Object(n.jsx)(Mc.a.Header,{closeButton:!0,children:Object(n.jsx)(Mc.a.Title,{id:"contained-modal-title-vcenter",children:r.name?r.name+" - "+r.grade+(C?" ("+C.name+")":""):""})}),Object(n.jsxs)(Mc.a.Body,{children:["staffing"===d&&Object(n.jsxs)(Fn,{access:"editStaff",children:[Object(n.jsxs)(Bn.a,{children:[Object(n.jsxs)(qn.a,{className:"mt-3",children:[Object(n.jsx)("label",{htmlFor:"sd-responsability",children:Object(n.jsx)("strong",{children:"Responsability *"})}),Object(n.jsx)(ac.a,{id:"sd-responsability",children:Object(n.jsxs)(nc.a,{as:"select",value:O,onChange:function(e){return p(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Object(n.jsx)("option",{value:"Project director",children:"Project director"}),Object(n.jsx)("option",{value:"Project manager",children:"Project manager"}),Object(n.jsx)("option",{value:"Project leader",children:"Project leader"}),Object(n.jsx)("option",{value:"X",children:"X"}),Object(n.jsx)("option",{value:"Intern",children:"Intern"})]})})]}),Object(n.jsxs)(qn.a,{className:"mt-3",children:[Object(n.jsx)("label",{htmlFor:"sd-priority",children:Object(n.jsx)("strong",{children:"Priority *"})}),Object(n.jsx)(ac.a,{id:"sd-priority",children:Object(n.jsxs)(nc.a,{as:"select",value:f,onChange:function(e){return g(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Object(n.jsx)("option",{value:"P1",children:"P1"}),Object(n.jsx)("option",{value:"P2",children:"P2"}),Object(n.jsx)("option",{value:"P3",children:"P3"})]})})]})]}),Object(n.jsx)(Bn.a,{children:Object(n.jsxs)(qn.a,{className:"mt-3",children:[Object(n.jsx)("label",{children:Object(n.jsx)("strong",{children:"Comment"})}),Object(n.jsx)(ac.a,{id:"sd-information",children:Object(n.jsx)(nc.a,{as:"textarea",rows:3,value:S,onChange:function(e){return E(e.target.value)}})})]})})]}),Object(n.jsx)(Fn,{access:"viewSkills",children:Object(n.jsx)(_c,{consultantId:r._id,editable:!1,close:"consultation"!==d})}),Object(n.jsx)(Fn,{access:"viewStaffings",children:Object(n.jsx)(oc,{title:"Others staffings",close:!1,children:Object(n.jsx)(gc,{history:t,consultantId:r._id,onNavigate:a})})}),Object(n.jsx)(oc,{title:"Old staffings",close:!0,children:Object(n.jsx)(Sc,{history:t,consultantId:r._id,onNavigate:a})})]}),Object(n.jsxs)(Mc.a.Footer,{children:[Object(n.jsx)(Qn.a,{onClick:a,variant:"secondary",children:"Cancel"}),Object(n.jsx)(Fn,{access:"editStaff",children:"staffing"===d&&Object(n.jsx)(Qn.a,{onClick:function(){j(r,O,f,S),a()},variant:"primary",disabled:!(""!==O&&""!==f),children:"Staff"})})]})]})},$c=a(273),es=function(e){var t=e.options,a=e.value,c=e.setValue,s=e.disabled,r=e.multi;return Object(n.jsx)("div",{children:Object(n.jsx)($c.a,{closeMenuOnSelect:!0,placeholder:"Select...",value:a||null,isMulti:r,options:t||[],onChange:function(e){var t=[];t=r?e.map((function(e){return{id:e.value,value:e.label}})):[{id:e.value,value:e.label}],c(t)},isDisabled:s})})},ts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"15";return function(){var c=Object(Un.a)(wn.a.mark((function c(s,r){var i,l,o,d,j;return wn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s({type:Kt}),i=r(),l=i.userLogin.userInfo,o={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(l.token)}},c.next=6,Rn.a.get("/api/skills?category=".concat(e,"&name=").concat(t,"&pageNumber=").concat(a,"&pageSize=").concat(n),o);case 6:d=c.sent,j=d.data,s({type:Yt,payload:j}),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),s({type:Vt,payload:c.t0.response&&c.t0.response.data.message?c.t0.response.data.message:c.t0.message});case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e,t){return c.apply(this,arguments)}}()},as=function(e){var t=e.monthData,a=e.grades,c=e.mode,s=e.addStaff,r=e.focus,l=e.setFocus,o=Object(i.c)((function(e){return e.userLogin})).userInfo,d=function(e){var t=e.split(" ");return 1===t.length?t[0]:t.map((function(e,t){return 0===t?e[0].toUpperCase()+".":e.toUpperCase()})).join(" ")};return Object(n.jsxs)(Vc.a,{className:"my-1 rounded",children:[Object(n.jsx)(Vc.a.Header,{as:"h5",children:t.month.firstDay.toString().substring(0,7)}),Object(n.jsx)(Vc.a.Body,{children:t.availabilities.map((function(e,t){return a.includes(e.grade)&&Object(n.jsxs)(Bn.a,{className:"align-items-middle",children:[("staffing"===c||"consultation"===c)&&Object(n.jsx)(qn.a,{sm:1,children:Object(n.jsx)(Qn.a,{size:"sm",variant:"ligth",className:"mx-0 px-0",onClick:function(){return s(e)},children:Object(n.jsx)("i",{className:"fas fa-search"})})}),Object(n.jsx)(qn.a,{sm:10,children:Object(n.jsx)(Cc.a,{overlay:Object(n.jsx)(Nc.a,{id:"tooltip-disabled",children:Object(n.jsx)(Fn,{access:"viewComment",children:o&&o.consultantProfil._id!==e._id?e.comment?e.comment:"No staffing comment":"No access to this data"})}),children:Object(n.jsx)(Hn.a.Control,{plaintext:!0,readOnly:!0,id:e.email,value:e.availableDay.toString()+" days : "+d(e.name)+" ("+(i=e.valued,(i?((Date.now()-new Date(i))/315576e5).toString().substring(0,4):"-")+" years)"),style:e.email===r?{background:"#464277",color:"white"}:{color:"black"},onFocus:function(e){l(e.target.id)}})})})]},t);var i}))})]})},ns=function(e){var t=e.start,a=e.end,s=e.mode,r=e.addStaffHandler,l=e.history,o=Object(i.b)(),d=Object(c.useState)(""),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(""),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(c.useState)(""),f=Object(Xn.a)(m,2),g=f[0],v=f[1],y=Object(c.useState)(""),S=Object(Xn.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)([]),T=Object(Xn.a)(N,2),L=T[0],A=T[1],_=Object(c.useState)("filterAvailable"),I=Object(Xn.a)(_,2),D=I[0],k=I[1],w=Object(c.useState)(!1),U=Object(Xn.a)(w,2),P=U[0],R=U[1],M=Object(c.useState)(""),F=Object(Xn.a)(M,2),G=F[0],B=F[1],q=Object(i.c)((function(e){return e.userLogin})).userInfo,z=Object(i.c)((function(e){return e.pxxAvailabilities})),X=z.loading,H=z.error,Q=z.availabilities,K=Object(i.c)((function(e){return e.skillList})).skills;Object(c.useEffect)((function(){q&&C(q.consultantProfil.practice)}),[q]),Object(c.useEffect)((function(){E&&o(cc(E,t,a,L.map((function(e){return e.value})).join(";"),p,g,D))}),[o,E,t,a,D,L,p,g]),Object(c.useEffect)((function(){o(ts("","",1,1e4))}),[o]);var Y=function(e){R(!0),B(e)};return Object(n.jsxs)(n.Fragment,{children:[P&&Object(n.jsx)(Zc,{show:P,onHide:function(){return R(!1)},consultant:G,mode:s,addStaffHandler:r,history:l}),Object(n.jsx)(Bn.a,{className:"mt-5",children:Object(n.jsx)(qn.a,{md:12,children:Object(n.jsx)(Hn.a,{onSubmit:function(e){e.preventDefault(),o(cc(E,t,a,L.map((function(e){return e.value})).join(";"),p,g,D))},children:Object(n.jsxs)(Hn.a.Row,{className:"align-items-center mb-3",children:[Object(n.jsx)(qn.a,{md:1,children:p||g?Object(n.jsx)(Qn.a,{variant:"secondary",onClick:function(){A([]),x(""),v("")},block:!0,children:Object(n.jsx)("i",{className:"fas fa-minus-circle"})}):Object(n.jsx)(Qn.a,{variant:"primary",disabled:!0,block:!0,children:Object(n.jsx)("i",{className:"fas fa-keyboard"})})}),Object(n.jsx)(qn.a,{md:4,children:Object(n.jsx)(Hn.a.Group,{controlId:"skill-search",className:"my-0",children:Object(n.jsx)(es,{options:K?K.map((function(e){return{value:e._id,label:e.name}})):[],value:L.length?L.map((function(e){return{value:e._id,label:e.value}})):[],setValue:A,multi:!0,disabled:!1})})}),Object(n.jsx)(qn.a,{md:2,children:Object(n.jsx)(Hn.a.Group,{controlId:"experience-search-start",className:"my-0",children:Object(n.jsx)(Hn.a.Control,{type:"number",min:0,step:.5,placeholder:"From (year)",value:p&&p,onChange:function(e){return x(e.target.value)}})})}),Object(n.jsx)(qn.a,{md:2,children:Object(n.jsx)(Hn.a.Group,{controlId:"experience-search-end",className:"my-0",children:Object(n.jsx)(Hn.a.Control,{type:"number",step:.5,min:p||0,placeholder:"To (year)",value:g&&g,onChange:function(e){return v(e.target.value)}})})}),Object(n.jsxs)(qn.a,{md:2,children:[Object(n.jsx)(Hn.a.Group,{controlId:"switch-only-available",className:"my-0",children:Object(n.jsx)(Hn.a.Check,{type:"switch",id:"switch-only-available",label:"Not available",checked:"filterAvailable"!==D,onChange:function(e){!0===e.target.checked?k("all"):k("filterAvailable")}})}),Object(n.jsx)(Hn.a.Group,{controlId:"switch-practices",className:"my-0",children:Object(n.jsx)(Hn.a.Check,{type:"switch",id:"switch-all-practices",label:"All practices",checked:"all"===E,onChange:function(e){!0===e.target.checked?C("all"):C(q.consultantProfil.practice)}})})]}),Object(n.jsx)(qn.a,{md:1,children:Object(n.jsx)(Qn.a,{type:"submit",variant:"primary",block:!0,children:"Search"})})]})})})}),Object(n.jsxs)(Wc.a,{defaultActiveKey:"Analysts",id:"uncontrolled-tab-example",children:[Object(n.jsx)(Jc.a,{eventKey:"Intern",title:"Intern",children:Object(n.jsx)(Bn.a,{className:"mt-3",children:X?Object(n.jsx)(Zn,{}):H?Object(n.jsx)(Wn,{variant:"danger",children:H}):Q&&Q.map((function(e,t){return Object(n.jsx)(qn.a,{sm:12,md:4,children:Object(n.jsx)(as,{monthData:e,grades:["Intern"],mode:s,addStaff:Y,focus:u,setFocus:b})},t)}))})}),Object(n.jsx)(Jc.a,{eventKey:"Analysts",title:"Analysts",children:Object(n.jsx)(Bn.a,{className:"mt-3",children:X?Object(n.jsx)(Zn,{}):H?Object(n.jsx)(Wn,{variant:"danger",children:H}):Q&&Q.map((function(e,t){return Object(n.jsx)(qn.a,{sm:12,md:4,children:Object(n.jsx)(as,{monthData:e,grades:["Analyst"],mode:s,addStaff:Y,focus:u,setFocus:b})},t)}))})}),Object(n.jsx)(Jc.a,{eventKey:"Consultants",title:"Consultants",children:Object(n.jsx)(Bn.a,{className:"mt-3",children:X?Object(n.jsx)(Zn,{}):H?Object(n.jsx)(Wn,{variant:"danger",children:H}):Q&&Q.map((function(e,t){return Object(n.jsx)(qn.a,{sm:12,md:4,children:Object(n.jsx)(as,{monthData:e,grades:["Consultant"],mode:s,addStaff:Y,focus:u,setFocus:b})},t)}))})}),Object(n.jsx)(Jc.a,{eventKey:"Senior consultants",title:"Senior consultants",children:Object(n.jsx)(Bn.a,{className:"mt-3",children:X?Object(n.jsx)(Zn,{}):H?Object(n.jsx)(Wn,{variant:"danger",children:H}):Q&&Q.map((function(e,t){return Object(n.jsx)(qn.a,{sm:12,md:4,children:Object(n.jsx)(as,{monthData:e,grades:["Senior consultant"],mode:s,addStaff:Y,focus:u,setFocus:b})},t)}))})}),Object(n.jsx)(Jc.a,{eventKey:"Managers",title:"Managers and +",children:Object(n.jsx)(Bn.a,{className:"mt-3",children:X?Object(n.jsx)(Zn,{}):H?Object(n.jsx)(Wn,{variant:"danger",children:H}):Q&&Q.map((function(e,t){return Object(n.jsx)(qn.a,{sm:12,md:4,children:Object(n.jsx)(as,{monthData:e,grades:["Manager","Senior manager","Director","Partner"],mode:s,addStaff:Y,focus:u,setFocus:b})},t)}))})})]})]})},cs=function(e){var t=e.tace,a=e.practice,s=Object(i.b)(),r=Object(c.useState)(t.target),l=Object(Xn.a)(r,2),o=l[0],d=l[1],j=Object(c.useState)(t.bid),u=Object(Xn.a)(j,2),b=u[0],h=u[1],O=Object(c.useState)(!1),p=Object(Xn.a)(O,2),x=p[0],m=p[1],f=Object(c.useState)(!1),g=Object(Xn.a)(f,2),v=g[0],y=g[1],S=Object(c.useState)(""),E=Object(Xn.a)(S,2),C=E[0],N=E[1],T=Object(c.useState)(""),L=Object(Xn.a)(T,2),A=L[0],_=L[1],I=Object(i.c)((function(e){return e.createTace}));return Object(c.useEffect)((function(){var e;v&&(s((e={month:t.month._id,practice:a,target:o,bid:b},function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:dn}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.post("/api/tace",e,r);case 6:i=t.sent,l=i.data,a({type:jn,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:un,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}())),y(!1))}),[s,I,v,a,t,o,b]),Object(c.useEffect)((function(){var e=Number(t.totalProdDay),a=Number(b)/100*(Number(t.totalProdDay)+Number(t.totalNotProdDay)+Number(t.totalAvailableDay)),n=Number(o)/100*(Number(t.totalProdDay)+Number(t.totalNotProdDay)+Number(t.totalAvailableDay)),c=new Date(Math.max(new Date(Date.now()),new Date(t.month.firstDay))),s=new Date(Math.max(new Date(Date.now()),new Date(t.month.firstDay)));s.setUTCMonth(s.getUTCMonth()+1),s.setUTCDate(1);var r=(s-c)/864e5;b&&N((e-a)/r);o&&_((e-n)/r)}),[t,b,o]),Object(n.jsx)(qn.a,{sm:12,md:4,children:Object(n.jsxs)(Vc.a,{className:"my-3 p-3 rounded",children:[Object(n.jsx)(Vc.a.Header,{as:"h5",children:t.month.firstDay.toString().substring(0,7)}),Object(n.jsxs)(Vc.a.Body,{className:"p-1 mt-3",children:[Object(n.jsxs)(Vc.a.Text,{as:"h4",children:["Tace ",Object(n.jsx)(Fn,{access:"editTace",children:Object(n.jsx)(Qn.a,{size:"sm",variant:"ligth",onClick:function(){x&&y(!0),m(!x)},children:Object(n.jsx)("i",{className:"fas fa-edit"})})})]}),Object(n.jsxs)(tc.a,{children:[Object(n.jsx)(tc.a.Item,{className:"py-1 bg-primary text-white",children:Object(n.jsxs)(Bn.a,{children:[Object(n.jsx)(qn.a,{className:"text-center",xs:4,children:Object(n.jsx)("strong",{children:"Current"})}),Object(n.jsx)(qn.a,{className:"text-center",xs:4,children:Object(n.jsx)("strong",{children:"Target"})}),Object(n.jsx)(qn.a,{className:"text-center",xs:4,children:Object(n.jsx)("strong",{children:"Bid"})})]})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Bn.a,{className:"align-items-center",children:[Object(n.jsxs)(qn.a,{className:"text-center",xs:4,children:[(100*Number(t.totalTACE)).toFixed(1)," %"]}),Object(n.jsx)(qn.a,{className:"text-center",xs:4,children:Object(n.jsx)(Hn.a.Group,{controlId:"tace-target",className:"mb-0",children:x?Object(n.jsx)(Hn.a.Control,{type:"Number",className:"text-center",min:0,max:100,step:.1,value:o,onChange:function(e){return d(e.target.value)}}):Object(n.jsxs)(Bn.a,{className:"align-items-center",children:[Object(n.jsx)(qn.a,{className:"m-0 p-0",children:Object(n.jsx)(Hn.a.Control,{type:"text",className:"text-right",plaintext:!0,value:o,readOnly:!0})}),Object(n.jsx)(qn.a,{className:"m-0 p-0 text-left",children:"\xa0%"})]})})}),Object(n.jsx)(qn.a,{className:"text-center",xs:4,children:Object(n.jsx)(Hn.a.Group,{controlId:"title",className:"mb-0",children:x?Object(n.jsx)(Hn.a.Control,{type:"Number",className:"text-center",min:0,max:100,step:.1,value:b,onChange:function(e){return h(e.target.value)}}):Object(n.jsxs)(Bn.a,{className:"align-items-center",children:[Object(n.jsx)(qn.a,{className:"m-0 p-0",children:Object(n.jsx)(Hn.a.Control,{type:"text",className:"text-right",plaintext:!0,value:b,readOnly:!0})}),Object(n.jsx)(qn.a,{className:"m-0 p-0 text-left",children:"\xa0%"})]})})})]})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Bn.a,{children:[Object(n.jsx)(qn.a,{xs:4,children:"\u0394 FTE"}),Object(n.jsx)(qn.a,{xs:4,className:"text-center",children:A&&A.toFixed(2)}),Object(n.jsx)(qn.a,{xs:4,className:"text-center",children:C&&C.toFixed(2)})]})})]}),Object(n.jsxs)(tc.a,{className:"mt-3",children:[Object(n.jsx)(tc.a.Item,{className:"py-1 bg-primary text-white",children:Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:Object(n.jsx)("strong",{children:"Leaving"})})})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsx)(Bn.a,{children:Object(n.jsxs)(qn.a,{className:"text-right",children:[(100*Number(t.totalLeaving)).toFixed(2)," %"]})})})]}),Object(n.jsxs)(tc.a,{className:"mt-3",children:[Object(n.jsx)(tc.a.Item,{className:"py-1 bg-primary text-white",children:Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:Object(n.jsx)("strong",{children:"FTE"})})})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{className:"text-right",children:t.totalETP&&t.totalETP.toFixed(2)})})})]})]}),Object(n.jsx)(Vc.a.Footer,{className:"mt-3",children:Object(n.jsx)(Fn,{access:"tace",children:Object(n.jsx)(Nn.Link,{to:"/pxxdetails/".concat(t.month._id),children:"View details"})})})]})})},ss=function(e){var t=e.history,a=Object(i.b)(),s=new Date(Date.now());s.setUTCDate(1),s.setUTCMonth(s.getUTCMonth()),s=s.toISOString().substring(0,10);var r=new Date(Date.now());r.setUTCDate(1),r.setUTCMonth(r.getUTCMonth()+3-1),r=r.toISOString().substring(0,10);var l=Object(c.useState)(s),o=Object(Xn.a)(l,2),d=o[0],j=o[1],u=Object(c.useState)(r),b=Object(Xn.a)(u,2),h=b[0],O=b[1],p=Object(i.c)((function(e){return e.userLogin})).userInfo,x=Object(i.c)((function(e){return e.pxxTACE})),m=x.loading,f=x.error,g=x.tace;Object(c.useEffect)((function(){p||t.push("/login")}),[t,p]),Object(c.useEffect)((function(){p&&!m&&a(function(e,t,a){return function(){var n=Object(Un.a)(wn.a.mark((function n(c,s){var r,i,l,o,d;return wn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:S}),r=s(),i=r.userLogin.userInfo,l={headers:{Authorization:"Bearer ".concat(i.token)}},n.next=6,Rn.a.get("/api/pxx/chart/tace?practice=".concat(e,"&start=").concat(t,"&end=").concat(a),l);case 6:o=n.sent,d=o.data,c({type:E,payload:d}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),c({type:C,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()}(p.consultantProfil.practice,d,h))}),[a,d,h]);var v=function(e){var t=new Date(d),a=new Date(h);t.setUTCMonth(t.getUTCMonth()+e),a.setUTCMonth(a.getUTCMonth()+e),j(t.toISOString().substring(0,10)),O(a.toISOString().substring(0,10))};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(fc,{}),Object(n.jsxs)(Bn.a,{children:[Object(n.jsx)(qn.a,{className:"text-center",xs:2,children:Object(n.jsx)(Qn.a,{variant:"primary",size:"sm",onClick:function(){return v(-1)},children:Object(n.jsx)("i",{className:"fas fa-caret-left"})})}),Object(n.jsx)(qn.a,{children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{type:"text",id:"start-date",className:"form-control-lg mb-3 text-right",plaintext:!0,value:d&&"From: ".concat(d.substring(0,7).replace("-","/")),readOnly:!0})})}),Object(n.jsx)(qn.a,{children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{type:"text",id:"date-end",className:"form-control-lg mb-3 text-left",plaintext:!0,value:h&&"To: ".concat(h.substring(0,7).replace("-","/")),readOnly:!0})})}),Object(n.jsx)(qn.a,{className:"text-center",xs:2,children:Object(n.jsx)(Qn.a,{variant:"primary",size:"sm",onClick:function(){return v(1)},children:Object(n.jsx)("i",{className:"fas fa-caret-right"})})})]}),Object(n.jsx)(Fn,{access:"tace",children:Object(n.jsxs)(oc,{title:"TACE",close:!1,children:[Object(n.jsx)(Bn.a,{className:"mt-3",children:Object(n.jsx)(qn.a,{children:Object(n.jsxs)("h4",{children:["TACE (",p&&p.consultantProfil.practice,")"]})})}),Object(n.jsx)(Bn.a,{className:"mt-1",children:m?Object(n.jsx)(Zn,{}):f?Object(n.jsx)(Wn,{variant:"danger",children:f}):g&&g.map((function(e,t){return Object(n.jsx)(cs,{tace:e,practice:p&&p.consultantProfil.practice},t)}))})]})}),Object(n.jsx)(Fn,{access:"consoDispo",children:Object(n.jsx)(oc,{title:"Availabilities",close:!0,children:Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:Object(n.jsx)(ns,{start:d,end:h,mode:"consultation",history:t})})})})})]})},rs=a(185),is=a(151),ls=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var n=Object(Un.a)(wn.a.mark((function n(c,s){var r,i,l,o,d;return wn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:Ka}),r=s(),i=r.userLogin.userInfo,l={headers:{Authorization:"Bearer ".concat(i.token)}},n.next=6,Rn.a.get("/api/clients?clientName=".concat(e,"&pageNumber=").concat(t,"&pageSize=").concat(a),l);case 6:o=n.sent,d=o.data,c({type:Ya,payload:d}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),c({type:Va,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},os=function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ja}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.post("/api/clients",e,r);case 6:i=t.sent,l=i.data,a({type:Za,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:$a,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},ds=function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:tn}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.put("/api/clients",e,r);case 6:i=t.sent,l=i.data,a({type:an,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:nn,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},js=a(272),us=function(e){var t=e.company,a=e.setCompany,s=e.editRequest,r=Object(i.b)(),l=Object(i.c)((function(e){return e.clientAll})).clients,o=Object(i.c)((function(e){return e.clientCreate})).success;Object(c.useEffect)((function(){r(ls(""))}),[r,o]);return Object(n.jsx)(Bn.a,{className:"align-items-end",children:Object(n.jsx)(qn.a,{children:Object(n.jsx)(js.a,{placeholder:"Select a company",isClearable:!0,onChange:function(e){e?(l.map((function(e){return e._id})).includes(e.value)||r(os([{name:e.label,commercialTeam:[]}])),a(e.label)):a("")},value:t&&""!==t.label?t:null,options:l&&l.map((function(e){return{value:e._id,label:e.name}})),isDisabled:!s})})})},bs=function(e){var t=e.match,a=e.history,s=Object(i.b)(),r=Object(i.c)((function(e){return e.userLogin})).userInfo,l=Object(i.c)((function(e){return e.dealCreate})),o=l.loading,d=l.error,j=l.success,u=l.createId,b=Object(i.c)((function(e){return e.dealUpdate})),h=b.loading,O=b.error,p=Object(i.c)((function(e){return e.dealEdit})),x=p.success,m=p.deal,f=Object(i.c)((function(e){return e.consultantPracticeList})).practiceList,g=Object(i.c)((function(e){return e.consultantsAllLeaders})).leaderslist,v=Object(c.useState)(""),y=Object(Xn.a)(v,2),S=y[0],E=y[1],C=Object(c.useState)(""),N=Object(Xn.a)(C,2),T=N[0],L=N[1],A=Object(c.useState)(""),_=Object(Xn.a)(A,2),I=_[0],D=_[1],k=Object(c.useState)(""),w=Object(Xn.a)(k,2),U=w[0],P=w[1],R=Object(c.useState)(""),M=Object(Xn.a)(R,2),F=M[0],G=M[1],B=Object(c.useState)(""),q=Object(Xn.a)(B,2),z=q[0],X=q[1],H=Object(c.useState)(""),Q=Object(Xn.a)(H,2),K=Q[0],Y=Q[1],V=Object(c.useState)(""),W=Object(Xn.a)(V,2),J=W[0],Z=W[1],$=Object(c.useState)(""),ee=Object(Xn.a)($,2),te=ee[0],ae=ee[1],ne=Object(c.useState)(""),ce=Object(Xn.a)(ne,2),se=ce[0],re=ce[1],ie=Object(c.useState)(""),le=Object(Xn.a)(ie,2),oe=le[0],de=le[1],je=Object(c.useState)([]),ue=Object(Xn.a)(je,2),be=ue[0],he=ue[1],Oe=Object(c.useState)(""),pe=Object(Xn.a)(Oe,2),xe=pe[0],me=pe[1],fe=Object(c.useState)(""),ge=Object(Xn.a)(fe,2),ve=ge[0],ye=ge[1],Se=Object(c.useState)(""),Ee=Object(Xn.a)(Se,2),Ce=Ee[0],Ne=Ee[1],Te=Object(c.useState)([]),Ie=Object(Xn.a)(Te,2),De=Ie[0],ke=Ie[1],we=Object(c.useState)([]),Ue=Object(Xn.a)(we,2),Pe=Ue[0],Re=Ue[1],Me=Object(c.useState)(""),Fe=Object(Xn.a)(Me,2),Ge=Fe[0],Be=Fe[1],qe=Object(c.useState)(""),ze=Object(Xn.a)(qe,2),Xe=ze[0],He=ze[1],Qe=Object(c.useState)(""),Ke=Object(Xn.a)(Qe,2),Ye=Ke[0],Ve=Ke[1],We=Object(c.useState)(""),Je=Object(Xn.a)(We,1)[0],Ze=Object(c.useState)(""),$e=Object(Xn.a)(Ze,2),et=$e[0],tt=$e[1],at=Object(c.useState)([]),nt=Object(Xn.a)(at,2),ct=nt[0],st=nt[1],rt=Object(c.useState)(""),it=Object(Xn.a)(rt,2),lt=it[0],ot=it[1],dt=Object(c.useState)(!1),jt=Object(Xn.a)(dt,2),ut=jt[0],bt=jt[1],ht=Object(c.useState)(""),Ot=Object(Xn.a)(ht,2),pt=Ot[0],xt=Ot[1],mt=Object(c.useState)({}),ft=Object(Xn.a)(mt,2),gt=ft[0],vt=ft[1],yt=Object(c.useState)(!t.params.id),St=Object(Xn.a)(yt,2),Et=St[0],Ct=St[1],Nt=Object(c.useState)(!1),Tt=Object(Xn.a)(Nt,2),Lt=Tt[0],At=Tt[1],_t=Object(c.useState)([]),It=Object(Xn.a)(_t,2),Dt=It[0],kt=It[1],wt=Object(c.useState)([]),Ut=Object(Xn.a)(wt,2),Pt=Ut[0],Rt=Ut[1],Mt=Object(c.useState)(null),Ft=Object(Xn.a)(Mt,2),Gt=Ft[0],Bt=Ft[1],qt=new Date(Date.now());qt.setUTCDate(1),qt.setUTCMonth(qt.getUTCMonth()),qt=qt.toISOString().substring(0,10);var zt=new Date(Date.now());zt.setUTCDate(1),zt.setUTCMonth(zt.getUTCMonth()+3-1),zt=zt.toISOString().substring(0,10);var Xt=Object(c.useState)(qt),Ht=Object(Xn.a)(Xt,1)[0],Qt=Object(c.useState)(zt),Kt=Object(Xn.a)(Qt,1)[0];Object(c.useEffect)((function(){r||a.push("/login")}),[a,r]),Object(c.useEffect)((function(){f||s(uc())}),[s,f]),Object(c.useEffect)((function(){var e;t.params.id&&s((e=t.params.id,function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:va}),c=n(),s=c.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.get("/api/deals/".concat(e),r);case 6:i=t.sent,l=i.data,a({type:ya,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Sa,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[s,t]),Object(c.useEffect)((function(){s(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Le}),c=n(),s=c.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.get("/api/consultants/leaderslist?searchLeader=".concat(e),r);case 6:i=t.sent,l=i.data,a({type:Ae,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:_e,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}())}),[s]),Object(c.useEffect)((function(){t.params.id&&x&&(E(m.title),L(m.company),D(m.client),G(m.status),P(m.type),X(m.probability),Y(m.description),Z(m.proposalDate?m.proposalDate.substring(0,10):""),ae(m.presentationDate?m.presentationDate.substring(0,10):""),re(m.startDate?m.startDate.substring(0,10):""),de(m.mainPractice),he(m.othersPractices?m.othersPractices:[]),me(m.location),ye(m.staffingRequest.instructions),Ne(m.staffingRequest.requestStatus),ke(m.staffingRequest.ressources?m.staffingRequest.ressources:[]),tt(m.staffingDecision.staffingStatus?m.staffingDecision.staffingStatus:""),tt(m.staffingDecision.instructions?m.staffingDecision.instructions:""),st(m.staffingDecision.staff?m.staffingDecision.staff:[]),kt(m.contacts.primary?[{id:m.contacts.primary._id,value:m.contacts.primary.name}]:[""]),Rt(m.contacts.secondary?m.contacts.secondary.map((function(e){return{id:e._id,value:e.name}})):[]),Re(m.comments?m.comments:[]),Be(m.duration?m.duration:""),He(m.othersContacts?m.othersContacts:""))}),[x,m,r,t]),Object(c.useEffect)((function(){j&&(a.push("/staffing/".concat(u)),s({type:la}))}),[s,a,j,u]),Object(c.useEffect)((function(){if(t.params.id&&Lt){if(!T)return Bt("Please select a company"),void Ct(!0);Bt("");var e={company:T,client:I,title:S,type:U,status:F,contacts:{primary:Dt.length?Dt[0].id:null,secondary:Pt.length?Pt.map((function(e){return e.id})):[]},probability:z,description:K,proposalDate:J,presentationDate:te,wonDate:lt,startDate:se,duration:Ge,mainPractice:oe,othersPractices:be,location:xe,staffingRequest:{instructions:ve,requestStatus:Ce,ressources:De},staffingDecision:{instructions:Je,staffingStatus:et,staff:ct.map((function(e){return{responsability:e.responsability,idConsultant:e.idConsultant._id,priority:e.priority,information:e.information}}))},comments:Pe,othersContacts:Xe};s(vc(t.params.id,e)),At(!1),Ve("")}}),[t,s,r,Lt,T,U,I,S,F,z,K,J,te,lt,se,Ge,oe,be,xe,ve,Ce,De,Je,et,ct,Dt,Pt,Pe,Xe]);var Yt=function(e,t,a,n){var c=Object(rs.a)(Array,Object(Ec.a)(ct));ct.map((function(e){return e.idConsultant._id})).includes(e._id)&&(c=c.filter((function(t){return t.idConsultant._id!==e._id}))),c.push({idConsultant:{_id:e._id,name:e.name},responsability:t,priority:a,information:n}),st(c),At(!0)},Vt=function(){var e=Pe.slice();e.push({message:Ye,sender:{_id:r._id,name:r.name},date:new Date(Date.now()).toISOString()}),e.sort((function(e,t){return Date.parse(t.date)-Date.parse(e.date)})),Re(e),At(!0)},Wt=function(e){var t=e.split(" ");return 1===t.length?t[0]:t.map((function(e,t){return 0===t?e[0].toUpperCase()+".":e.toUpperCase()})).join(" ")};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(fc,{}),ut&&Object(n.jsx)(Zc,{show:ut,onHide:function(){return bt(!1)},consultant:pt,loadingData:gt,mode:"staffing",addStaffHandler:Yt,history:a}),Object(n.jsx)("h1",{children:"Staffing request"}),Object(n.jsxs)(Hn.a,{onSubmit:function(e){if(e.preventDefault(),T){Bt(null);var a={company:T,client:I,title:S,contacts:{primary:Dt.length?Dt[0].id:null,secondary:Pt.length?Pt.map((function(e){return e.id})):[]},type:U,status:F,probability:z,description:K,proposalDate:J,presentationDate:te,wonDate:lt,startDate:se,duration:Ge,mainPractice:oe,othersPractices:be,location:xe,staffingRequest:{instructions:ve,requestStatus:Ce,ressources:De},staffingDecision:{instructions:Je,staffingStatus:et,staff:ct.map((function(e){return{responsability:e.responsability,idConsultant:e.idConsultant._id,priority:e.priority,information:e.information}}))},comments:Pe,othersContacts:Xe};t.params.id?s(vc(t.params.id,a)):s(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:sa}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.post("/api/deals",e,r);case 6:i=t.sent,l=i.data,a({type:ra,payload:l._id}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:ia,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))}else Bt("Please select a company")},children:[Object(n.jsxs)(Bn.a,{className:"mt-3",children:[Object(n.jsx)(qn.a,{xs:6,md:2,children:t.params.id&&Object(n.jsx)(Qn.a,{type:"button",variant:"primary",onClick:function(){a.go(-1),s({type:ua})},block:!0,children:"Go Back"})}),Object(n.jsx)(qn.a,{xs:0,md:8}),Object(n.jsx)(qn.a,{xs:6,md:2,children:t.params.id&&h&&Object(n.jsx)(Zn,{})})]}),d&&Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:Object(n.jsx)(Wn,{variant:"danger",children:d})})}),t.params.id&&Object(n.jsxs)(Bn.a,{className:"mt-3 align-items-center",children:[Object(n.jsx)(qn.a,{md:1,children:Object(n.jsx)(Qn.a,{onClick:function(){Ct(!Et),Et&&At(!0)},variant:"light",children:Et?Object(n.jsx)("i",{className:"far fa-check-circle"}):Object(n.jsx)("i",{className:"far fa-edit"})})}),Object(n.jsxs)(qn.a,{className:"text-left align-middle",children:[Et&&Object(n.jsx)("p",{children:" Please click to update"}),O&&Object(n.jsx)(Wn,{variant:"danger",children:O})]})]}),Object(n.jsxs)(Bn.a,{className:"mt-2",children:[Object(n.jsxs)(qn.a,{xs:12,md:4,children:[Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"title",className:"mb-0",children:[Object(n.jsxs)(Hn.a.Label,{as:"h5",children:["Title ",Et&&"*"]}),Et?Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Staffing request object",value:S||"",onChange:function(e){return E(e.target.value)},required:!0}):Object(n.jsx)(Hn.a.Control,{type:"text",plaintext:!0,value:S||"",readOnly:!0})]})}),Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsxs)(Hn.a.Group,{controlId:"select-company",className:"mb-0",children:[Object(n.jsx)(Hn.a.Label,{as:"h5",children:"Company"}),Object(n.jsx)(us,{company:{value:T,label:T},setCompany:L,editRequest:Et})]}),Gt&&Object(n.jsx)(Wn,{variant:"danger",children:Gt})]}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"client",className:"mb-0",children:[Object(n.jsx)(Hn.a.Label,{as:"h5",children:"Client"}),Et?Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Client name",value:I||"",onChange:function(e){return D(e.target.value)}}):Object(n.jsx)(Hn.a.Control,{type:"text",plaintext:!0,readOnly:!0,value:I||""})]})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"type",className:"mb-0",children:[Object(n.jsxs)(Hn.a.Label,{as:"h5",children:["Type of business ",Et&&"*"]}),Et?Object(n.jsxs)(Hn.a.Control,{as:"select",value:U||"",onChange:function(e){P(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),wa.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name},e.name)}))]}):Object(n.jsx)(Hn.a.Control,{type:"text",plaintext:!0,value:U||"",readOnly:!0})]})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"status",className:"mb-0",children:[Object(n.jsxs)(Hn.a.Label,{as:"h5",children:["Status ",Et&&"*"]}),Et?Object(n.jsxs)(Hn.a.Control,{as:"select",value:F||"",onChange:function(e){"Won"===e.target.value?ot(new Date(Date.now())):ot(""),G(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Ua.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name},e.name)}))]}):Object(n.jsx)(Hn.a.Control,{type:"text",plaintext:!0,readOnly:!0,value:F||""})]})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"probability",className:"mb-0",children:[Object(n.jsxs)(Hn.a.Label,{as:"h5",children:["Probability ",Et&&"*"]}),Et?Object(n.jsxs)(Hn.a.Control,{as:"select",value:z||"",onChange:function(e){return X(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Pa.map((function(e){return Object(n.jsxs)("option",{value:e.name,children:[e.name," %"]},e.name)}))]}):Object(n.jsx)(Hn.a.Control,{type:"text",value:"".concat(z," %"),plaintext:!0,readOnly:!0})]})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"location",className:"mb-0",children:[Object(n.jsx)(Hn.a.Label,{as:"h5",children:"Location"}),Et?Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Location",value:xe||"",onChange:function(e){return me(e.target.value)}}):Object(n.jsx)(Hn.a.Control,{type:"text",plaintext:!0,readOnly:!0,value:xe||""})]})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"main-practice",className:"mb-0",children:[Object(n.jsxs)(Hn.a.Label,{as:"h5",children:["Main Practice ",Et&&"*"]}),Et?Object(n.jsxs)(Hn.a.Control,{as:"select",value:oe||"",onChange:function(e){return de(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),f&&f.map((function(e,t){return Object(n.jsx)("option",{value:e,children:e},t)}))]}):Object(n.jsx)(Hn.a.Control,{type:"text",plaintext:!0,readOnly:!0,value:oe||""})]})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"others-practices",className:"mb-0",children:[Object(n.jsx)(Hn.a.Label,{as:"h5",children:"Others Practices"}),Et?Object(n.jsx)(Hn.a.Control,{as:"select",multiple:!0,value:be||[],onChange:function(e){return function(){for(var e=[],t=document.getElementById("others-practices"),a=0;a<t.options.length;a++)t.options[a].selected&&e.push(t.options[a].value);he(e)}()},children:f&&f.map((function(e,t){return e!==oe&&Object(n.jsx)("option",{value:e,children:e},t)}))}):Object(n.jsx)(Hn.a.Control,{type:"text",value:be?be.join(", "):"",plaintext:!0,readOnly:!0})]})})]}),Object(n.jsxs)(qn.a,{xs:12,md:8,children:[Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Bn.a,{className:"align-items-start",children:[Object(n.jsx)(qn.a,{xs:12,md:4,children:Object(n.jsxs)(Hn.a.Group,{controlId:"select-leader",className:"mb-0",children:[Object(n.jsx)(Hn.a.Label,{as:"h5",children:"Leader"}),Object(n.jsx)(es,{options:g?g.map((function(e){return{value:e._id,label:e.name}})):[],value:Dt.length?{value:Dt[0].id,label:Dt[0].value}:{},setValue:kt,multi:!1,disabled:!Et})]})}),Object(n.jsx)(qn.a,{xs:12,md:4,children:Object(n.jsxs)(Hn.a.Group,{controlId:"others",className:"mb-0",children:[Object(n.jsx)(Hn.a.Label,{as:"h5",children:"Co-Leader(s)"}),Object(n.jsx)(es,{options:g?g.map((function(e){return{value:e._id,label:e.name}})):[],value:Pt?Pt.map((function(e){return{value:e.id,label:e.value}})):[],setValue:Rt,multi:!0,disabled:!Et})]})}),Object(n.jsx)(qn.a,{xs:12,md:4,children:Object(n.jsxs)(Hn.a.Group,{controlId:"others",className:"mb-0",children:[Object(n.jsx)(Hn.a.Label,{as:"h5",children:"Others contacts"}),Et?Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"email1@mail.com;email2@mail.com",value:Xe||"",onChange:function(e){return He(e.target.value)}}):Object(n.jsx)(Hn.a.Control,{type:"text",value:Xe||"",plaintext:!0,readOnly:!0})]})})]})}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"description",className:"mb-0",children:[Object(n.jsxs)(Hn.a.Label,{as:"h5",children:["Description ",Et&&"*"]}),Et?Object(n.jsx)(Hn.a.Control,{as:"textarea",rows:3,placeholder:"Deal description",value:K||"",onChange:function(e){return Y(e.target.value)},required:!0}):Object(n.jsx)(Hn.a.Control,{type:"text",value:K||"",plaintext:!0,readOnly:!0})]})}),Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsx)("h5",{children:"Sheduling"}),Object(n.jsxs)(Bn.a,{className:"align-items-end",children:[Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"proposal-date",className:"mb-0",children:[Object(n.jsx)(Hn.a.Label,{children:"Proposal"}),Et?Object(n.jsx)(Hn.a.Control,{type:"date",placeholder:"Deal date",value:J||"",onChange:function(e){return Z(e.target.value)}}):Object(n.jsx)(Hn.a.Control,{type:"date",value:J||"",plaintext:!0,readOnly:!0})]})}),Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"presentation-date",className:"mb-0",children:[Object(n.jsx)(Hn.a.Label,{children:"Presentation"}),Et?Object(n.jsx)(Hn.a.Control,{type:"date",placeholder:"Presentation date",value:te||"",onChange:function(e){return ae(e.target.value)}}):Object(n.jsx)(Hn.a.Control,{type:"date",value:te||"",plaintext:!0,readOnly:!0})]})}),Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"start-date",className:"mb-0",children:[Object(n.jsxs)(Hn.a.Label,{children:["Start ",Et&&"*"]}),Et?Object(n.jsx)(Hn.a.Control,{type:"date",placeholder:"Start date",value:se||"",onChange:function(e){return re(e.target.value)},required:!0}):Object(n.jsx)(Hn.a.Control,{type:"date",value:se||"",plaintext:!0,readOnly:!0})]})}),Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a.Group,{controlId:"duration",className:"mb-0",children:[Object(n.jsxs)(Hn.a.Label,{children:["Duration (month) ",Et&&"*"]}),Et?Object(n.jsx)(Hn.a.Control,{type:"number",placeholder:"Duration",min:0,step:.5,value:Ge||0,onChange:function(e){return Be(e.target.value)},required:!0}):Object(n.jsx)(Hn.a.Control,{type:"number",value:Ge||0,plaintext:!0,readOnly:!0})]})})]})]}),Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Bn.a,{children:[Object(n.jsx)(qn.a,{xs:12,md:8,children:Object(n.jsxs)(Hn.a.Group,{controlId:"sr-instruction",className:"mb-0",children:[Object(n.jsxs)(Hn.a.Label,{as:"h5",children:["Staffing instruction ",Et&&"*"]}),Et?Object(n.jsx)(Hn.a.Control,{as:"textarea",rows:3,placeholder:"Staffing instruction",value:ve||"",onChange:function(e){return ye(e.target.value)},required:!0}):Object(n.jsx)(Hn.a.Control,{type:"text",value:ve||"",plaintext:!0,readOnly:!0})]})}),Object(n.jsx)(qn.a,{xs:12,md:4,children:Object(n.jsxs)(Hn.a.Group,{controlId:"sr-status",className:"mb-0",children:[Object(n.jsxs)(Hn.a.Label,{as:"h5",children:["Status ",Et&&"*"]}),Object(n.jsxs)(Hn.a.Control,{as:"select",value:Ce||"",onChange:function(e){Ne(e.target.value),At(!0)},required:!0,children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),ka.map((function(e){var t=e.name;return Object(n.jsx)("option",{value:t,children:t},t)}))]})]})})]})}),t.params.id&&Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsx)("h5",{children:"Staffing decision"}),ct&&Object(Ec.a)(new Set(ct.map((function(e){return e.priority})))).sort().map((function(e){return Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Bn.a,{children:[Object(n.jsx)(qn.a,{sm:1,children:Object(n.jsx)(Bn.a,{className:"my-1",children:Object(n.jsx)(qn.a,{children:e})})}),Object(n.jsx)(qn.a,{sm:11,children:ct.filter((function(t){return t.priority===e})).map((function(e){return Object(n.jsxs)(Bn.a,{className:"my-1",children:[Object(n.jsx)(qn.a,{sm:10,children:Object(n.jsx)(Cc.a,{placement:"top",trigger:"click",overlay:Object(n.jsxs)(is.a,{id:"popover-others-staffs",style:{maxWidth:"40%"},children:[Object(n.jsx)(is.a.Title,{id:"contained-modal-title-vcenter",children:"Others staffs"}),Object(n.jsx)(is.a.Content,{children:Object(n.jsx)(gc,{history:a,consultantId:e.idConsultant._id,onNavigate:function(){return""},displayedDeal:t.params.id})})]}),children:Object(n.jsxs)("div",{children:[Object(n.jsx)("strong",{children:"".concat(e.responsability,": ")}),"".concat(Wt(e.idConsultant.name)),Object(n.jsx)("i",{children:" (".concat(e.information,")")})]})})}),Object(n.jsxs)(qn.a,{sm:2,className:"px-0",children:[Object(n.jsx)(Fn,{access:"editStaff",children:Object(n.jsx)(Qn.a,{onClick:function(){xt(e.idConsultant),vt({information:e.information,priority:e.priority,responsability:e.responsability}),bt(!0)},variant:"secondary",className:"text-center mx-1",size:"sm",children:Object(n.jsx)("i",{className:"fas fa-edit"})})}),Object(n.jsx)(Fn,{access:"editStaff",children:Object(n.jsx)(Qn.a,{onClick:function(){return function(e){var t=Object(rs.a)(Array,Object(Ec.a)(ct));t=t.filter((function(t){return t.idConsultant._id!==e})),st(t),At(!0)}(e.idConsultant._id)},variant:"danger",className:"text-center mx-1",size:"sm",children:Object(n.jsx)("i",{className:"fas fa-times"})})})]})]},e.idConsultant._id)}))})]},e)},e)}))]}),!t.params.id&&Object(n.jsx)(Bn.a,{className:"mt-3",children:Object(n.jsx)(qn.a,{className:"text-right",children:Object(n.jsx)(Qn.a,{type:"submit",variant:"primary",children:o?Object(n.jsx)(Zn,{}):"Submit staffing"})})}),m&&t.params.id&&Object(n.jsx)(tc.a.Item,{children:Object(n.jsx)(Bn.a,{className:"my-1",children:Object(n.jsxs)(qn.a,{children:[Object(n.jsx)("strong",{children:"Last update at: "}),m.updatedAt.substring(0,19).replace("T"," "),Object(n.jsxs)(Bn.a,{className:"align-items-center my-3",children:[Object(n.jsx)(qn.a,{xs:11,children:Object(n.jsx)(Hn.a.Group,{controlId:"comment",className:"mb-0",children:Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Add a comment",value:Ye||"",onChange:function(e){return Ve(e.target.value)},onKeyUp:function(e){return"Enter"===e.key&&Vt()}})})}),Object(n.jsx)(qn.a,{xs:1,children:Object(n.jsx)(Qn.a,{variant:"primary",onClick:function(){return Vt()},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-plus"})})})]}),Object(n.jsx)(tc.a,{className:"my-3",children:Pe&&Pe.map((function(e,t){return Object(n.jsxs)(tc.a.Item,{className:"mb-0",children:[Object(n.jsx)("p",{children:e.message}),Object(n.jsx)("p",{style:{textAlign:"right",marginBottom:"0"},children:Object(n.jsxs)("i",{children:["By ",e.sender.name," the ",e.date.substring(0,19).replace("T"," at "),"  ",e.sender._id===r._id&&Object(n.jsx)(Qn.a,{size:"sm",variant:"ligth",style:{color:"red"},onClick:function(){return function(e){var t=Pe.slice();t=t.filter((function(t){return t.date!==e})),Re(t),At(!0)}(e.date)},children:"--delete--"})]})})]},t)}))}),Object(n.jsx)("strong",{children:"Created at: "}),m.createdAt.substring(0,19).replace("T"," ")," ",Object(n.jsx)("br",{})]})})})]})]})]}),t.params.id&&Object(n.jsx)(oc,{title:"Availabilities",close:!1,children:Object(n.jsx)(ns,{start:Ht,end:Kt,mode:"staffing",addStaffHandler:Yt,history:a})})]})},hs=function(e){var t=e.history,a=Object(i.b)(),s=Object(c.useState)(10),r=Object(Xn.a)(s,2),l=r[0],o=r[1],d=Object(c.useState)(1),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(""),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(c.useState)([]),f=Object(Xn.a)(m,2),g=f[0],v=f[1],y=Object(c.useState)("default"),S=Object(Xn.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(""),T=Object(Xn.a)(N,2),L=T[0],A=T[1],_=Object(c.useState)(""),I=Object(Xn.a)(_,2),D=I[0],k=I[1],w=Object(i.c)((function(e){return e.userLogin})).userInfo,U=Object(i.c)((function(e){return e.skillList})),P=U.loading,R=U.skills,M=U.pages,F=U.page,G=U.count,B=Object(i.c)((function(e){return e.skillDelete})),q=B.error,z=B.success,X=Object(i.c)((function(e){return e.skillCreate})),H=X.loading,Q=X.error,K=X.success,Y=Object(i.c)((function(e){return e.consultantAllSkills})),V=Y.loading,W=Y.skills;Object(c.useEffect)((function(){w&&["admin","coordinator"].includes(w.profil.profil)?a(ts("",p,u,l)):t.push("/login")}),[a,t,w,"",p,u,l]),Object(c.useEffect)((function(){z&&a(ts("",p,u,l))}),[a,z]),Object(c.useEffect)((function(){K&&a(ts("",p,u,l))}),[a,K]),Object(c.useEffect)((function(){if(W){var e=W.map((function(e){return e.category}));e=Object(Ec.a)(new Set(e)),v(e)}else V||a(Oc())}),[a,W,V]);var J=function(e){var t;window.confirm("Are you sure to delete skill: ".concat(e.name," ?"))&&a((t=e._id,function(){var e=Object(Un.a)(wn.a.mark((function e(a,n){var c,s,r;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:Jt}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},e.next=6,Rn.a.delete("/api/skills/".concat(t),r);case 6:a({type:Zt}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:$t,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(oc,{title:"Create Skills",close:!0,children:Object(n.jsx)(tc.a.Item,{children:Object(n.jsx)(Bn.a,{className:"mt-3",children:Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Hn.a,{onSubmit:function(e){var t;e.preventDefault(),a((t={category:E,name:L,description:D},function(){var e=Object(Un.a)(wn.a.mark((function e(a,n){var c,s,r,i,l;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:ta}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},e.next=6,Rn.a.post("/api/skills",t,r);case 6:i=e.sent,l=i.data,a({type:aa,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:na,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))},children:[Object(n.jsxs)(Hn.a.Row,{children:[Object(n.jsx)(qn.a,{md:3,children:Object(n.jsx)(Hn.a.Group,{controlId:"skillCategory",children:Object(n.jsxs)(Hn.a.Control,{as:"select",value:E||"default",onChange:function(e){return C(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"default",children:"Please Select"}),g&&g.map((function(e,t){return Object(n.jsx)("option",{value:e,onChange:function(e){C(e.target.value)},children:e},t)}))]})})}),Object(n.jsx)(qn.a,{md:3,children:Object(n.jsx)(Hn.a.Group,{controlId:"name-skill",children:Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Skill",value:L&&L,onChange:function(e){return A(e.target.value)},disabled:"default"===E,required:!0})})}),Object(n.jsx)(qn.a,{md:4,children:Object(n.jsx)(Hn.a.Group,{controlId:"description-skill",children:Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Skill description",value:D&&D,onChange:function(e){return k(e.target.value)},disabled:"default"===E,required:!0})})}),Object(n.jsx)(qn.a,{className:"text-right",children:Object(n.jsx)(Qn.a,{type:"submit",variant:"primary",block:!0,children:H?Object(n.jsx)(Zn,{}):"Add"})})]}),Q&&Object(n.jsx)(Wn,{variant:"danger",children:Q})]})})})})}),Object(n.jsx)(oc,{title:"Search Skills",close:!1,children:Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsxs)(Bn.a,{className:"mt-3",children:[Object(n.jsx)(qn.a,{xs:6,md:2,children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{type:"text",className:"mb-3",placeholder:"Search skill",value:p&&p,onChange:function(e){return x(e.target.value)}})})}),Object(n.jsx)(qn.a,{xs:6,md:8,children:Object(n.jsx)(Hn.a.Control,{plaintext:!0,readOnly:!0,value:G?"".concat(G," skills found"):"0 skills found"})}),Object(n.jsx)(qn.a,{xs:6,md:2,children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{as:"select",id:"number-c",className:"mb-3",value:l&&l,onChange:function(e){return o(e.target.value)},children:[5,10,15,20,50].map((function(e){return Object(n.jsxs)("option",{value:e,children:[e," / page"]},e)}))})})})]}),R&&0===R.length?Object(n.jsx)(Wn,{variant:"information",children:"You have not access to these information"}):P?Object(n.jsx)(Zn,{}):q?Object(n.jsx)(Wn,{variant:"danger",children:q}):Object(n.jsxs)(Kn.a,{responsive:!0,hover:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"Category"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Skill"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Description"}),Object(n.jsx)("th",{className:"align-middle text-light"})]})}),Object(n.jsx)("tbody",{children:R&&R.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:e.category}),Object(n.jsx)("td",{className:"align-middle",children:e.name}),Object(n.jsx)("td",{className:"align-middle",children:e.description}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(Qn.a,{variant:"danger",onClick:function(){return J(e)},size:"sm",children:Object(n.jsx)("i",{className:"fas fa-times"})})})]},e._id)}))})]}),Object(n.jsxs)(Rc.a,{children:[Object(n.jsx)(Rc.a.Prev,{onClick:function(){return b(F-1)},disabled:1===F}),Object(Ec.a)(Array(M).keys()).map((function(e){return[0,1,M-2,M-1].includes(e)?Object(n.jsx)(Rc.a.Item,{active:e+1===F,onClick:function(){a(ts("",p,e+1,l)),b(e+1)},children:e+1},e+1):M>4&&2===e&&Object(n.jsx)(Rc.a.Ellipsis,{},e+1)})),Object(n.jsx)(Rc.a.Next,{onClick:function(){return b(F+1)},disabled:F===M})]})]})})]})},Os=a(81),ps=function(e){var t=Object(i.b)(),a=Object(c.useState)(0),s=Object(Xn.a)(a,2),r=s[0],l=s[1],o=Object(i.c)((function(e){return e.pxxUploadFile})),d=o.loading,j=o.error,u=o.path,b=Object(i.c)((function(e){return e.updatePxx})),h=b.loading,O=b.error,p=b.message;return Object(n.jsxs)(Mc.a,Object(me.a)(Object(me.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(n.jsx)(Mc.a.Header,{closeButton:!0,children:Object(n.jsx)(Bn.a,{className:"align-items-center",children:Object(n.jsx)(qn.a,{className:"text-center",children:Object(n.jsx)(Mc.a.Title,{id:"contained-modal-title-vcenter",children:"Import Pxx from Pxx directory"})})})}),Object(n.jsxs)(Mc.a.Body,{children:[Object(n.jsxs)(Bn.a,{className:"mb-3",children:[Object(n.jsx)(qn.a,{children:Object(n.jsx)(Qn.a,{className:r>=0?"text-primary":"text-secondary",onClick:function(){return l(0)},variant:"ligth",disabled:r<0,children:Object(n.jsx)("strong",{children:"1-Guidelines"})})}),Object(n.jsx)(qn.a,{children:Object(n.jsx)(Qn.a,{className:r>=1?"text-primary":"text-secondary",onClick:function(){return l(1)},variant:"ligth",disabled:r<1,children:Object(n.jsx)("strong",{children:"2-Upload in App"})})}),Object(n.jsx)(qn.a,{children:Object(n.jsx)(Qn.a,{className:r>=2?"text-primary":"text-secondary",onClick:function(){return l(2)},variant:"ligth",disabled:r<2,children:Object(n.jsx)("strong",{children:"3-Start update"})})}),Object(n.jsx)(qn.a,{children:Object(n.jsx)(Qn.a,{className:r>=3?"text-primary":"text-secondary",onClick:function(){return l(3)},variant:"ligth",disabled:r<3,children:Object(n.jsx)("strong",{children:"4-Result"})})})]}),Object(n.jsx)(Bn.a,{className:"align-items-center",children:Object(n.jsxs)(qn.a,{children:[0===r&&Object(n.jsx)(Bn.a,{children:Object(n.jsxs)(qn.a,{children:[Object(n.jsx)("h4",{children:"Process to upload pxx and update availabilities"}),Object(n.jsx)("p",{children:"In the next steps you will be invit to"}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:"Select your Pxx storage directory"}),Object(n.jsx)("li",{children:"Wait untill all Pxx files are uploaded"}),Object(n.jsx)("li",{children:"Start the backend calculation to update availabilities"}),Object(n.jsx)("li",{children:"Check the results and if asked proceed to corrections"})]})]})}),1===r&&Object(n.jsx)(Bn.a,{className:"align-items-center",children:Object(n.jsxs)(qn.a,{className:"text-center",children:[Object(n.jsx)("h4",{children:"Upload your file here"}),d?Object(n.jsx)(Zn,{}):Object(n.jsx)("input",{className:"my-3",type:"file",name:"file",onChange:function(e){for(var a=[],n=0;n<e.target.files.length;n++){var c=e.target.files[n];if(c.name.match(/^p[A-Za-z]+-[0-9]{2}.xlsb|^p[A-Za-z]+-arrivees.xlsb/)){var s=new FormData;s.append("file",c),a.push(s)}}t(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l,o,d,j;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a({type:F}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-Type":"application/vnd.ms-excel",Authorization:"Bearer ".concat(s.token)}},i="",l=0;case 6:if(!(l<e.length)){t.next=16;break}return o=e[l],t.next=10,Rn.a.post("/api/upload/pxx",o,r);case 10:d=t.sent,j=d.data,i=j;case 13:l++,t.next=6;break;case 16:a({type:G,payload:i}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),a({type:B,payload:{message:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message}});case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))},webkitdirectory:"true",directory:"true",multiple:!0}),j&&Object(n.jsx)(Wn,{variant:"danger",children:j})]})}),2===r&&(u?Object(n.jsx)(Bn.a,{children:Object(n.jsxs)(qn.a,{className:"text-center",children:[Object(n.jsx)("h4",{children:"Do you want to update availabilities ?"}),h?Object(n.jsx)(Zn,{}):Object(n.jsx)(Qn.a,{variant:"primary",className:"m-3",onClick:function(){u&&t(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:z}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.put("/api/pxx/admin/line-import-wk",e,r);case 6:i=t.sent,l=i.data,a({type:X,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:H,payload:{message:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message}});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(u))},children:"Update"}),Object(n.jsx)("p",{children:"Process could take a few minute"}),O&&Object(n.jsx)(Wn,{variant:"danger",children:O})]})}):Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:"Something wrong retry step 2"})})),3===r&&Object(n.jsx)(Hn.a.Control,{as:"textarea",rows:10,value:p&&p,readOnly:!0})]})})]}),Object(n.jsxs)(Mc.a.Footer,{children:[3===r&&Object(n.jsx)(Qn.a,{onClick:e.onHide,children:"Close"}),r<3&&Object(n.jsx)(Qn.a,{variant:"success",onClick:function(){return r+1<=3&&l(r+1)},disabled:3===r||1===r&&!u||2===r&&!p,children:"Next"})]})]}))},xs=Pc.a.ExcelFile,ms=Pc.a.ExcelFile.ExcelSheet,fs=Pc.a.ExcelFile.ExcelColumn,gs=function(e){var t=e.history,a=e.match,s=Object(i.b)(),r=a.params.id,l=Object(c.useState)(10),o=Object(Xn.a)(l,2),d=o[0],j=o[1],u=Object(c.useState)(1),b=Object(Xn.a)(u,2),h=b[0],O=b[1],p=Object(c.useState)(""),x=Object(Xn.a)(p,2),m=x[0],f=x[1],g=Object(c.useState)(""),v=Object(Xn.a)(g,2),y=v[0],S=v[1],E=Object(c.useState)([]),C=Object(Xn.a)(E,2),N=C[0],T=C[1],L=Object(c.useState)(0),A=Object(Xn.a)(L,2),_=A[0],I=A[1],D=Object(c.useState)(!1),k=Object(Xn.a)(D,2),w=k[0],M=k[1],F=Object(c.useState)([]),G=Object(Xn.a)(F,2),B=G[0],q=G[1],z=Object(c.useState)(0),X=Object(Xn.a)(z,2),H=X[0],Q=X[1],K=Object(c.useState)(0),Y=Object(Xn.a)(K,2),V=Y[0],W=Y[1],J=Object(c.useState)(0),Z=Object(Xn.a)(J,2),$=Z[0],ee=Z[1],te=Object(c.useState)(!1),ae=Object(Xn.a)(te,2),ne=ae[0],ce=ae[1],se=Object(i.c)((function(e){return e.userLogin})).userInfo,re=Object(i.c)((function(e){return e.pxxAllList})),ie=re.loading,le=re.pxxs,oe=re.pages,de=re.page,je=re.count,ue=Object(i.c)((function(e){return e.pxxImportLine})),be=ue.loading,he=ue.error,Oe=ue.success,pe=ue.updatedLine;Object(c.useEffect)((function(){se?w||s(sc(se.consultantProfil.practice,r,m,d,h)):t.push("/login")}),[s,t,se,r,m,h,d,w]),Object(c.useEffect)((function(){if(le){var e=le.map((function(e){return{CONSULTANT:e.name.name,MATRICULE:e.name.matricule,PRACTICE:e.name.practice,CDM_MATRICULE:e.name.cdmId&&e.name.cdmId.matricule,CDM_NAME:e.name.cdmId&&e.name.cdmId.name,VALUED:e.name.valued?e.name.valued.substring(0,10):"",ARRIVAL:e.name.arrival?e.name.arrival.substring(0,10):"",LEAVING:e.name.leaving?e.name.leaving.substring(0,10):"",MONTH:e.month.name,PROD:e.prodDay,NOT_PROD:e.notProdDay,HOLIDAYS:e.leavingDay,AVAILABLE:e.availableDay}}));S(e)}}),[le,S]);var xe=function(e){for(var t,a=N.slice(),n=0;n<a.length;n++)a[n].MATRICULE===e.MATRICULE&&(a[n].status="loading");T(a),s((t=e,function(){var e=Object(Un.a)(wn.a.mark((function e(a,n){var c,s,r,i,l;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:U}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},e.next=6,Rn.a.put("/api/pxx/admin/line-import",t,r);case 6:i=e.sent,l=i.data,a({type:P,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:R,payload:{message:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(c.useEffect)((function(){w&&(N.length>0&&"imported"!==N[_].status?xe(N[_]):_<N.length-1&&I(_+1))}),[w,_]),Object(c.useEffect)((function(){if(Oe){for(var e=N.slice(),t=0;t<e.length;t++)e[t].MATRICULE===pe.updatedMatricule&&(e[t].status="imported");T(e),w&&(_<N.length-1?I(_+1):M(!1))}}),[Oe]),Object(c.useEffect)((function(){if(he){for(var e=N.slice(),t=0;t<e.length;t++)e[t].MATRICULE===he.message.matricule&&(e[t].status="error");T(e);var a=B.slice();a.push({message:he.message.display}),q(a),w&&(_<N.length-1?I(_+1):(M(!1),I(0)))}}),[he]),Object(c.useEffect)((function(){Q(N.filter((function(e){return"imported"===e.status})).length),W(N.filter((function(e){return"error"===e.status})).length),ee(N.length)}),[N,he,Oe]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(fc,{}),Object(n.jsx)(ps,{show:ne,onHide:function(){return ce(!1)}}),Object(n.jsxs)(Bn.a,{children:[Object(n.jsx)(qn.a,{className:"text-left",children:Object(n.jsx)(Qn.a,{className:"mb-3",onClick:function(){return t.go(-1)},children:"Go Back"})}),Object(n.jsx)(qn.a,{className:"text-right",children:Object(n.jsx)(Fn,{access:"updatePxxFromPxx",children:Object(n.jsx)(Qn.a,{variant:"primary",onClick:function(){return ce(!0)},children:"Update from Pxx folder"})})})]}),Object(n.jsxs)(Bn.a,{className:"align-items-center pt-3",children:[Object(n.jsx)(qn.a,{md:5,children:"".concat(H," Pxx line imported / ").concat($," - ").concat(V," lines with error")}),Object(n.jsx)(qn.a,{ws:6,md:2,className:"text-right",children:y&&Object(n.jsx)(xs,{element:Object(n.jsxs)(Qn.a,{variant:"primary",children:[Object(n.jsx)("i",{className:"fas fa-download"}),"  Download"]}),children:Object(n.jsxs)(ms,{data:y,name:"pxxsheet",children:[Object(n.jsx)(fs,{label:"MATRICULE",value:"MATRICULE"}),Object(n.jsx)(fs,{label:"(PRACTICE)",value:"PRACTICE"}),Object(n.jsx)(fs,{label:"MONTH",value:"MONTH"}),Object(n.jsx)(fs,{label:"PROD",value:"PROD"}),Object(n.jsx)(fs,{label:"NOT_PROD",value:"NOT_PROD"}),Object(n.jsx)(fs,{label:"HOLIDAYS",value:"HOLIDAYS"}),Object(n.jsx)(fs,{label:"(AVAILABLE)",value:"AVAILABLE"}),Object(n.jsx)(fs,{label:"(CDM_MATRICULE)",value:"CDM_MATRICULE"}),Object(n.jsx)(fs,{label:"(CDM_NAME)",value:"CDM_NAME"})]})})}),Object(n.jsx)(qn.a,{md:3,children:Object(n.jsx)(Fn,{access:"uploadPxx",children:be?Object(n.jsx)(Zn,{}):Object(n.jsx)(wc,{setImportData:T,sheets:"1"})})}),Object(n.jsx)(qn.a,{md:2,className:"text-right",children:Object(n.jsxs)(Qn.a,{variant:"primary",onClick:function(){return I(0),void M(!0)},disabled:!N.length>0,children:[Object(n.jsx)("i",{className:"fas fa-upload"})," ",w?Object(n.jsx)(Zn,{}):"Import All Pxx"]})})]}),Object(n.jsx)(Bn.a,{className:"pt-3",children:Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Os.a,{children:[Object(n.jsx)(Os.a,{animated:w,now:100*H/$,variant:"primary"}),Object(n.jsx)(Os.a,{animated:w,now:100*V/$,variant:"danger"})]})})}),Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:B&&B.map((function(e,t){return Object(n.jsx)(Wn,{variant:"warning",children:e.message},t)}))})}),Object(n.jsxs)(Bn.a,{className:"mt-3",children:[Object(n.jsx)(qn.a,{xs:6,md:4,children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{type:"text",className:"mb-3",placeholder:"Search name",value:m&&m,onChange:function(e){return f(e.target.value)}})})}),Object(n.jsx)(qn.a,{xs:6,md:4,children:Object(n.jsx)(Hn.a.Control,{plaintext:!0,readOnly:!0,value:je?"".concat(je," consultants found"):"0 consultant found"})}),Object(n.jsx)(qn.a,{xs:6,md:4,children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{as:"select",id:"number-c",className:"mb-3",value:d&&d,onChange:function(e){return j(e.target.value)},children:["All",5,10,15,20,50].map((function(e){return Object(n.jsx)("option",{value:"All"===e?1e4:e,children:"All"===e?"All (export)":"".concat(e," / page")},e)}))})})})]}),ie&&Object(n.jsx)(Zn,{}),Object(n.jsxs)(Kn.a,{responsive:!0,hover:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"User name"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Matricule"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"CDM"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Month"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Arrival"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"Leaving"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"PROD"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"NOT PROD"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"HOLIDAYS"}),Object(n.jsx)("th",{className:"align-middle text-light text-center",children:"AVAILABLE"})]})}),Object(n.jsx)("tbody",{children:le&&le.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)("b",{children:e.name.name&&e.name.name})}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)("b",{children:e.name.matricule&&e.name.matricule})}),Object(n.jsx)("td",{className:"align-middle",children:e.name.practice&&e.name.practice}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)("b",{children:e.name.cdmId&&e.name.cdmId.name})}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.month.name&&e.month.name}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.name.arrival&&e.name.arrival.toString().substring(0,10)}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.name.leaving?e.name.leaving.toString().substring(0,10):"-"}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.prodDay&&e.prodDay}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.notProdDay&&e.notProdDay}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.leavingDay&&e.leavingDay}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.availableDay&&e.availableDay})]},e._id)}))})]}),Object(n.jsxs)(Rc.a,{children:[Object(n.jsx)(Rc.a.Prev,{onClick:function(){return O(de-1)},disabled:1===de}),Object(Ec.a)(Array(oe).keys()).map((function(e){return[0,1,oe-2,oe-1].includes(e)?Object(n.jsx)(Rc.a.Item,{active:e+1===de,onClick:function(){s(sc(se.consultantProfil.practice,r,m,d,e+1)),O(e+1)},children:e+1},e+1):oe>4&&2===e&&Object(n.jsx)(Rc.a.Ellipsis,{},e+1)})),Object(n.jsx)(Rc.a.Next,{onClick:function(){return O(de+1)},disabled:de===oe})]})]})},vs=function(e){var t=e.history,a=e.data,c=void 0===a?[]:a,s=e.filter,r=Object(i.b)(),l=function(e){var t;window.confirm("Are you sure to delete deal: ".concat(e.title," ?"))&&r((t=e._id,function(){var e=Object(Un.a)(wn.a.mark((function e(a,n){var c,s,r;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:xa}),c=n(),s=c.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(s.token)}},e.next=6,Rn.a.delete("/api/deals/".concat(t),r);case 6:a({type:ma}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:fa,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()))},o=function(e){var t=e.split(" ");return 1===t.length?t[0]:t.map((function(e,t){return 0===t?e[0].toUpperCase()+".":e.toUpperCase()})).join(" ")};return Object(n.jsxs)(Kn.a,{responsive:!0,hover:!0,striped:!0,className:"mt-3",children:[Object(n.jsxs)("thead",{children:[Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"Title"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Practice"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Contacts"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Company"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Status"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Probability"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Request"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Staff"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Start"}),Object(n.jsx)("th",{className:"align-middle text-light"}),Object(n.jsx)("th",{className:"align-middle text-light"})]}),Object(n.jsxs)("tr",{className:"table-ligth",children:[Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(Hn.a.Group,{controlId:"filter-title",className:"mb-0",children:Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Search title",value:s.searchTitle&&s.searchTitle,onChange:function(e){s.setSearchTitle(e.target.value)}})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(Hn.a.Group,{controlId:"filter-practice",className:"mb-0",children:Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Search practice",disabled:!0})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(Hn.a.Group,{controlId:"filter-contact",className:"mb-0",children:Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Search contact",value:s.searchContact&&s.searchContact,onChange:function(e){return s.setSearchContact(e.target.value)}})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(Hn.a.Group,{controlId:"filter-company",className:"mb-0",children:Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Search company",value:s.searchCompany&&s.searchCompany,onChange:function(e){return s.setSearchCompany(e.target.value)}})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(Hn.a.Group,{controlId:"filter-status",className:"mb-0",children:Object(n.jsxs)(Hn.a.Control,{as:"select",value:s.searchDealStatus&&s.searchDealStatus,onChange:function(e){s.setSearchDealStatus(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),Ua.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name},e.name)}))]})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(Hn.a.Group,{controlId:"filter-probability",className:"mb-0",children:Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Search probability",disabled:!0})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(Hn.a.Group,{controlId:"filter-request",className:"mb-0",children:Object(n.jsxs)(Hn.a.Control,{as:"select",value:s.searchRequestStatus&&s.searchRequestStatus,onChange:function(e){s.setSearchRequestStatus(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),ka.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name},e.name)}))]})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(Hn.a.Group,{controlId:"filter-staff",className:"mb-0",children:Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Search staff",value:s.searchStaff&&s.searchStaff,onChange:function(e){return s.setSearchStaff(e.target.value)}})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",children:Object(n.jsx)(Hn.a.Group,{controlId:"filter-start",className:"mb-0",children:Object(n.jsx)(Hn.a.Control,{type:"text",placeholder:"Search start",disabled:!0})})}),Object(n.jsx)("th",{className:"align-middle text-Dark",colSpan:2,children:Object(n.jsxs)(Qn.a,{variant:"ligth",style:{color:"grey"},onClick:function(){s.setSearchTitle(""),s.setSearchCompany(""),s.setSearchContact(""),s.setSearchDealStatus(""),s.setSearchRequestStatus(""),s.setSearchStaff("")},children:[Object(n.jsx)("i",{className:"fas fa-minus-circle"}),"  Reset"]})})]})]}),Object(n.jsx)("tbody",{children:c&&c.deals.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)(Cc.a,{placement:"bottom",overlay:Object(n.jsx)(Nc.a,{id:"button-tooltip-2",children:e.description}),children:Object(n.jsx)("td",{className:"align-middle",children:e.title})}),Object(n.jsxs)("td",{className:"align-middle text-center",children:[e.mainPractice," ",e.othersPractices&&e.othersPractices.length?"(".concat(e.othersPractices.join(", "),")"):""]}),Object(n.jsxs)("td",{className:"align-middle text-center",children:[e.contacts.primary?o(e.contacts.primary.name):"-"," ",e.contacts&&e.contacts.secondary&&e.contacts.secondary.length?"/ ("+e.contacts.secondary.map((function(e){return o(e.name.toString())})).join(", ")+")":""]}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.company}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.status}),Object(n.jsxs)("td",{className:"align-middle text-center",children:[e.probability," %"]}),Object(n.jsx)(Cc.a,{placement:"bottom",overlay:Object(n.jsx)(Nc.a,{id:"button-tooltip-2",children:e.staffingRequest.instructions}),children:Object(n.jsx)("td",{className:"align-middle text-center",children:e.staffingRequest.requestStatus})}),Object(n.jsx)(Cc.a,{placement:"bottom",overlay:Object(n.jsx)(Nc.a,{id:"button-tooltip-2",children:e.staffingDecision.staff.length>0?e.staffingDecision.staff.map((function(e){return{name:o(e.idConsultant.name),responsability:e.responsability,priority:e.priority}})).map((function(e,t){return Object(n.jsx)("div",{className:"text-left",children:"".concat(e.responsability,": ").concat(e.name," (").concat(e.priority,")")},t)})):"-"}),children:Object(n.jsx)("td",{className:"align-middle",children:e.staffingDecision.staff.length>0?"See":"-"})}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.startDate.substring(0,10)}),Object(n.jsx)("td",{className:"align-middle text-center",children:Object(n.jsx)(Qn.a,{variant:"ligth",style:{color:"gray"},onClick:function(){return t.push("/staffing/".concat(e._id))},size:"md",children:Object(n.jsx)("i",{className:"fas fa-edit"})})}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(Qn.a,{variant:"ligth",style:{color:"red"},onClick:function(){return l(e)},size:"md",children:Object(n.jsx)("i",{className:"fas fa-times"})})})]},e._id)}))})]})},ys=Pc.a.ExcelFile,Ss=Pc.a.ExcelFile.ExcelSheet,Es=Pc.a.ExcelFile.ExcelColumn,Cs=function(e){var t=e.history,a=Object(i.b)(),s=Object(c.useState)(""),r=Object(Xn.a)(s,1)[0],l=Object(c.useState)(""),o=Object(Xn.a)(l,1)[0],d=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).title?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).title:""),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).company?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).company:""),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).contact?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).contact:""),f=Object(Xn.a)(m,2),g=f[0],v=f[1],y=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).dealStatus?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).dealStatus:""),S=Object(Xn.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).requestStatus?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).requestStatus:""),T=Object(Xn.a)(N,2),L=T[0],A=T[1],_=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).myDeals?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).myDeals:""),I=Object(Xn.a)(_,2),D=I[0],k=I[1],w=Object(c.useState)(localStorage.getItem("ManageDealsScreen.filter")&&JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).searchStaff?JSON.parse(localStorage.getItem("ManageDealsScreen.filter")).searchStaff:""),U=Object(Xn.a)(w,2),P=U[0],R=U[1],M=Object(c.useState)(7),F=Object(Xn.a)(M,2),G=F[0],B=F[1],q=Object(c.useState)(30),z=Object(Xn.a)(q,2),X=z[0],H=z[1],Q=Object(c.useState)(7),K=Object(Xn.a)(Q,2),Y=K[0],V=K[1],W=Object(c.useState)(7),J=Object(Xn.a)(W,2),Z=J[0],$=J[1],ee=Object(c.useState)(!1),te=Object(Xn.a)(ee,2),ae=te[0],ne=te[1],ce=Object(c.useState)(["Waiting staffing","Updated (".concat(G,"d)"),"Not updated (".concat(X,"d)"),"New deal (".concat(Y,"d)"),"Won (".concat(Z,"d)"),"All"]),se=Object(Xn.a)(ce,1)[0],re=Object(c.useState)(localStorage.getItem("ManageDealsScreen.defaultTab")?localStorage.getItem("ManageDealsScreen.defaultTab"):se[0]),ie=Object(Xn.a)(re,2),le=ie[0],oe=ie[1],de=Object(c.useState)([]),je=Object(Xn.a)(de,2),ue=je[0],be=je[1],he=Object(c.useState)(!0),Oe=Object(Xn.a)(he,2),pe=Oe[0],xe=Oe[1],me=Object(c.useState)(""),fe=Object(Xn.a)(me,2),ge=fe[0],ve=fe[1],ye=Object(c.useState)([]),Se=Object(Xn.a)(ye,2),Ee=Se[0],Ce=Se[1],Ne=Object(i.c)((function(e){return e.userLogin})).userInfo,Te=Object(i.c)((function(e){return e.dealAllList})),Le=Te.error,Ae=Te.loading,_e=Te.deals,Ie=Object(i.c)((function(e){return e.dealDelete})),De=Ie.error,ke=Ie.success,we=Object(i.c)((function(e){return e.dealsImportMass})),Ue=we.loading,Pe=(we.error,we.success);we.datas;return Object(c.useEffect)((function(){Ne?(a(yc({title:u,contact:g,company:p,status:E,request:L,staff:P,filterMy:D},o,r,"active")),localStorage.setItem("ManageDealsScreen.filter",JSON.stringify({title:u,company:p,contact:g,dealStatus:E,requestStatus:L,searchStaff:P,myDeals:D})),xe(!1)):t.push("/login")}),[a,t,Ne,u,p,g,E,L,P,o,r,pe,D,Pe]),Object(c.useEffect)((function(){_e&&function(){var e=new Date(Date.now());e.setUTCDate(e.getUTCDate()-G);var t=new Date(Date.now());t.setUTCDate(t.getUTCDate()-X);var a=new Date(Date.now());a.setUTCDate(a.getUTCDate()-Y);var n=new Date(Date.now());n.setUTCDate(n.getUTCDate()-Z);for(var c=[],s=0;s<se.length;s++){var r=[];!function(){switch(se[s]){case se[0]:var c=ka.filter((function(e){return!0===e.staff})),i=Ua.filter((function(e){return"onTrack"===e.display||"win"===e.display}));r={deals:_e.filter((function(e){return c.map((function(e){return e.name})).includes(e.staffingRequest.requestStatus)&&i.map((function(e){return e.name})).includes(e.status)})),param:null,setParam:null};break;case se[1]:r={deals:_e.filter((function(t){return new Date(t.updatedAt)>=e})),param:G,setParam:B};break;case se[2]:r={deals:_e.filter((function(e){return new Date(e.updatedAt)<=t})),param:X,setParam:H};break;case se[3]:r={deals:_e.filter((function(e){return new Date(e.createdAt)>=a})),param:Y,setParam:V};break;case se[4]:r={deals:_e.filter((function(e){return new Date(e.wonDate)>=n})),param:Z,setParam:$};break;case se[5]:r={deals:_e,param:null,setParam:null};break;default:r=[]}}(),c.push({filter:se[s],data:r,count:r.deals.length})}be(c)}()}),[_e,se,Y,X,G,Z]),Object(c.useEffect)((function(){if(_e){var e=_e.map((function(e){return{TITLE:e.title,COMPANY:e.company,PRACTICE:e.mainPractice,LEADER:e.contacts&&e.contacts.primary&&e.contacts.primary.name,"CO-LEADER":e.contacts&&e.contacts.secondary&&e.contacts.secondary.map((function(e){return e.name})).join(""),OTHERS_PRACTICES:e.othersPractices&&e.othersPractices.join(","),STATUS:e.status,DESCRIPTION:e.description,START:e.startDate.substring(0,10),DURATION:e.duration,REQUEST_STATUS:e.staffingRequest.requestStatus,REQUEST_DETAILS:e.staffingRequest.instructions,DECISION:e.staffingDecision.staff&&e.staffingDecision.staff.map((function(e){return"".concat(e.responsability,": ").concat(e.idConsultant.name," (").concat(e.priority,")}")})).join("\n")}}));ve(e)}}),[_e,ve]),Object(c.useEffect)((function(){Ee.length>0&&a(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Aa}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.put("/api/deals/admin/mass-import",e,r);case 6:i=t.sent,l=i.data,a({type:_a,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Ia,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(Ee))}),[a,Ee]),Object(c.useEffect)((function(){if(ke){var e={title:u,mainPractice:Ne.consultantProfil.practice,othersPractices:Ne.consultantProfil.practice,contact:g,company:p,status:E,request:L,staff:P,filterMy:D};a(yc(e,o,r))}}),[a,ke]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(fc,{}),De&&Object(n.jsx)(Wn,{variant:"danger",children:De}),Le&&Object(n.jsx)(Wn,{variant:"danger",children:Le}),Ae&&Object(n.jsx)(Zn,{}),Object(n.jsxs)(oc,{title:"Manage Deals",close:!1,children:[Object(n.jsxs)(Bn.a,{className:"mt-3",children:[Object(n.jsx)(qn.a,{xs:0,md:7}),Object(n.jsx)(qn.a,{xs:6,md:3,children:Object(n.jsx)(Fn,{access:"uploadDeals",children:Ue?Object(n.jsx)(Zn,{}):Object(n.jsx)(wc,{setImportData:Ce})})}),Object(n.jsx)(qn.a,{ws:6,md:2,children:ge&&Object(n.jsx)(ys,{element:Object(n.jsxs)(Qn.a,{variant:"primary",children:[Object(n.jsx)("i",{className:"fas fa-download"}),"  Download"]}),children:Object(n.jsxs)(Ss,{data:ge,name:"dealsSheet",children:[Object(n.jsx)(Es,{label:"TITLE",value:"TITLE"}),Object(n.jsx)(Es,{label:"COMPANY",value:"COMPANY"}),Object(n.jsx)(Es,{label:"PRACTICE",value:"PRACTICE"}),Object(n.jsx)(Es,{label:"LEADER",value:"LEADER"}),Object(n.jsx)(Es,{label:"CO-LEADER",value:"CO-LEADER"}),Object(n.jsx)(Es,{label:"OTHERS_PRACTICES",value:"OTHERS_PRACTICES"}),Object(n.jsx)(Es,{label:"STATUS",value:"STATUS"}),Object(n.jsx)(Es,{label:"DESCRIPTION",value:"DESCRIPTION"}),Object(n.jsx)(Es,{label:"START",value:"START"}),Object(n.jsx)(Es,{label:"DURATION",value:"DURATION"}),Object(n.jsx)(Es,{label:"REQUEST_STATUS",value:"REQUEST_STATUS"}),Object(n.jsx)(Es,{label:"REQUEST_DETAILS",value:"REQUEST_DETAILS"}),Object(n.jsx)(Es,{label:"DECISION",value:"DECISION"})]})})})]}),Object(n.jsx)(tc.a.Item,{className:"p-0 mt-3",children:Object(n.jsx)(Wc.a,{id:"uncontrolled-tab-example",variant:"pills",activeKey:le,onSelect:function(e){oe(e),localStorage.setItem("ManageDealsScreen.defaultTab",e)},children:ue.length>0&&ue.map((function(e,a){return Object(n.jsxs)(Jc.a,{className:"mx-3",eventKey:"".concat(e.filter),title:Object(n.jsxs)(Bn.a,{className:"align-text-middle",children:[Object(n.jsx)("span",{className:"ml-3 align-middle",children:e.filter.split(/[0-9]+/i)[0]}),ae?Object(n.jsx)("span",{children:e.data.param&&Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{as:"select",value:e.data.param,onChange:function(t){return e.data.setParam(t.target.value)},children:Object(Ec.a)(new Array(30).keys()).map((function(e){return Object(n.jsx)("option",{value:e+1,children:e+1},e+1)}))})})}):e.data.param,Object(n.jsx)("span",{children:e.filter.split(/[0-9]+/i)[1]&&e.filter.split(/[0-9]+/i)[1]}),Object(n.jsx)("span",{className:"mr-3",children:" > "+e.count})]}),children:[Object(n.jsx)(Bn.a,{className:"mt-3",children:Object(n.jsxs)(qn.a,{className:"text-left",children:[Object(n.jsxs)(Qn.a,{variant:"ligth",onClick:function(){return ne(!ae)},children:[Object(n.jsx)("i",{className:"fas fa-edit"}),"  Configure tabs"]}),Object(n.jsxs)(Qn.a,{variant:"ligth",onClick:function(){return t.push("/admin/deals/history")},children:[Object(n.jsx)("i",{className:"fas fa-history"}),"  History"]}),Object(n.jsx)(Qn.a,{variant:"ligth",onClick:function(){k(!D),xe(!0)},children:D?Object(n.jsxs)("div",{children:[Object(n.jsx)("i",{className:"fas fa-backspace"}),"  Get all deals"]}):Object(n.jsxs)("div",{children:[Object(n.jsx)("i",{className:"fas fa-filter"}),"  Filter my deals"]})}),Object(n.jsxs)(Qn.a,{variant:"ligth",onClick:function(){return window.confirm("Soon available")},children:[Object(n.jsx)("i",{className:"fas fa-project-diagram"}),"  Business flows"]}),Object(n.jsx)(Fn,{access:"sendStaffingDecision",children:Object(n.jsxs)(Qn.a,{variant:"ligth",className:"text-black align-right",onClick:function(){return t.push("/admin/send")},children:[Object(n.jsx)("i",{className:"fas fa-envelope"}),"  Send staffing decisions"]})})]})}),Object(n.jsx)(vs,{history:t,data:e.data,filter:{searchTitle:u,setSearchTitle:b,searchCompany:p,setSearchCompany:x,searchContact:g,setSearchContact:v,searchDealStatus:E,setSearchDealStatus:C,searchRequestStatus:L,setSearchRequestStatus:A,searchStaff:P,setSearchStaff:R}})]},a)}))})})]})]})},Ns=Pc.a.ExcelFile,Ts=Pc.a.ExcelFile.ExcelSheet,Ls=Pc.a.ExcelFile.ExcelColumn,As=function(e){var t=e.history,a=Object(i.b)(),s=Object(c.useState)(""),r=Object(Xn.a)(s,1)[0],l=Object(c.useState)(""),o=Object(Xn.a)(l,1)[0],d=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).title?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).title:""),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).company?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).company:""),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).contact?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).contact:""),f=Object(Xn.a)(m,2),g=f[0],v=f[1],y=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).dealStatus?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).dealStatus:""),S=Object(Xn.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).requestStatus?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).requestStatus:""),T=Object(Xn.a)(N,2),L=T[0],A=T[1],_=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.filter")&&JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).searchStaff?JSON.parse(localStorage.getItem("DealsHistoryScreen.filter")).searchStaff:""),I=Object(Xn.a)(_,2),D=I[0],k=I[1],w=Object(c.useState)(Object(Ec.a)(new Array(5).keys()).map((function(e){return new Date(Date.now()).getFullYear()-e}))),U=Object(Xn.a)(w,1)[0],P=Object(c.useState)(localStorage.getItem("DealsHistoryScreen.defaultTab")?localStorage.getItem("DealsHistoryScreen.defaultTab"):U[0]),R=Object(Xn.a)(P,2),M=R[0],F=R[1],G=Object(c.useState)([]),B=Object(Xn.a)(G,2),q=B[0],z=B[1],X=Object(c.useState)(!0),H=Object(Xn.a)(X,2),Q=H[0],K=H[1],Y=Object(i.c)((function(e){return e.userLogin})).userInfo,V=Object(i.c)((function(e){return e.dealAllList})),W=V.error,J=V.loading,Z=V.deals,$=Object(i.c)((function(e){return e.dealDelete})),ee=$.error,te=$.success;return Object(c.useEffect)((function(){if(Y){var e={title:u,mainPractice:Y.consultantProfil.practice,othersPractices:Y.consultantProfil.practice,contact:g,company:p,status:E,request:L,staff:D,filterMy:!1};a(yc(e,o,r,"all")),localStorage.setItem("DealsHistoryScreen.filter",JSON.stringify({title:u,company:p,contact:g,dealStatus:E,requestStatus:L,searchStaff:D})),K(!1)}else t.push("/login")}),[a,t,Y,u,p,g,E,L,D,o,r,Q]),Object(c.useEffect)((function(){if(Z){for(var e=[],t=function(t){var a=Z.filter((function(e){return e.updatedAt.substring(0,4)===U[t].toString()}));a={deals:a,param:null,setParam:null,exportExcel:a.map((function(e){return{TITLE:e.title,MAIN_PRACTICE:e.mainPractice,OTHERS_PRACTICES:e.othersPractices.join(", "),LEADER:e.contacts.primary?e.contacts.primary.name+" ("+e.contacts.primary.matricule+")":"","CO-LEADERS":e.contacts.secondary?e.contacts.secondary.map((function(e){return e.name+" ("+e.matricule+")"})).join(", "):"",COMPANY:e.company,STATUS:e.status,TYPE:e.type,DESCRIPTION:e.description,"PROPOSAL DATE":e.proposalDate?e.proposalDate.substring(0,10):"","PRESENTATION DATE":e.presentationDate?e.presentationDate.substring(0,10):"","START DATE":e.startDate?e.startDate.substring(0,10):"","WON DATE":e.wonDate?e.wonDate.substring(0,10):"",STAFF:e.staffingDecision.staff?e.staffingDecision.staff.map((function(e){return e.responsability+": "+e.idConsultant.name+" ("+e.idConsultant.matricule+")"})).join(", "):""}}))},e.push({filter:U[t],data:a,count:a.deals.length})},a=0;a<U.length;a++)t(a);z(e)}}),[Z,U]),Object(c.useEffect)((function(){if(te){var e={title:u,mainPractice:Y.consultantProfil.practice,othersPractices:Y.consultantProfil.practice,contact:g,company:p,status:E,request:L,staff:D,filterMy:!1};a(yc(e,o,r))}}),[a,te]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(fc,{}),ee&&Object(n.jsx)(Wn,{variant:"danger",children:ee}),W&&Object(n.jsx)(Wn,{variant:"danger",children:W}),J&&Object(n.jsx)(Zn,{}),Object(n.jsx)(oc,{title:"Manage Deals",close:!1,children:Object(n.jsx)(tc.a.Item,{className:"p-0 mt-3",children:Object(n.jsx)(Wc.a,{id:"uncontrolled-tab-example",variant:"pills",activeKey:M,onSelect:function(e){F(e),localStorage.setItem("DealsHistoryScreen.defaultTab",e)},children:q.length>0&&q.map((function(e,a){return Object(n.jsxs)(Jc.a,{className:"mx-3",eventKey:"".concat(e.filter),title:e.filter+" ("+e.data.deals.length+")",children:[e.data.deals&&Object(n.jsx)(Ns,{element:Object(n.jsxs)(Qn.a,{variant:"ligth",className:"mt-3",children:[Object(n.jsx)("i",{className:"fas fa-download"}),"  Download"]}),children:Object(n.jsxs)(Ts,{data:e.data.exportExcel,name:"dealsSheet",children:[Object(n.jsx)(Ls,{label:"TITLE",value:"TITLE"}),Object(n.jsx)(Ls,{label:"MAIN_PRACTICE",value:"MAIN_PRACTICE"}),Object(n.jsx)(Ls,{label:"OTHERS_PRACTICES",value:"OTHERS_PRACTICES"}),Object(n.jsx)(Ls,{label:"LEADER",value:"LEADER"}),Object(n.jsx)(Ls,{label:"CO-LEADERS",value:"CO-LEADERS"}),Object(n.jsx)(Ls,{label:"COMPANY",value:"COMPANY"}),Object(n.jsx)(Ls,{label:"STATUS",value:"STATUS"}),Object(n.jsx)(Ls,{label:"TYPE",value:"TYPE"}),Object(n.jsx)(Ls,{label:"DESCRIPTION",value:"DESCRIPTION"}),Object(n.jsx)(Ls,{label:"PROPOSAL DATE",value:"PROPOSAL DATE"}),Object(n.jsx)(Ls,{label:"PRESENTATION DATE",value:"PRESENTATION DATE"}),Object(n.jsx)(Ls,{label:"START DATE",value:"START DATE"}),Object(n.jsx)(Ls,{label:"WON DATE",value:"WON DATE"}),Object(n.jsx)(Ls,{label:"STAFF",value:"STAFF"})]})}),Object(n.jsx)(vs,{history:t,data:e.data,filter:{searchTitle:u,setSearchTitle:b,searchCompany:p,setSearchCompany:x,searchContact:g,setSearchContact:v,searchDealStatus:E,setSearchDealStatus:C,searchRequestStatus:L,setSearchRequestStatus:A,searchStaff:D,setSearchStaff:k}})]},a)}))})})})]})},_s=function(e){var t=e.data,a=function(e){for(var t=Object(Ec.a)(new Set(e.map((function(e){return e.category})))),a=[],n=function(n){var c=e.filter((function(e){return e.category===t[n]}));a.push({frontAccessRules:c,category:t[n]})},c=0;c<t.length;c++)n(c);return[a,t]}(t.frontAccess),c=Object(Xn.a)(a,2),s=c[0],r=c[1];return Object(n.jsx)(tc.a,{children:s&&s.map((function(e,a){return Object(n.jsx)(tc.a.Item,{className:"pt-3",children:Object(n.jsx)(Is,{accessRules:e.frontAccessRules,category:e.category,categories:r,profilId:t._id})},a)}))})},Is=function(e){var t=e.accessRules,a=e.category,c=e.categories,s=e.profilId,r={categories:c,modes:Ha,datas:Qa};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h4",{children:a&&a}),Object(n.jsx)(tc.a,{variant:"flush",children:Object(n.jsx)(tc.a.Item,{children:Object(n.jsxs)(Bn.a,{className:"py-1 border-bottom bg-primary",children:[Object(n.jsx)(qn.a,{className:"text-white",xs:3,children:Object(n.jsx)("strong",{children:"TECHNICAL ID"})}),Object(n.jsx)(qn.a,{className:"text-white",xs:4,children:Object(n.jsx)("strong",{children:"LABEL"})}),Object(n.jsx)(qn.a,{className:"text-white",xs:2,children:Object(n.jsx)("strong",{children:"MODE"})}),Object(n.jsx)(qn.a,{className:"text-white",xs:2,children:Object(n.jsx)("strong",{children:"ACCESS"})}),Object(n.jsx)(qn.a,{xs:1,children:Object(n.jsx)("strong",{})})]})})}),t&&t.map((function(e,t){return Object(n.jsx)(tc.a,{variant:"flush",className:"border-bottom",children:Object(n.jsx)(tc.a.Item,{children:Object(n.jsx)(Ds,{frontAccessItem:e,params:r,profilId:s})})},t)}))]})},Ds=function(e){var t=e.frontAccessItem,a=e.params,s=e.profilId,r=Object(i.b)(),l=Object(c.useState)(t.id),o=Object(Xn.a)(l,1)[0],d=Object(c.useState)(t.label),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(t.mode),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(c.useState)(t.data),f=Object(Xn.a)(m,2),g=f[0],v=f[1],y=Object(c.useState)(!1),S=Object(Xn.a)(y,2),E=S[0],C=S[1],N=Object(i.c)((function(e){return e.accessFrontUpdate})),T=N.error,L=N.success;Object(c.useEffect)((function(){L&&C(!1)}),[L]),Object(c.useEffect)((function(){T&&C(!1)}),[T]);return Object(n.jsx)(Hn.a,{onSubmit:function(e){e.preventDefault(),C(!0),r(function(e){return function(){var t=Object(Un.a)(wn.a.mark((function t(a,n){var c,s,r,i,l;return wn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ba}),c=n(),s=c.userLogin.userInfo,r={headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,Rn.a.put("/api/access",e,r);case 6:i=t.sent,l=i.data,a({type:qa,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:za,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}({id:o,label:u,mode:p,data:g,profilId:s})),console.log("update to implement")},children:Object(n.jsxs)(Hn.a.Row,{children:[Object(n.jsx)(qn.a,{xs:3,children:Object(n.jsx)(Hn.a.Control,{type:"text",value:o&&o,plaintext:!0,readOnly:!0})}),Object(n.jsx)(qn.a,{xs:4,children:Object(n.jsx)(Hn.a.Control,{type:"text",value:u&&u,onChange:function(e){return b(e.target.value)}})}),Object(n.jsx)(qn.a,{xs:2,children:Object(n.jsxs)(Hn.a.Control,{as:"select",value:p&&p,onChange:function(e){return x(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),a.modes.map((function(e,t){return Object(n.jsx)("option",{value:e,children:e},t)}))]})}),Object(n.jsx)(qn.a,{xs:2,children:Object(n.jsxs)(Hn.a.Control,{as:"select",value:g&&g,onChange:function(e){return v(e.target.value)},children:[Object(n.jsx)("option",{value:"",children:"--Select--"}),a.datas.map((function(e,t){return Object(n.jsx)("option",{value:e,children:e},t)}))]})}),Object(n.jsx)(qn.a,{xs:1,children:Object(n.jsx)(Qn.a,{variant:"ligth",className:"text-secondary",type:"submit",children:E?Object(n.jsx)(Zn,{}):Object(n.jsx)("i",{className:"fas fa-download"})})})]})})},ks=function(e){var t=e.history,a=Object(i.b)(),s=Object(i.c)((function(e){return e.userLogin})).userInfo,r=Object(i.c)((function(e){return e.accessList})),l=r.loading,o=r.error,d=r.access,j=Object(i.c)((function(e){return e.accessFrontUpdate})).error;return Object(c.useEffect)((function(){s||t.push("/login")}),[t,s]),Object(c.useEffect)((function(){d||a(Qc())}),[a,d]),Object(n.jsxs)(Fn,{access:"manageProfils",children:[l&&Object(n.jsx)(Zn,{}),o&&Object(n.jsx)(Wn,{variant:"danger",children:o}),j&&Object(n.jsx)(Wn,{variant:"danger",children:j}),Object(n.jsx)("h1",{children:"Manage user profils screen"}),Object(n.jsx)(Wc.a,{defaultActiveKey:d&&d[0].profil,id:"uncontrolled-tab-example",children:d&&d.map((function(e,t){return Object(n.jsx)(Jc.a,{eventKey:e.profil,title:e.profil,children:Object(n.jsx)(_s,{data:e})},t)}))})]})},ws=function(e){var t=e.company,a=e.setShowAddContact,s=e.deleteContactHandler,r=Object(c.useState)(t.commercialTeam||[]),i=Object(Xn.a)(r,1)[0];return Object(n.jsxs)("div",{children:[i.map((function(e,a){return Object(n.jsx)(Bn.a,{children:Object(n.jsxs)(qn.a,{children:["".concat(e.contactName," (").concat(e.contactEmail,")"),Object(n.jsx)(Qn.a,{variant:"ligth",className:"ml-3 px-1 text-danger",onClick:function(){return s(e.contactEmail,t._id)},children:Object(n.jsx)("i",{className:"fas fa-times"})})]})},a)})),Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{className:"text-left",children:Object(n.jsxs)(Qn.a,{className:"m-0 p-1 text-primary",variant:"ligth",onClick:function(){return a({state:!0,companyId:t._id,companyName:t.name})},children:[Object(n.jsx)("i",{className:"fas fa-plus"}),Object(n.jsx)("i",{children:"  add a contact"})]})})})]})},Us=function(e){var t=e.history,a=Object(i.b)(),s=Object(c.useState)(10),r=Object(Xn.a)(s,2),l=r[0],o=r[1],d=Object(c.useState)(1),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(""),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(c.useState)({state:!1,companyId:"",companyName:""}),f=Object(Xn.a)(m,2),g=f[0],v=f[1],y=Object(c.useState)(""),S=Object(Xn.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(""),T=Object(Xn.a)(N,2),L=T[0],A=T[1],_=Object(c.useState)(""),I=Object(Xn.a)(_,2),D=I[0],k=I[1],w=Object(c.useState)({state:!1,companyId:"",companyName:""}),U=Object(Xn.a)(w,2),P=U[0],R=U[1],M=Object(c.useState)(""),F=Object(Xn.a)(M,2),G=F[0],B=F[1],q=Object(c.useState)({state:!1}),z=Object(Xn.a)(q,2),X=z[0],H=z[1],Q=Object(i.c)((function(e){return e.userLogin})).userInfo,K=Object(i.c)((function(e){return e.clientAll})),Y=K.error,V=K.loading,W=K.clients,J=K.count,Z=K.page,$=K.pages,ee=Object(i.c)((function(e){return e.clientUpdate})),te=ee.error,ae=ee.success,ne=Object(i.c)((function(e){return e.clientDelete})),ce=ne.error,se=ne.success,re=Object(i.c)((function(e){return e.clientCreate})),ie=re.error,le=re.success;Object(c.useEffect)((function(){Q?a(ls(p,u,l)):t.push("/login")}),[a,t,Q,u,l,p]),Object(c.useEffect)((function(){ae&&a(ls(p,u,l))}),[a,ae]),Object(c.useEffect)((function(){se&&a(ls(p,u,l))}),[a,se]),Object(c.useEffect)((function(){le&&a(ls(p,u,l))}),[a,le]);var oe=function(e){var t;window.confirm("Are you sure to delete company: ".concat(e.name," ?"))&&a((t=e._id,function(){var e=Object(Un.a)(wn.a.mark((function e(a,n){var c,s,r,i,l;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:sn}),c=n(),s=c.userLogin.userInfo,r={headers:{Authorization:"Bearer ".concat(s.token)}},e.next=6,Rn.a.delete("/api/clients/".concat(t),r);case 6:i=e.sent,l=i.data,a({type:rn,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:ln,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))},de=function(e,t){if(window.confirm("Are you sure to delete contact: ".concat(e," ?"))){var n=W.filter((function(e){return e._id===t}))[0];n.commercialTeam=n.commercialTeam.map((function(e){return{contactName:e.contactName,contactEmail:e.contactEmail}}));var c=n.commercialTeam.filter((function(t){return t.contactEmail!==e}));n.commercialTeam=c,a(ds(n))}};return Object(n.jsxs)(Fn,{access:"manageCompanies",children:[te&&Object(n.jsx)(Wn,{variant:"danger",children:te}),ce&&Object(n.jsx)(Wn,{variant:"danger",children:ce}),ie&&Object(n.jsx)(Wn,{variant:"danger",children:ie}),Object(n.jsx)(oc,{title:"Manage companies",close:!1,children:Object(n.jsxs)(tc.a.Item,{children:[Object(n.jsxs)(Bn.a,{children:[Object(n.jsx)(qn.a,{xs:6,md:4,children:Object(n.jsxs)(Qn.a,{className:"mb-3",onClick:function(){return H({state:!0})},children:[Object(n.jsx)("i",{className:"fas fa-plus mr-2"}),"Add"]})}),Object(n.jsx)(qn.a,{xs:6,md:2,children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{type:"text",className:"mb-3",placeholder:"Search company",value:p&&p,onChange:function(e){return x(e.target.value)}})})}),Object(n.jsx)(qn.a,{xs:6,md:4,children:Object(n.jsx)(Hn.a.Control,{plaintext:!0,readOnly:!0,value:J?"".concat(J," companies found"):"0 company found"})}),Object(n.jsx)(qn.a,{xs:6,md:2,children:Object(n.jsx)(ac.a,{children:Object(n.jsx)(nc.a,{as:"select",id:"number-c",className:"mb-3",value:l&&l,onChange:function(e){return o(e.target.value)},children:[5,10,15,20,50].map((function(e){return Object(n.jsxs)("option",{value:e,children:[e," / page"]},e)}))})})})]}),W&&0===W.length?Object(n.jsx)(Wn,{variant:"information",children:"You have not access to these information"}):V?Object(n.jsx)(Zn,{}):Y?Object(n.jsx)(Wn,{variant:"danger",children:Y}):Object(n.jsxs)(Kn.a,{responsive:!0,hover:!0,striped:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light",children:"Company name"}),Object(n.jsx)("th",{className:"align-middle text-light",children:"Commercial contacts"})]})}),Object(n.jsx)("tbody",{children:W&&W.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{className:"align-middle",children:[Object(n.jsx)(Bn.a,{children:Object(n.jsx)(qn.a,{children:e.name})}),Object(n.jsx)(Bn.a,{children:Object(n.jsxs)(qn.a,{children:[Object(n.jsxs)(Qn.a,{variant:"ligth",className:"m-0 p-1 text-primary",onClick:function(){return R({state:!0,companyId:e._id,companyName:e.name})},children:[Object(n.jsx)("i",{className:"fas fa-minus"}),Object(n.jsx)("i",{children:"  modify"})]}),Object(n.jsxs)(Qn.a,{variant:"ligth",className:"m-0 p-1 btn text-danger",onClick:function(){return oe(e)},children:[Object(n.jsx)("i",{className:"fas fa-times"}),Object(n.jsx)("i",{children:"  Delete"})]})]})})]}),Object(n.jsx)("td",{className:"align-middle",children:Object(n.jsx)(ws,{company:e,setShowAddContact:v,deleteContactHandler:de})})]},e._id)}))})]}),Object(n.jsxs)(Rc.a,{children:[Object(n.jsx)(Rc.a.Prev,{onClick:function(){return b(Z-1)},disabled:1===Z}),Object(Ec.a)(Array($).keys()).map((function(e){return[0,1,$-2,$-1].includes(e)?Object(n.jsx)(Rc.a.Item,{active:e+1===Z,onClick:function(){a(ls(p,e+1,l)),b(e+1)},children:e+1},e+1):$>4&&2===e&&Object(n.jsx)(Rc.a.Ellipsis,{},e+1)})),Object(n.jsx)(Rc.a.Next,{onClick:function(){return b(Z+1)},disabled:Z===$})]})]})}),Object(n.jsxs)(Mc.a,{show:g.state,onHide:function(){return v({state:!1,companyId:"",companyName:""})},children:[Object(n.jsx)(Mc.a.Header,{closeButton:!0,children:Object(n.jsx)(Mc.a.Title,{children:"New contact for: ".concat(g.companyName)})}),Object(n.jsxs)(Mc.a.Body,{children:[Object(n.jsxs)(Hn.a,{children:[Object(n.jsxs)(Hn.a.Group,{children:[Object(n.jsx)(Hn.a.Label,{children:"Name *"}),Object(n.jsx)(Hn.a.Control,{type:"text",value:E&&E,onChange:function(e){return C(e.target.value)}})]}),Object(n.jsxs)(Hn.a.Group,{children:[Object(n.jsx)(Hn.a.Label,{children:"Email *"}),Object(n.jsx)(Hn.a.Control,{type:"email",value:L&&L,onChange:function(e){return A(e.target.value)}})]}),Object(n.jsx)(Qn.a,{type:"submit",variant:"primary",onClick:function(e){return function(e,t,n,c){e.preventDefault();var s=!1,r=!1,i=[];if(t?s=!0:i.push("Thanks to enter a correct Name"),/^(([^<>()[]\.,;:s@]+(.[^<>()[]\.,;:s@]+)*)|(.+))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$/.test(n)?r=!0:i.push("Thanks to enter a correct Email address"),k(i),r&&s){var l=W.filter((function(e){return e._id===c}))[0];l.commercialTeam=l.commercialTeam.map((function(e){return{contactName:e.contactName,contactEmail:e.contactEmail}})),l.commercialTeam.push({contactName:t,contactEmail:n}),a(ds(l)),v({state:!1,companyId:"",companyName:""}),k("")}}(e,E,L,g.companyId)},disabled:!L||!E,children:"Create"})]}),D&&Object(n.jsx)(Wn,{variant:"danger",children:D})]}),Object(n.jsx)(Mc.a.Footer,{children:Object(n.jsx)(Qn.a,{variant:"secondary",onClick:function(){return v({state:!1,companyId:"",companyName:""})},children:"Close"})})]}),Object(n.jsxs)(Mc.a,{show:P.state,onHide:function(){return R({state:!1,companyId:"",companyName:""})},children:[Object(n.jsx)(Mc.a.Header,{closeButton:!0,children:Object(n.jsx)(Mc.a.Title,{children:"Original name: ".concat(P.companyName)})}),Object(n.jsx)(Mc.a.Body,{children:Object(n.jsxs)(Hn.a,{children:[Object(n.jsxs)(Hn.a.Group,{children:[Object(n.jsx)(Hn.a.Label,{children:"New company name *"}),Object(n.jsx)(Hn.a.Control,{type:"text",value:G||P.companyName,onChange:function(e){return B(e.target.value)}})]}),Object(n.jsx)(Qn.a,{type:"submit",variant:"primary",onClick:function(e){return function(e,t,n){e.preventDefault();var c=W.filter((function(e){return e._id===t}))[0];c.name=n,a(ds(c)),R({state:!1,companyId:"",companyName:""})}(e,P.companyId,G)},disabled:!(G&&G!==P.companyName),children:"Modify"})]})}),Object(n.jsx)(Mc.a.Footer,{children:Object(n.jsx)(Qn.a,{variant:"secondary",onClick:function(){R({state:!1,companyId:"",companyName:""}),B("")},children:"Close"})})]}),Object(n.jsxs)(Mc.a,{show:X.state,onHide:function(){return H({state:!1})},children:[Object(n.jsx)(Mc.a.Header,{closeButton:!0,children:Object(n.jsx)(Mc.a.Title,{children:"Create a company:"})}),Object(n.jsx)(Mc.a.Body,{children:Object(n.jsxs)(Hn.a,{children:[Object(n.jsxs)(Hn.a.Group,{children:[Object(n.jsx)(Hn.a.Label,{children:"New company name *"}),Object(n.jsx)(Hn.a.Control,{type:"text",value:G||P.companyName,onChange:function(e){return B(e.target.value)}})]}),Object(n.jsxs)(Hn.a.Group,{children:[Object(n.jsx)(Hn.a.Label,{children:"First contact name"}),Object(n.jsx)(Hn.a.Control,{type:"text",value:E||"",placeholder:"Contact name",onChange:function(e){return C(e.target.value)}})]}),Object(n.jsxs)(Hn.a.Group,{children:[Object(n.jsx)(Hn.a.Label,{children:"First contact email"}),Object(n.jsx)(Hn.a.Control,{type:"email",value:L||"",placeholder:"Contact email",onChange:function(e){return A(e.target.value)}})]}),Object(n.jsx)(Qn.a,{type:"submit",variant:"primary",onClick:function(e){return function(e,t,n,c){e.preventDefault(),a(os([{name:t,commercialTeam:[{contactName:n,contactEmail:c}]}])),H({state:!1}),A(""),C(""),B("")}(e,G,E,L)},disabled:!G,children:"Create"})]})}),Object(n.jsx)(Mc.a.Footer,{children:Object(n.jsx)(Qn.a,{variant:"secondary",onClick:function(){R({state:!1,companyId:"",companyName:""}),B("")},children:"Close"})})]})]})},Ps=function(e){var t=e.history,a=Object(i.b)(),s=Object(c.useState)([]),r=Object(Xn.a)(s,2),l=r[0],o=r[1],d=Object(c.useState)(0),j=Object(Xn.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(0),O=Object(Xn.a)(h,2),p=O[0],x=O[1],m=Object(c.useState)(0),f=Object(Xn.a)(m,2),g=f[0],v=f[1],y=Object(c.useState)(!1),S=Object(Xn.a)(y,2),E=S[0],C=S[1],N=Object(c.useState)(0),T=Object(Xn.a)(N,2),L=T[0],A=T[1],_=(Object(i.c)((function(e){return e.userLogin})).userInfo,Object(i.c)((function(e){return e.contactsList}))),I=_.loading,D=_.contacts,k=Object(i.c)((function(e){return e.sendOneEmail})),w=k.success,U=k.error,P=k.email,R=function(e,t){for(var n=l.slice(),c=0;c<n.length;c++)n[c].email===e&&(n[c].status="loading");o(n),a(function(e,t){return function(){var a=Object(Un.a)(wn.a.mark((function a(n,c){var s,r,i,l,o;return wn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:mn}),s=c(),r=s.userLogin.userInfo,i={headers:{Authorization:"Bearer ".concat(r.token)}},a.next=6,Rn.a.get("/api/emails/decision?email=".concat(e,"&name=").concat(t),i);case 6:l=a.sent,o=l.data,n({type:fn,payload:o}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:gn,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()}(e,t))};return Object(c.useEffect)((function(){a(function(){var e=Object(Un.a)(wn.a.mark((function e(t,a){var n,c,s,r,i;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:hn}),n=a(),c=n.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,Rn.a.get("/api/emails/contacts",s);case 6:r=e.sent,i=r.data,t({type:On,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:pn,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())}),[a]),Object(c.useEffect)((function(){D&&(o(D.map((function(e){return Object(me.a)(Object(me.a)({},e),{},{status:"not sent"})}))),v(D.length))}),[D]),Object(c.useEffect)((function(){E&&("send"!==l[L].status?R(l[L].email,l[L].name):L<l.length-1&&A(L+1))}),[E,L]),Object(c.useEffect)((function(){if(w){for(var e=P,t=l.slice(),a=0;a<t.length;a++)t[a].email===e&&(t[a].status="send");o(t),E&&(L<l.length-1?A(L+1):C(!1))}}),[w]),Object(c.useEffect)((function(){if(U){for(var e=U,t=l.slice(),a=0;a<t.length;a++)t[a].email===e&&(t[a].status="error");o(t),E&&(L<l.length-1?A(L+1):(C(!1),A(0)))}}),[U]),Object(c.useEffect)((function(){b(l.filter((function(e){return"send"===e.status})).length),x(l.filter((function(e){return"error"===e.status})).length),v(l.length)}),[l,U,w]),Object(n.jsxs)("div",{children:[Object(n.jsx)(fc,{}),I&&Object(n.jsx)(Zn,{}),Object(n.jsx)(Qn.a,{variant:"primary",onClick:function(){return t.go(-1)},children:"Go Back"}),Object(n.jsxs)(Bn.a,{className:"align-items-center pt-3",children:[Object(n.jsx)(qn.a,{children:"".concat(u," messages send / ").concat(g," - ").concat(p," messages with error")}),Object(n.jsx)(qn.a,{className:"text-right",children:Object(n.jsxs)(Qn.a,{variant:"ligth",className:"text-primary",onClick:function(){return a({type:vn}),A(0),void C(!0)},children:[Object(n.jsx)("i",{className:"fas fa-envelope"})," ",E?Object(n.jsx)(Zn,{}):"Send all messages"]})})]}),Object(n.jsx)(Bn.a,{className:"pt-3",children:Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Os.a,{children:[Object(n.jsx)(Os.a,{animated:E,now:100*u/g,variant:"primary"}),Object(n.jsx)(Os.a,{animated:E,now:100*p/g,variant:"danger"})]})})}),Object(n.jsx)(Bn.a,{className:"pt-3",children:Object(n.jsx)(qn.a,{children:Object(n.jsxs)(Kn.a,{responsive:!0,hover:!0,striped:!0,className:"mt-3",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"table-primary",children:[Object(n.jsx)("th",{className:"align-middle text-light text-center col-md-5",children:"Name"}),Object(n.jsx)("th",{className:"align-middle text-light text-center col-md-5",children:"Email"}),Object(n.jsx)("th",{className:"align-middle text-light text-center col-md-2",children:"status"})]})}),Object(n.jsx)("tbody",{children:l&&l.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"align-middle text-center",children:e.name?e.name:"Unknown"}),Object(n.jsx)("td",{className:"align-middle text-center",children:e.email}),Object(n.jsx)("td",{className:"align-middle text-center",children:Object(n.jsxs)(Qn.a,{variant:"ligth",className:"error"===e.status?"text-danger":"send"===e.status?"text-success":"text-primary",size:"sm",onClick:function(){return R(e.email,e.name)},disabled:"send"===e.status||!0===E,children:[Object(n.jsx)("i",{className:"fas fa-envelope"}),"not sent"===e.status&&"  send","loading"===e.status&&Object(n.jsx)(Zn,{}),"error"===e.status&&"  Error send again","send"===e.status&&"  sent"]})})]},t)}))})]})})})]})},Rs=function(){return Object(n.jsxs)(Nn.BrowserRouter,{children:[Object(n.jsx)(Gn,{}),Object(n.jsx)("main",{className:"py-3",children:Object(n.jsxs)(Ln.a,{children:[Object(n.jsx)(Tn.d,{path:"/login",component:ec,exact:!0}),Object(n.jsx)(Tn.d,{path:"/register",component:Yc,exact:!0}),Object(n.jsx)(Tn.d,{path:"/staffing",component:bs,exact:!0}),Object(n.jsx)(Tn.d,{path:"/staffing/:id",component:bs,exact:!0}),Object(n.jsx)(Tn.d,{path:"/pxx",component:Ic,exact:!0}),Object(n.jsx)(Tn.d,{path:"/pxx/:id",component:Ic,exact:!0}),Object(n.jsx)(Tn.d,{path:"/pxxdetails/:id",component:gs,exact:!0}),Object(n.jsx)(Tn.d,{path:"/editconsultant/:id",component:Dc,exact:!0}),Object(n.jsx)(Tn.d,{path:"/admin/consultants",component:Xc,exact:!0}),Object(n.jsx)(Tn.d,{path:"/admin/consultants/:keyword/page/:pageNumber",component:ss,exact:!0}),Object(n.jsx)(Tn.d,{path:"/admin/users",component:Hc,exact:!0}),Object(n.jsx)(Tn.d,{path:"/admin/edituser/:id",component:Kc,exact:!0}),Object(n.jsx)(Tn.d,{path:"/admin/consultant/add",component:Dc,exact:!0}),Object(n.jsx)(Tn.d,{path:"/admin/skills",component:hs,exact:!0}),Object(n.jsx)(Tn.d,{path:"/admin/deals",component:Cs,exact:!0}),Object(n.jsx)(Tn.d,{path:"/admin/deals/history",component:As,exact:!0}),Object(n.jsx)(Tn.d,{path:"/admin/profils",component:ks,exact:!0}),Object(n.jsx)(Tn.d,{path:"/admin/companies",component:Us,exact:!0}),Object(n.jsx)(Tn.d,{path:"/admin/send",component:Ps,exact:!0}),Object(n.jsx)(Tn.d,{path:"/",component:ss,exact:!0})]})}),Object(n.jsx)(zn,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(n.jsx)(i.a,{store:Cn,children:Object(n.jsx)(Rs,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[431,1,2]]]);
//# sourceMappingURL=main.c22837ae.chunk.js.map